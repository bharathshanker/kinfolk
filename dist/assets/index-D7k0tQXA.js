function iS(n,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function Fy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function oo(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var i=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(i,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),i}var Rc={exports:{}},Xr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function sS(){if(Im)return Xr;Im=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Xr.Fragment=e,Xr.jsx=i,Xr.jsxs=i,Xr}var Mm;function rS(){return Mm||(Mm=1,Rc.exports=sS()),Rc.exports}var _=rS(),Nc={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function oS(){if(Dm)return be;Dm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=S&&A[S]||A["@@iterator"],typeof A=="function"?A:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,N={};function U(A,P,$){this.props=A,this.context=P,this.refs=N,this.updater=$||C}U.prototype.isReactComponent={},U.prototype.setState=function(A,P){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,P,"setState")},U.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function O(){}O.prototype=U.prototype;function M(A,P,$){this.props=A,this.context=P,this.refs=N,this.updater=$||C}var Y=M.prototype=new O;Y.constructor=M,x(Y,U.prototype),Y.isPureReactComponent=!0;var L=Array.isArray;function j(){}var X={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function D(A,P,$){var W=$.ref;return{$$typeof:n,type:A,key:P,ref:W!==void 0?W:null,props:$}}function te(A,P){return D(A.type,P,A.props)}function de(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function ye(A){var P={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function($){return P[$]})}var pe=/\/+/g;function Ge(A,P){return typeof A=="object"&&A!==null&&A.key!=null?ye(""+A.key):P.toString(36)}function Pe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(j,j):(A.status="pending",A.then(function(P){A.status==="pending"&&(A.status="fulfilled",A.value=P)},function(P){A.status==="pending"&&(A.status="rejected",A.reason=P)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function z(A,P,$,W,oe){var le=typeof A;(le==="undefined"||le==="boolean")&&(A=null);var ve=!1;if(A===null)ve=!0;else switch(le){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(A.$$typeof){case n:case e:ve=!0;break;case v:return ve=A._init,z(ve(A._payload),P,$,W,oe)}}if(ve)return oe=oe(A),ve=W===""?"."+Ge(A,0):W,L(oe)?($="",ve!=null&&($=ve.replace(pe,"$&/")+"/"),z(oe,P,$,"",function(Oe){return Oe})):oe!=null&&(de(oe)&&(oe=te(oe,$+(oe.key==null||A&&A.key===oe.key?"":(""+oe.key).replace(pe,"$&/")+"/")+ve)),P.push(oe)),1;ve=0;var Ae=W===""?".":W+":";if(L(A))for(var Te=0;Te<A.length;Te++)W=A[Te],le=Ae+Ge(W,Te),ve+=z(W,P,$,le,oe);else if(Te=b(A),typeof Te=="function")for(A=Te.call(A),Te=0;!(W=A.next()).done;)W=W.value,le=Ae+Ge(W,Te++),ve+=z(W,P,$,le,oe);else if(le==="object"){if(typeof A.then=="function")return z(Pe(A),P,$,W,oe);throw P=String(A),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ve}function ne(A,P,$){if(A==null)return A;var W=[],oe=0;return z(A,W,"","",function(le){return P.call($,le,oe++)}),W}function J(A){if(A._status===-1){var P=A._result;P=P(),P.then(function($){(A._status===0||A._status===-1)&&(A._status=1,A._result=$)},function($){(A._status===0||A._status===-1)&&(A._status=2,A._result=$)}),A._status===-1&&(A._status=0,A._result=P)}if(A._status===1)return A._result.default;throw A._result}var V=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},B={map:ne,forEach:function(A,P,$){ne(A,function(){P.apply(this,arguments)},$)},count:function(A){var P=0;return ne(A,function(){P++}),P},toArray:function(A){return ne(A,function(P){return P})||[]},only:function(A){if(!de(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return be.Activity=E,be.Children=B,be.Component=U,be.Fragment=i,be.Profiler=a,be.PureComponent=M,be.StrictMode=r,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,be.__COMPILER_RUNTIME={__proto__:null,c:function(A){return X.H.useMemoCache(A)}},be.cache=function(A){return function(){return A.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(A,P,$){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var W=x({},A.props),oe=A.key;if(P!=null)for(le in P.key!==void 0&&(oe=""+P.key),P)!re.call(P,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&P.ref===void 0||(W[le]=P[le]);var le=arguments.length-2;if(le===1)W.children=$;else if(1<le){for(var ve=Array(le),Ae=0;Ae<le;Ae++)ve[Ae]=arguments[Ae+2];W.children=ve}return D(A.type,oe,W)},be.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:l,_context:A},A},be.createElement=function(A,P,$){var W,oe={},le=null;if(P!=null)for(W in P.key!==void 0&&(le=""+P.key),P)re.call(P,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(oe[W]=P[W]);var ve=arguments.length-2;if(ve===1)oe.children=$;else if(1<ve){for(var Ae=Array(ve),Te=0;Te<ve;Te++)Ae[Te]=arguments[Te+2];oe.children=Ae}if(A&&A.defaultProps)for(W in ve=A.defaultProps,ve)oe[W]===void 0&&(oe[W]=ve[W]);return D(A,le,oe)},be.createRef=function(){return{current:null}},be.forwardRef=function(A){return{$$typeof:h,render:A}},be.isValidElement=de,be.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:J}},be.memo=function(A,P){return{$$typeof:p,type:A,compare:P===void 0?null:P}},be.startTransition=function(A){var P=X.T,$={};X.T=$;try{var W=A(),oe=X.S;oe!==null&&oe($,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(j,V)}catch(le){V(le)}finally{P!==null&&$.types!==null&&(P.types=$.types),X.T=P}},be.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},be.use=function(A){return X.H.use(A)},be.useActionState=function(A,P,$){return X.H.useActionState(A,P,$)},be.useCallback=function(A,P){return X.H.useCallback(A,P)},be.useContext=function(A){return X.H.useContext(A)},be.useDebugValue=function(){},be.useDeferredValue=function(A,P){return X.H.useDeferredValue(A,P)},be.useEffect=function(A,P){return X.H.useEffect(A,P)},be.useEffectEvent=function(A){return X.H.useEffectEvent(A)},be.useId=function(){return X.H.useId()},be.useImperativeHandle=function(A,P,$){return X.H.useImperativeHandle(A,P,$)},be.useInsertionEffect=function(A,P){return X.H.useInsertionEffect(A,P)},be.useLayoutEffect=function(A,P){return X.H.useLayoutEffect(A,P)},be.useMemo=function(A,P){return X.H.useMemo(A,P)},be.useOptimistic=function(A,P){return X.H.useOptimistic(A,P)},be.useReducer=function(A,P,$){return X.H.useReducer(A,P,$)},be.useRef=function(A){return X.H.useRef(A)},be.useState=function(A){return X.H.useState(A)},be.useSyncExternalStore=function(A,P,$){return X.H.useSyncExternalStore(A,P,$)},be.useTransition=function(){return X.H.useTransition()},be.version="19.2.1",be}var Um;function pd(){return Um||(Um=1,Nc.exports=oS()),Nc.exports}var ee=pd();const Fa=Fy(ee);var Ic={exports:{}},Qr={},Mc={exports:{}},Dc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function aS(){return km||(km=1,(function(n){function e(z,ne){var J=z.length;z.push(ne);e:for(;0<J;){var V=J-1>>>1,B=z[V];if(0<a(B,ne))z[V]=ne,z[J]=B,J=V;else break e}}function i(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ne=z[0],J=z.pop();if(J!==ne){z[0]=J;e:for(var V=0,B=z.length,A=B>>>1;V<A;){var P=2*(V+1)-1,$=z[P],W=P+1,oe=z[W];if(0>a($,J))W<B&&0>a(oe,$)?(z[V]=oe,z[W]=J,V=W):(z[V]=$,z[P]=J,V=P);else if(W<B&&0>a(oe,J))z[V]=oe,z[W]=J,V=W;else break e}}return ne}function a(z,ne){var J=z.sortIndex-ne.sortIndex;return J!==0?J:z.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,E=null,S=3,b=!1,C=!1,x=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function Y(z){for(var ne=i(p);ne!==null;){if(ne.callback===null)r(p);else if(ne.startTime<=z)r(p),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=i(p)}}function L(z){if(x=!1,Y(z),!C)if(i(g)!==null)C=!0,j||(j=!0,ye());else{var ne=i(p);ne!==null&&Pe(L,ne.startTime-z)}}var j=!1,X=-1,re=5,D=-1;function te(){return N?!0:!(n.unstable_now()-D<re)}function de(){if(N=!1,j){var z=n.unstable_now();D=z;var ne=!0;try{e:{C=!1,x&&(x=!1,O(X),X=-1),b=!0;var J=S;try{t:{for(Y(z),E=i(g);E!==null&&!(E.expirationTime>z&&te());){var V=E.callback;if(typeof V=="function"){E.callback=null,S=E.priorityLevel;var B=V(E.expirationTime<=z);if(z=n.unstable_now(),typeof B=="function"){E.callback=B,Y(z),ne=!0;break t}E===i(g)&&r(g),Y(z)}else r(g);E=i(g)}if(E!==null)ne=!0;else{var A=i(p);A!==null&&Pe(L,A.startTime-z),ne=!1}}break e}finally{E=null,S=J,b=!1}ne=void 0}}finally{ne?ye():j=!1}}}var ye;if(typeof M=="function")ye=function(){M(de)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ge=pe.port2;pe.port1.onmessage=de,ye=function(){Ge.postMessage(null)}}else ye=function(){U(de,0)};function Pe(z,ne){X=U(function(){z(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(z){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var J=S;S=ne;try{return z()}finally{S=J}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(z,ne){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=S;S=z;try{return ne()}finally{S=J}},n.unstable_scheduleCallback=function(z,ne,J){var V=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?V+J:V):J=V,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=J+B,z={id:v++,callback:ne,priorityLevel:z,startTime:J,expirationTime:B,sortIndex:-1},J>V?(z.sortIndex=J,e(p,z),i(g)===null&&z===i(p)&&(x?(O(X),X=-1):x=!0,Pe(L,J-V))):(z.sortIndex=B,e(g,z),C||b||(C=!0,j||(j=!0,ye()))),z},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(z){var ne=S;return function(){var J=S;S=ne;try{return z.apply(this,arguments)}finally{S=J}}}})(Dc)),Dc}var Pm;function lS(){return Pm||(Pm=1,Mc.exports=aS()),Mc.exports}var Uc={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function uS(){if(Om)return Ct;Om=1;var n=pd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ct.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},Ct.flushSync=function(g){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=v,r.d.f()}},Ct.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Ct.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Ct.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:b}):v==="script"&&r.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ct.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Ct.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ct.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Ct.requestFormReset=function(g){r.d.r(g)},Ct.unstable_batchedUpdates=function(g,p){return g(p)},Ct.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Ct.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ct.version="19.2.1",Ct}var Lm;function cS(){if(Lm)return Uc.exports;Lm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Uc.exports=uS(),Uc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function dS(){if(qm)return Qr;qm=1;var n=lS(),e=pd(),i=cS();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(l(t)!==t)throw Error(r(188))}function p(t){var s=t.alternate;if(!s){if(s=l(t),s===null)throw Error(r(188));return s!==t?null:t}for(var o=t,u=s;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return g(m),t;if(y===u)return g(m),s;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=y;else{for(var T=!1,w=m.child;w;){if(w===o){T=!0,o=m,u=y;break}if(w===u){T=!0,u=m,o=y;break}w=w.sibling}if(!T){for(w=y.child;w;){if(w===o){T=!0,o=y,u=m;break}if(w===u){T=!0,u=y,o=m;break}w=w.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function ye(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Symbol.for("react.client.reference");function Ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case M:return t.displayName||"Context";case O:return(t._context.displayName||"Context")+".Consumer";case Y:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return s=t.displayName||null,s!==null?s:Ge(t.type)||"Memo";case re:s=t._payload,t=t._init;try{return Ge(t(s))}catch{}}return null}var Pe=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},V=[],B=-1;function A(t){return{current:t}}function P(t){0>B||(t.current=V[B],V[B]=null,B--)}function $(t,s){B++,V[B]=t.current,t.current=s}var W=A(null),oe=A(null),le=A(null),ve=A(null);function Ae(t,s){switch($(le,s),$(oe,t),$(W,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Zp(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Zp(s),t=em(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(W),$(W,t)}function Te(){P(W),P(oe),P(le)}function Oe(t){t.memoizedState!==null&&$(ve,t);var s=W.current,o=em(s,t.type);s!==o&&($(oe,t),$(W,o))}function nt(t){oe.current===t&&(P(W),P(oe)),ve.current===t&&(P(ve),jr._currentValue=J)}var ie,yt;function Rt(t){if(ie===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ie=s&&s[1]||"",yt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+t+yt}var Ue=!1;function nr(t,s){if(!t||Ue)return"";Ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(F){var G=F}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(F){G=F}t.call(Z.prototype)}}else{try{throw Error()}catch(F){G=F}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(F){if(F&&G&&typeof F.stack=="string")return[F.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],w=y[1];if(T&&w){var R=T.split(`
`),H=w.split(`
`);for(m=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(u===R.length||m===H.length)for(u=R.length-1,m=H.length-1;1<=u&&0<=m&&R[u]!==H[m];)m--;for(;1<=u&&0<=m;u--,m--)if(R[u]!==H[m]){if(u!==1||m!==1)do if(u--,m--,0>m||R[u]!==H[m]){var K=`
`+R[u].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=u&&0<=m);break}}}finally{Ue=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?Rt(o):""}function fl(t,s){switch(t.tag){case 26:case 27:case 5:return Rt(t.type);case 16:return Rt("Lazy");case 13:return t.child!==s&&s!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return nr(t.type,!1);case 11:return nr(t.type.render,!1);case 1:return nr(t.type,!0);case 31:return Rt("Activity");default:return""}}function uo(t){try{var s="",o=null;do s+=fl(t,o),o=t,t=t.return;while(t);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ir=Object.prototype.hasOwnProperty,co=n.unstable_scheduleCallback,Gt=n.unstable_cancelCallback,hl=n.unstable_shouldYield,pl=n.unstable_requestPaint,Nt=n.unstable_now,ml=n.unstable_getCurrentPriorityLevel,me=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,fo=n.unstable_NormalPriority,q_=n.unstable_LowPriority,Dd=n.unstable_IdlePriority,H_=n.log,G_=n.unstable_setDisableYieldValue,sr=null,Bt=null;function jn(t){if(typeof H_=="function"&&G_(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(sr,t)}catch{}}var Vt=Math.clz32?Math.clz32:z_,B_=Math.log,V_=Math.LN2;function z_(t){return t>>>=0,t===0?32:31-(B_(t)/V_|0)|0}var ho=256,po=262144,mo=4194304;function Si(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function go(t,s,o){var u=t.pendingLanes;if(u===0)return 0;var m=0,y=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var w=u&134217727;return w!==0?(u=w&~y,u!==0?m=Si(u):(T&=w,T!==0?m=Si(T):o||(o=w&~t,o!==0&&(m=Si(o))))):(w=u&~y,w!==0?m=Si(w):T!==0?m=Si(T):o||(o=u&~t,o!==0&&(m=Si(o)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:m}function rr(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function F_(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ud(){var t=mo;return mo<<=1,(mo&62914560)===0&&(mo=4194304),t}function gl(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function or(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $_(t,s,o,u,m,y){var T=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var w=t.entanglements,R=t.expirationTimes,H=t.hiddenUpdates;for(o=T&~o;0<o;){var K=31-Vt(o),Z=1<<K;w[K]=0,R[K]=-1;var G=H[K];if(G!==null)for(H[K]=null,K=0;K<G.length;K++){var F=G[K];F!==null&&(F.lane&=-536870913)}o&=~Z}u!==0&&kd(t,u,0),y!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=y&~(T&~s))}function kd(t,s,o){t.pendingLanes|=s,t.suspendedLanes&=~s;var u=31-Vt(s);t.entangledLanes|=s,t.entanglements[u]=t.entanglements[u]|1073741824|o&261930}function Pd(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var u=31-Vt(o),m=1<<u;m&s|t[u]&s&&(t[u]|=s),o&=~m}}function Od(t,s){var o=s&-s;return o=(o&42)!==0?1:yl(o),(o&(t.suspendedLanes|s))!==0?0:o}function yl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vl(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ld(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:bm(t.type))}function qd(t,s){var o=ne.p;try{return ne.p=t,s()}finally{ne.p=o}}var Jn=Math.random().toString(36).slice(2),vt="__reactFiber$"+Jn,Mt="__reactProps$"+Jn,Xi="__reactContainer$"+Jn,_l="__reactEvents$"+Jn,j_="__reactListeners$"+Jn,J_="__reactHandles$"+Jn,Hd="__reactResources$"+Jn,ar="__reactMarker$"+Jn;function El(t){delete t[vt],delete t[Mt],delete t[_l],delete t[j_],delete t[J_]}function Qi(t){var s=t[vt];if(s)return s;for(var o=t.parentNode;o;){if(s=o[Xi]||o[vt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=am(t);t!==null;){if(o=t[vt])return o;t=am(t)}return s}t=o,o=t.parentNode}return null}function Wi(t){if(t=t[vt]||t[Xi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function lr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Zi(t){var s=t[Hd];return s||(s=t[Hd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function mt(t){t[ar]=!0}var Gd=new Set,Bd={};function Ti(t,s){es(t,s),es(t+"Capture",s)}function es(t,s){for(Bd[t]=s,t=0;t<s.length;t++)Gd.add(s[t])}var Y_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vd={},zd={};function K_(t){return ir.call(zd,t)?!0:ir.call(Vd,t)?!1:Y_.test(t)?zd[t]=!0:(Vd[t]=!0,!1)}function yo(t,s,o){if(K_(s))if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+o)}}function vo(t,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+o)}}function Tn(t,s,o,u){if(u===null)t.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(s,o,""+u)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fd(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function X_(t,s,o){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,y.call(this,T)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Sl(t){if(!t._valueTracker){var s=Fd(t)?"checked":"value";t._valueTracker=X_(t,s,""+t[s])}}function $d(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return t&&(u=Fd(t)?t.checked?"true":"false":t.value),t=u,t!==o?(s.setValue(t),!0):!1}function _o(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Q_=/[\n"\\]/g;function Zt(t){return t.replace(Q_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Tl(t,s,o,u,m,y,T,w){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),s!=null?T==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Wt(s)):t.value!==""+Wt(s)&&(t.value=""+Wt(s)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),s!=null?bl(t,T,Wt(s)):o!=null?bl(t,T,Wt(o)):u!=null&&t.removeAttribute("value"),m==null&&y!=null&&(t.defaultChecked=!!y),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Wt(w):t.removeAttribute("name")}function jd(t,s,o,u,m,y,T,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Sl(t);return}o=o!=null?""+Wt(o):"",s=s!=null?""+Wt(s):o,w||s===t.value||(t.value=s),t.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=w?t.checked:!!u,t.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Sl(t)}function bl(t,s,o){s==="number"&&_o(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function ts(t,s,o,u){if(t=t.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<t.length;o++)m=s.hasOwnProperty("$"+t[o].value),t[o].selected!==m&&(t[o].selected=m),m&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Wt(o),s=null,m=0;m<t.length;m++){if(t[m].value===o){t[m].selected=!0,u&&(t[m].defaultSelected=!0);return}s!==null||t[m].disabled||(s=t[m])}s!==null&&(s.selected=!0)}}function Jd(t,s,o){if(s!=null&&(s=""+Wt(s),s!==t.value&&(t.value=s),o==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=o!=null?""+Wt(o):""}function Yd(t,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Pe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Wt(s),t.defaultValue=o,u=t.textContent,u===o&&u!==""&&u!==null&&(t.value=u),Sl(t)}function ns(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var W_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kd(t,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":u?t.setProperty(s,o):typeof o!="number"||o===0||W_.has(s)?s==="float"?t.cssFloat=o:t[s]=(""+o).trim():t[s]=o+"px"}function Xd(t,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Kd(t,m,u)}else for(var y in s)s.hasOwnProperty(y)&&Kd(t,y,s[y])}function wl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(t){return e0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function bn(){}var Cl=null;function Al(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var is=null,ss=null;function Qd(t){var s=Wi(t);if(s&&(t=s.stateNode)){var o=t[Mt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Tl(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==t&&u.form===t.form){var m=u[Mt]||null;if(!m)throw Error(r(90));Tl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===t.form&&$d(u)}break e;case"textarea":Jd(t,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ts(t,!!o.multiple,s,!1)}}}var xl=!1;function Wd(t,s,o){if(xl)return t(s,o);xl=!0;try{var u=t(s);return u}finally{if(xl=!1,(is!==null||ss!==null)&&(aa(),is&&(s=is,t=ss,ss=is=null,Qd(s),t)))for(s=0;s<t.length;s++)Qd(t[s])}}function ur(t,s){var o=t.stateNode;if(o===null)return null;var u=o[Mt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=!1;if(wn)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Rl=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Rl=!1}var Yn=null,Nl=null,So=null;function Zd(){if(So)return So;var t,s=Nl,o=s.length,u,m="value"in Yn?Yn.value:Yn.textContent,y=m.length;for(t=0;t<o&&s[t]===m[t];t++);var T=o-t;for(u=1;u<=T&&s[o-u]===m[y-u];u++);return So=m.slice(t,1<u?1-u:void 0)}function To(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function ef(){return!1}function Dt(t){function s(o,u,m,y,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?bo:ef,this.isPropagationStopped=ef,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),s}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=Dt(bi),dr=E({},bi,{view:0,detail:0}),t0=Dt(dr),Il,Ml,fr,Co=E({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fr&&(fr&&t.type==="mousemove"?(Il=t.screenX-fr.screenX,Ml=t.screenY-fr.screenY):Ml=Il=0,fr=t),Il)},movementY:function(t){return"movementY"in t?t.movementY:Ml}}),tf=Dt(Co),n0=E({},Co,{dataTransfer:0}),i0=Dt(n0),s0=E({},dr,{relatedTarget:0}),Dl=Dt(s0),r0=E({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),o0=Dt(r0),a0=E({},bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l0=Dt(a0),u0=E({},bi,{data:0}),nf=Dt(u0),c0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h0(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=f0[t])?!!s[t]:!1}function Ul(){return h0}var p0=E({},dr,{key:function(t){if(t.key){var s=c0[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=To(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(t){return t.type==="keypress"?To(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?To(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m0=Dt(p0),g0=E({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=Dt(g0),y0=E({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),v0=Dt(y0),_0=E({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),E0=Dt(_0),S0=E({},Co,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T0=Dt(S0),b0=E({},bi,{newState:0,oldState:0}),w0=Dt(b0),C0=[9,13,27,32],kl=wn&&"CompositionEvent"in window,hr=null;wn&&"documentMode"in document&&(hr=document.documentMode);var A0=wn&&"TextEvent"in window&&!hr,rf=wn&&(!kl||hr&&8<hr&&11>=hr),of=" ",af=!1;function lf(t,s){switch(t){case"keyup":return C0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rs=!1;function x0(t,s){switch(t){case"compositionend":return uf(s);case"keypress":return s.which!==32?null:(af=!0,of);case"textInput":return t=s.data,t===of&&af?null:t;default:return null}}function R0(t,s){if(rs)return t==="compositionend"||!kl&&lf(t,s)?(t=Zd(),So=Nl=Yn=null,rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rf&&s.locale!=="ko"?null:s.data;default:return null}}var N0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!N0[t.type]:s==="textarea"}function df(t,s,o,u){is?ss?ss.push(u):ss=[u]:is=u,s=pa(s,"onChange"),0<s.length&&(o=new wo("onChange","change",null,o,u),t.push({event:o,listeners:s}))}var pr=null,mr=null;function I0(t){Jp(t,0)}function Ao(t){var s=lr(t);if($d(s))return t}function ff(t,s){if(t==="change")return s}var hf=!1;if(wn){var Pl;if(wn){var Ol="oninput"in document;if(!Ol){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),Ol=typeof pf.oninput=="function"}Pl=Ol}else Pl=!1;hf=Pl&&(!document.documentMode||9<document.documentMode)}function mf(){pr&&(pr.detachEvent("onpropertychange",gf),mr=pr=null)}function gf(t){if(t.propertyName==="value"&&Ao(mr)){var s=[];df(s,mr,t,Al(t)),Wd(I0,s)}}function M0(t,s,o){t==="focusin"?(mf(),pr=s,mr=o,pr.attachEvent("onpropertychange",gf)):t==="focusout"&&mf()}function D0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ao(mr)}function U0(t,s){if(t==="click")return Ao(s)}function k0(t,s){if(t==="input"||t==="change")return Ao(s)}function P0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var zt=typeof Object.is=="function"?Object.is:P0;function gr(t,s){if(zt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!ir.call(s,m)||!zt(t[m],s[m]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vf(t,s){var o=yf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=s&&u>=s)return{node:o,offset:s-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=yf(o)}}function _f(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?_f(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Ef(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=_o(t.document);s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=_o(t.document)}return s}function Ll(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var O0=wn&&"documentMode"in document&&11>=document.documentMode,os=null,ql=null,yr=null,Hl=!1;function Sf(t,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Hl||os==null||os!==_o(u)||(u=os,"selectionStart"in u&&Ll(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yr&&gr(yr,u)||(yr=u,u=pa(ql,"onSelect"),0<u.length&&(s=new wo("onSelect","select",null,s,o),t.push({event:s,listeners:u}),s.target=os)))}function wi(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var as={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionrun:wi("Transition","TransitionRun"),transitionstart:wi("Transition","TransitionStart"),transitioncancel:wi("Transition","TransitionCancel"),transitionend:wi("Transition","TransitionEnd")},Gl={},Tf={};wn&&(Tf=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Ci(t){if(Gl[t])return Gl[t];if(!as[t])return t;var s=as[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in Tf)return Gl[t]=s[o];return t}var bf=Ci("animationend"),wf=Ci("animationiteration"),Cf=Ci("animationstart"),L0=Ci("transitionrun"),q0=Ci("transitionstart"),H0=Ci("transitioncancel"),Af=Ci("transitionend"),xf=new Map,Bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bl.push("scrollEnd");function cn(t,s){xf.set(t,s),Ti(s,[t])}var xo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},en=[],ls=0,Vl=0;function Ro(){for(var t=ls,s=Vl=ls=0;s<t;){var o=en[s];en[s++]=null;var u=en[s];en[s++]=null;var m=en[s];en[s++]=null;var y=en[s];if(en[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&Rf(o,m,y)}}function No(t,s,o,u){en[ls++]=t,en[ls++]=s,en[ls++]=o,en[ls++]=u,Vl|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function zl(t,s,o,u){return No(t,s,o,u),Io(t)}function Ai(t,s){return No(t,null,null,s),Io(t)}function Rf(t,s,o){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=t.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(m=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,m&&s!==null&&(m=31-Vt(o),t=y.hiddenUpdates,u=t[m],u===null?t[m]=[s]:u.push(s),s.lane=o|536870912),y):null}function Io(t){if(50<Hr)throw Hr=0,Wu=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var us={};function G0(t,s,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,s,o,u){return new G0(t,s,o,u)}function Fl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cn(t,s){var o=t.alternate;return o===null?(o=Ft(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Nf(t,s){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,s=o.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Mo(t,s,o,u,m,y){var T=0;if(u=t,typeof t=="function")Fl(t)&&(T=1);else if(typeof t=="string")T=$E(t,o,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=Ft(31,o,s,m),t.elementType=D,t.lanes=y,t;case x:return xi(o.children,m,y,s);case N:T=8,m|=24;break;case U:return t=Ft(12,o,s,m|2),t.elementType=U,t.lanes=y,t;case L:return t=Ft(13,o,s,m),t.elementType=L,t.lanes=y,t;case j:return t=Ft(19,o,s,m),t.elementType=j,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:T=10;break e;case O:T=9;break e;case Y:T=11;break e;case X:T=14;break e;case re:T=16,u=null;break e}T=29,o=Error(r(130,t===null?"null":typeof t,"")),u=null}return s=Ft(T,o,s,m),s.elementType=t,s.type=u,s.lanes=y,s}function xi(t,s,o,u){return t=Ft(7,t,u,s),t.lanes=o,t}function $l(t,s,o){return t=Ft(6,t,null,s),t.lanes=o,t}function If(t){var s=Ft(18,null,null,0);return s.stateNode=t,s}function jl(t,s,o){return s=Ft(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Mf=new WeakMap;function tn(t,s){if(typeof t=="object"&&t!==null){var o=Mf.get(t);return o!==void 0?o:(s={value:t,source:s,stack:uo(s)},Mf.set(t,s),s)}return{value:t,source:s,stack:uo(s)}}var cs=[],ds=0,Do=null,vr=0,nn=[],sn=0,Kn=null,yn=1,vn="";function An(t,s){cs[ds++]=vr,cs[ds++]=Do,Do=t,vr=s}function Df(t,s,o){nn[sn++]=yn,nn[sn++]=vn,nn[sn++]=Kn,Kn=t;var u=yn;t=vn;var m=32-Vt(u)-1;u&=~(1<<m),o+=1;var y=32-Vt(s)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,yn=1<<32-Vt(s)+m|o<<m|u,vn=y+t}else yn=1<<y|o<<m|u,vn=t}function Jl(t){t.return!==null&&(An(t,1),Df(t,1,0))}function Yl(t){for(;t===Do;)Do=cs[--ds],cs[ds]=null,vr=cs[--ds],cs[ds]=null;for(;t===Kn;)Kn=nn[--sn],nn[sn]=null,vn=nn[--sn],nn[sn]=null,yn=nn[--sn],nn[sn]=null}function Uf(t,s){nn[sn++]=yn,nn[sn++]=vn,nn[sn++]=Kn,yn=s.id,vn=s.overflow,Kn=t}var _t=null,Xe=null,ke=!1,Xn=null,rn=!1,Kl=Error(r(519));function Qn(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(tn(s,t)),Kl}function kf(t){var s=t.stateNode,o=t.type,u=t.memoizedProps;switch(s[vt]=t,s[Mt]=u,o){case"dialog":Ie("cancel",s),Ie("close",s);break;case"iframe":case"object":case"embed":Ie("load",s);break;case"video":case"audio":for(o=0;o<Br.length;o++)Ie(Br[o],s);break;case"source":Ie("error",s);break;case"img":case"image":case"link":Ie("error",s),Ie("load",s);break;case"details":Ie("toggle",s);break;case"input":Ie("invalid",s),jd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ie("invalid",s);break;case"textarea":Ie("invalid",s),Yd(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Qp(s.textContent,o)?(u.popover!=null&&(Ie("beforetoggle",s),Ie("toggle",s)),u.onScroll!=null&&Ie("scroll",s),u.onScrollEnd!=null&&Ie("scrollend",s),u.onClick!=null&&(s.onclick=bn),s=!0):s=!1,s||Qn(t,!0)}function Pf(t){for(_t=t.return;_t;)switch(_t.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:_t=_t.return}}function fs(t){if(t!==_t)return!1;if(!ke)return Pf(t),ke=!0,!1;var s=t.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||hc(t.type,t.memoizedProps)),o=!o),o&&Xe&&Qn(t),Pf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Xe=om(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Xe=om(t)}else s===27?(s=Xe,di(t.type)?(t=vc,vc=null,Xe=t):Xe=s):Xe=_t?an(t.stateNode.nextSibling):null;return!0}function Ri(){Xe=_t=null,ke=!1}function Xl(){var t=Xn;return t!==null&&(Ot===null?Ot=t:Ot.push.apply(Ot,t),Xn=null),t}function _r(t){Xn===null?Xn=[t]:Xn.push(t)}var Ql=A(null),Ni=null,xn=null;function Wn(t,s,o){$(Ql,s._currentValue),s._currentValue=o}function Rn(t){t._currentValue=Ql.current,P(Ql)}function Wl(t,s,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===o)break;t=t.return}}function Zl(t,s,o,u){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=m;for(var R=0;R<s.length;R++)if(w.context===s[R]){y.lanes|=o,w=y.alternate,w!==null&&(w.lanes|=o),Wl(y.return,o,t),u||(T=null);break e}y=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=o,y=T.alternate,y!==null&&(y.lanes|=o),Wl(T,o,t),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===t){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function hs(t,s,o,u){t=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var w=m.type;zt(m.pendingProps.value,T.value)||(t!==null?t.push(w):t=[w])}}else if(m===ve.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(jr):t=[jr])}m=m.return}t!==null&&Zl(s,t,o,u),s.flags|=262144}function Uo(t){for(t=t.firstContext;t!==null;){if(!zt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ii(t){Ni=t,xn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Et(t){return Of(Ni,t)}function ko(t,s){return Ni===null&&Ii(t),Of(t,s)}function Of(t,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},xn===null){if(t===null)throw Error(r(308));xn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else xn=xn.next=s;return o}var B0=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(o,u){t.push(u)}};this.abort=function(){s.aborted=!0,t.forEach(function(o){return o()})}},V0=n.unstable_scheduleCallback,z0=n.unstable_NormalPriority,lt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eu(){return{controller:new B0,data:new Map,refCount:0}}function Er(t){t.refCount--,t.refCount===0&&V0(z0,function(){t.controller.abort()})}var Sr=null,tu=0,ps=0,ms=null;function F0(t,s){if(Sr===null){var o=Sr=[];tu=0,ps=sc(),ms={status:"pending",value:void 0,then:function(u){o.push(u)}}}return tu++,s.then(Lf,Lf),s}function Lf(){if(--tu===0&&Sr!==null){ms!==null&&(ms.status="fulfilled");var t=Sr;Sr=null,ps=0,ms=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function $0(t,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return t.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var qf=z.S;z.S=function(t,s){Sp=Nt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&F0(t,s),qf!==null&&qf(t,s)};var Mi=A(null);function nu(){var t=Mi.current;return t!==null?t:Ye.pooledCache}function Po(t,s){s===null?$(Mi,Mi.current):$(Mi,s.pool)}function Hf(){var t=nu();return t===null?null:{parent:lt._currentValue,pool:t}}var gs=Error(r(460)),iu=Error(r(474)),Oo=Error(r(542)),Lo={then:function(){}};function Gf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Bf(t,s,o){switch(o=t[o],o===void 0?t.push(s):o!==s&&(s.then(bn,bn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zf(t),t;default:if(typeof s.status=="string")s.then(bn,bn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zf(t),t}throw Ui=s,gs}}function Di(t){try{var s=t._init;return s(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ui=o,gs):o}}var Ui=null;function Vf(){if(Ui===null)throw Error(r(459));var t=Ui;return Ui=null,t}function zf(t){if(t===gs||t===Oo)throw Error(r(483))}var ys=null,Tr=0;function qo(t){var s=Tr;return Tr+=1,ys===null&&(ys=[]),Bf(ys,t,s)}function br(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Ho(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ff(t){function s(k,I){if(t){var q=k.deletions;q===null?(k.deletions=[I],k.flags|=16):q.push(I)}}function o(k,I){if(!t)return null;for(;I!==null;)s(k,I),I=I.sibling;return null}function u(k){for(var I=new Map;k!==null;)k.key!==null?I.set(k.key,k):I.set(k.index,k),k=k.sibling;return I}function m(k,I){return k=Cn(k,I),k.index=0,k.sibling=null,k}function y(k,I,q){return k.index=q,t?(q=k.alternate,q!==null?(q=q.index,q<I?(k.flags|=67108866,I):q):(k.flags|=67108866,I)):(k.flags|=1048576,I)}function T(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function w(k,I,q,Q){return I===null||I.tag!==6?(I=$l(q,k.mode,Q),I.return=k,I):(I=m(I,q),I.return=k,I)}function R(k,I,q,Q){var ge=q.type;return ge===x?K(k,I,q.props.children,Q,q.key):I!==null&&(I.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===re&&Di(ge)===I.type)?(I=m(I,q.props),br(I,q),I.return=k,I):(I=Mo(q.type,q.key,q.props,null,k.mode,Q),br(I,q),I.return=k,I)}function H(k,I,q,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==q.containerInfo||I.stateNode.implementation!==q.implementation?(I=jl(q,k.mode,Q),I.return=k,I):(I=m(I,q.children||[]),I.return=k,I)}function K(k,I,q,Q,ge){return I===null||I.tag!==7?(I=xi(q,k.mode,Q,ge),I.return=k,I):(I=m(I,q),I.return=k,I)}function Z(k,I,q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=$l(""+I,k.mode,q),I.return=k,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return q=Mo(I.type,I.key,I.props,null,k.mode,q),br(q,I),q.return=k,q;case C:return I=jl(I,k.mode,q),I.return=k,I;case re:return I=Di(I),Z(k,I,q)}if(Pe(I)||ye(I))return I=xi(I,k.mode,q,null),I.return=k,I;if(typeof I.then=="function")return Z(k,qo(I),q);if(I.$$typeof===M)return Z(k,ko(k,I),q);Ho(k,I)}return null}function G(k,I,q,Q){var ge=I!==null?I.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:w(k,I,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===ge?R(k,I,q,Q):null;case C:return q.key===ge?H(k,I,q,Q):null;case re:return q=Di(q),G(k,I,q,Q)}if(Pe(q)||ye(q))return ge!==null?null:K(k,I,q,Q,null);if(typeof q.then=="function")return G(k,I,qo(q),Q);if(q.$$typeof===M)return G(k,I,ko(k,q),Q);Ho(k,q)}return null}function F(k,I,q,Q,ge){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(q)||null,w(I,k,""+Q,ge);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return k=k.get(Q.key===null?q:Q.key)||null,R(I,k,Q,ge);case C:return k=k.get(Q.key===null?q:Q.key)||null,H(I,k,Q,ge);case re:return Q=Di(Q),F(k,I,q,Q,ge)}if(Pe(Q)||ye(Q))return k=k.get(q)||null,K(I,k,Q,ge,null);if(typeof Q.then=="function")return F(k,I,q,qo(Q),ge);if(Q.$$typeof===M)return F(k,I,q,ko(I,Q),ge);Ho(I,Q)}return null}function ue(k,I,q,Q){for(var ge=null,Le=null,fe=I,Ce=I=0,De=null;fe!==null&&Ce<q.length;Ce++){fe.index>Ce?(De=fe,fe=null):De=fe.sibling;var qe=G(k,fe,q[Ce],Q);if(qe===null){fe===null&&(fe=De);break}t&&fe&&qe.alternate===null&&s(k,fe),I=y(qe,I,Ce),Le===null?ge=qe:Le.sibling=qe,Le=qe,fe=De}if(Ce===q.length)return o(k,fe),ke&&An(k,Ce),ge;if(fe===null){for(;Ce<q.length;Ce++)fe=Z(k,q[Ce],Q),fe!==null&&(I=y(fe,I,Ce),Le===null?ge=fe:Le.sibling=fe,Le=fe);return ke&&An(k,Ce),ge}for(fe=u(fe);Ce<q.length;Ce++)De=F(fe,k,Ce,q[Ce],Q),De!==null&&(t&&De.alternate!==null&&fe.delete(De.key===null?Ce:De.key),I=y(De,I,Ce),Le===null?ge=De:Le.sibling=De,Le=De);return t&&fe.forEach(function(gi){return s(k,gi)}),ke&&An(k,Ce),ge}function _e(k,I,q,Q){if(q==null)throw Error(r(151));for(var ge=null,Le=null,fe=I,Ce=I=0,De=null,qe=q.next();fe!==null&&!qe.done;Ce++,qe=q.next()){fe.index>Ce?(De=fe,fe=null):De=fe.sibling;var gi=G(k,fe,qe.value,Q);if(gi===null){fe===null&&(fe=De);break}t&&fe&&gi.alternate===null&&s(k,fe),I=y(gi,I,Ce),Le===null?ge=gi:Le.sibling=gi,Le=gi,fe=De}if(qe.done)return o(k,fe),ke&&An(k,Ce),ge;if(fe===null){for(;!qe.done;Ce++,qe=q.next())qe=Z(k,qe.value,Q),qe!==null&&(I=y(qe,I,Ce),Le===null?ge=qe:Le.sibling=qe,Le=qe);return ke&&An(k,Ce),ge}for(fe=u(fe);!qe.done;Ce++,qe=q.next())qe=F(fe,k,Ce,qe.value,Q),qe!==null&&(t&&qe.alternate!==null&&fe.delete(qe.key===null?Ce:qe.key),I=y(qe,I,Ce),Le===null?ge=qe:Le.sibling=qe,Le=qe);return t&&fe.forEach(function(nS){return s(k,nS)}),ke&&An(k,Ce),ge}function je(k,I,q,Q){if(typeof q=="object"&&q!==null&&q.type===x&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:e:{for(var ge=q.key;I!==null;){if(I.key===ge){if(ge=q.type,ge===x){if(I.tag===7){o(k,I.sibling),Q=m(I,q.props.children),Q.return=k,k=Q;break e}}else if(I.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===re&&Di(ge)===I.type){o(k,I.sibling),Q=m(I,q.props),br(Q,q),Q.return=k,k=Q;break e}o(k,I);break}else s(k,I);I=I.sibling}q.type===x?(Q=xi(q.props.children,k.mode,Q,q.key),Q.return=k,k=Q):(Q=Mo(q.type,q.key,q.props,null,k.mode,Q),br(Q,q),Q.return=k,k=Q)}return T(k);case C:e:{for(ge=q.key;I!==null;){if(I.key===ge)if(I.tag===4&&I.stateNode.containerInfo===q.containerInfo&&I.stateNode.implementation===q.implementation){o(k,I.sibling),Q=m(I,q.children||[]),Q.return=k,k=Q;break e}else{o(k,I);break}else s(k,I);I=I.sibling}Q=jl(q,k.mode,Q),Q.return=k,k=Q}return T(k);case re:return q=Di(q),je(k,I,q,Q)}if(Pe(q))return ue(k,I,q,Q);if(ye(q)){if(ge=ye(q),typeof ge!="function")throw Error(r(150));return q=ge.call(q),_e(k,I,q,Q)}if(typeof q.then=="function")return je(k,I,qo(q),Q);if(q.$$typeof===M)return je(k,I,ko(k,q),Q);Ho(k,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,I!==null&&I.tag===6?(o(k,I.sibling),Q=m(I,q),Q.return=k,k=Q):(o(k,I),Q=$l(q,k.mode,Q),Q.return=k,k=Q),T(k)):o(k,I)}return function(k,I,q,Q){try{Tr=0;var ge=je(k,I,q,Q);return ys=null,ge}catch(fe){if(fe===gs||fe===Oo)throw fe;var Le=Ft(29,fe,null,k.mode);return Le.lanes=Q,Le.return=k,Le}finally{}}}var ki=Ff(!0),$f=Ff(!1),Zn=!1;function su(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ru(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ei(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ti(t,s,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Be&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Io(t),Rf(t,null,o),s}return No(t,u,s,o),Io(t)}function wr(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,Pd(t,o)}}function ou(t,s){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,o=o.next}while(o!==null);y===null?m=y=s:y=y.next=s}else m=y=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}var au=!1;function Cr(){if(au){var t=ms;if(t!==null)throw t}}function Ar(t,s,o,u){au=!1;var m=t.updateQueue;Zn=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var R=w,H=R.next;R.next=null,T===null?y=H:T.next=H,T=R;var K=t.alternate;K!==null&&(K=K.updateQueue,w=K.lastBaseUpdate,w!==T&&(w===null?K.firstBaseUpdate=H:w.next=H,K.lastBaseUpdate=R))}if(y!==null){var Z=m.baseState;T=0,K=H=R=null,w=y;do{var G=w.lane&-536870913,F=G!==w.lane;if(F?(Me&G)===G:(u&G)===G){G!==0&&G===ps&&(au=!0),K!==null&&(K=K.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ue=t,_e=w;G=s;var je=o;switch(_e.tag){case 1:if(ue=_e.payload,typeof ue=="function"){Z=ue.call(je,Z,G);break e}Z=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=_e.payload,G=typeof ue=="function"?ue.call(je,Z,G):ue,G==null)break e;Z=E({},Z,G);break e;case 2:Zn=!0}}G=w.callback,G!==null&&(t.flags|=64,F&&(t.flags|=8192),F=m.callbacks,F===null?m.callbacks=[G]:F.push(G))}else F={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},K===null?(H=K=F,R=Z):K=K.next=F,T|=G;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;F=w,w=F.next,F.next=null,m.lastBaseUpdate=F,m.shared.pending=null}}while(!0);K===null&&(R=Z),m.baseState=R,m.firstBaseUpdate=H,m.lastBaseUpdate=K,y===null&&(m.shared.lanes=0),oi|=T,t.lanes=T,t.memoizedState=Z}}function jf(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Jf(t,s){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)jf(o[t],s)}var vs=A(null),Go=A(0);function Yf(t,s){t=Ln,$(Go,t),$(vs,s),Ln=t|s.baseLanes}function lu(){$(Go,Ln),$(vs,vs.current)}function uu(){Ln=Go.current,P(vs),P(Go)}var $t=A(null),on=null;function ni(t){var s=t.alternate;$(ot,ot.current&1),$($t,t),on===null&&(s===null||vs.current!==null||s.memoizedState!==null)&&(on=t)}function cu(t){$(ot,ot.current),$($t,t),on===null&&(on=t)}function Kf(t){t.tag===22?($(ot,ot.current),$($t,t),on===null&&(on=t)):ii()}function ii(){$(ot,ot.current),$($t,$t.current)}function jt(t){P($t),on===t&&(on=null),P(ot)}var ot=A(0);function Bo(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||gc(o)||yc(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nn=0,we=null,Fe=null,ut=null,Vo=!1,_s=!1,Pi=!1,zo=0,xr=0,Es=null,j0=0;function it(){throw Error(r(321))}function du(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!zt(t[o],s[o]))return!1;return!0}function fu(t,s,o,u,m,y){return Nn=y,we=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=t===null||t.memoizedState===null?Dh:xu,Pi=!1,y=o(u,m),Pi=!1,_s&&(y=Qf(s,o,u,m)),Xf(t),y}function Xf(t){z.H=Ir;var s=Fe!==null&&Fe.next!==null;if(Nn=0,ut=Fe=we=null,Vo=!1,xr=0,Es=null,s)throw Error(r(300));t===null||ct||(t=t.dependencies,t!==null&&Uo(t)&&(ct=!0))}function Qf(t,s,o,u){we=t;var m=0;do{if(_s&&(Es=null),xr=0,_s=!1,25<=m)throw Error(r(301));if(m+=1,ut=Fe=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=Uh,y=s(o,u)}while(_s);return y}function J0(){var t=z.H,s=t.useState()[0];return s=typeof s.then=="function"?Rr(s):s,t=t.useState()[0],(Fe!==null?Fe.memoizedState:null)!==t&&(we.flags|=1024),s}function hu(){var t=zo!==0;return zo=0,t}function pu(t,s,o){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o}function mu(t){if(Vo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Vo=!1}Nn=0,ut=Fe=we=null,_s=!1,xr=zo=0,Es=null}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?we.memoizedState=ut=t:ut=ut.next=t,ut}function at(){if(Fe===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var s=ut===null?we.memoizedState:ut.next;if(s!==null)ut=s,Fe=t;else{if(t===null)throw we.alternate===null?Error(r(467)):Error(r(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ut===null?we.memoizedState=ut=t:ut=ut.next=t}return ut}function Fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rr(t){var s=xr;return xr+=1,Es===null&&(Es=[]),t=Bf(Es,t,s),s=we,(ut===null?s.memoizedState:ut.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?Dh:xu),t}function $o(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rr(t);if(t.$$typeof===M)return Et(t)}throw Error(r(438,String(t)))}function gu(t){var s=null,o=we.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Fo(),we.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(t),u=0;u<t;u++)o[u]=te;return s.index++,o}function In(t,s){return typeof s=="function"?s(t):s}function jo(t){var s=at();return yu(s,Fe,t)}function yu(t,s,o){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=t.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}s.baseQueue=m=y,u.pending=null}if(y=t.baseState,m===null)t.memoizedState=y;else{s=m.next;var w=T=null,R=null,H=s,K=!1;do{var Z=H.lane&-536870913;if(Z!==H.lane?(Me&Z)===Z:(Nn&Z)===Z){var G=H.revertLane;if(G===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Z===ps&&(K=!0);else if((Nn&G)===G){H=H.next,G===ps&&(K=!0);continue}else Z={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},R===null?(w=R=Z,T=y):R=R.next=Z,we.lanes|=G,oi|=G;Z=H.action,Pi&&o(y,Z),y=H.hasEagerState?H.eagerState:o(y,Z)}else G={lane:Z,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},R===null?(w=R=G,T=y):R=R.next=G,we.lanes|=Z,oi|=Z;H=H.next}while(H!==null&&H!==s);if(R===null?T=y:R.next=w,!zt(y,t.memoizedState)&&(ct=!0,K&&(o=ms,o!==null)))throw o;t.memoizedState=y,t.baseState=T,t.baseQueue=R,u.lastRenderedState=y}return m===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function vu(t){var s=at(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,m=o.pending,y=s.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do y=t(y,T.action),T=T.next;while(T!==m);zt(y,s.memoizedState)||(ct=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,u]}function Wf(t,s,o){var u=we,m=at(),y=ke;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!zt((Fe||m).memoizedState,o);if(T&&(m.memoizedState=o,ct=!0),m=m.queue,Su(th.bind(null,u,m,t),[t]),m.getSnapshot!==s||T||ut!==null&&ut.memoizedState.tag&1){if(u.flags|=2048,Ss(9,{destroy:void 0},eh.bind(null,u,m,o,s),null),Ye===null)throw Error(r(349));y||(Nn&127)!==0||Zf(u,s,o)}return o}function Zf(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=we.updateQueue,s===null?(s=Fo(),we.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function eh(t,s,o,u){s.value=o,s.getSnapshot=u,nh(s)&&ih(t)}function th(t,s,o){return o(function(){nh(s)&&ih(t)})}function nh(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!zt(t,o)}catch{return!0}}function ih(t){var s=Ai(t,2);s!==null&&Lt(s,t,2)}function _u(t){var s=It();if(typeof t=="function"){var o=t;if(t=o(),Pi){jn(!0);try{o()}finally{jn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:t},s}function sh(t,s,o,u){return t.baseState=o,yu(t,Fe,typeof u=="function"?u:In)}function Y0(t,s,o,u,m){if(Ko(t))throw Error(r(485));if(t=s.action,t!==null){var y={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};z.T!==null?o(!0):y.isTransition=!1,u(y),o=s.pending,o===null?(y.next=s.pending=y,rh(s,y)):(y.next=o.next,s.pending=o.next=y)}}function rh(t,s){var o=s.action,u=s.payload,m=t.state;if(s.isTransition){var y=z.T,T={};z.T=T;try{var w=o(m,u),R=z.S;R!==null&&R(T,w),oh(t,s,w)}catch(H){Eu(t,s,H)}finally{y!==null&&T.types!==null&&(y.types=T.types),z.T=y}}else try{y=o(m,u),oh(t,s,y)}catch(H){Eu(t,s,H)}}function oh(t,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){ah(t,s,u)},function(u){return Eu(t,s,u)}):ah(t,s,o)}function ah(t,s,o){s.status="fulfilled",s.value=o,lh(s),t.state=o,s=t.pending,s!==null&&(o=s.next,o===s?t.pending=null:(o=o.next,s.next=o,rh(t,o)))}function Eu(t,s,o){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,lh(s),s=s.next;while(s!==u)}t.action=null}function lh(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function uh(t,s){return s}function ch(t,s){if(ke){var o=Ye.formState;if(o!==null){e:{var u=we;if(ke){if(Xe){t:{for(var m=Xe,y=rn;m.nodeType!==8;){if(!y){m=null;break t}if(m=an(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Xe=an(m.nextSibling),u=m.data==="F!";break e}}Qn(u)}u=!1}u&&(s=o[0])}}return o=It(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:s},o.queue=u,o=Nh.bind(null,we,u),u.dispatch=o,u=_u(!1),y=Au.bind(null,we,!1,u.queue),u=It(),m={state:s,dispatch:null,action:t,pending:null},u.queue=m,o=Y0.bind(null,we,m,y,o),m.dispatch=o,u.memoizedState=t,[s,o,!1]}function dh(t){var s=at();return fh(s,Fe,t)}function fh(t,s,o){if(s=yu(t,s,uh)[0],t=jo(In)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Rr(s)}catch(T){throw T===gs?Oo:T}else u=s;s=at();var m=s.queue,y=m.dispatch;return o!==s.memoizedState&&(we.flags|=2048,Ss(9,{destroy:void 0},K0.bind(null,m,o),null)),[u,y,t]}function K0(t,s){t.action=s}function hh(t){var s=at(),o=Fe;if(o!==null)return fh(s,o,t);at(),s=s.memoizedState,o=at();var u=o.queue.dispatch;return o.memoizedState=t,[s,u,!1]}function Ss(t,s,o,u){return t={tag:t,create:o,deps:u,inst:s,next:null},s=we.updateQueue,s===null&&(s=Fo(),we.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,s.lastEffect=t),t}function ph(){return at().memoizedState}function Jo(t,s,o,u){var m=It();we.flags|=t,m.memoizedState=Ss(1|s,{destroy:void 0},o,u===void 0?null:u)}function Yo(t,s,o,u){var m=at();u=u===void 0?null:u;var y=m.memoizedState.inst;Fe!==null&&u!==null&&du(u,Fe.memoizedState.deps)?m.memoizedState=Ss(s,y,o,u):(we.flags|=t,m.memoizedState=Ss(1|s,y,o,u))}function mh(t,s){Jo(8390656,8,t,s)}function Su(t,s){Yo(2048,8,t,s)}function X0(t){we.flags|=4;var s=we.updateQueue;if(s===null)s=Fo(),we.updateQueue=s,s.events=[t];else{var o=s.events;o===null?s.events=[t]:o.push(t)}}function gh(t){var s=at().memoizedState;return X0({ref:s,nextImpl:t}),function(){if((Be&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function yh(t,s){return Yo(4,2,t,s)}function vh(t,s){return Yo(4,4,t,s)}function _h(t,s){if(typeof s=="function"){t=t();var o=s(t);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Eh(t,s,o){o=o!=null?o.concat([t]):null,Yo(4,4,_h.bind(null,s,t),o)}function Tu(){}function Sh(t,s){var o=at();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&du(s,u[1])?u[0]:(o.memoizedState=[t,s],t)}function Th(t,s){var o=at();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&du(s,u[1]))return u[0];if(u=t(),Pi){jn(!0);try{t()}finally{jn(!1)}}return o.memoizedState=[u,s],u}function bu(t,s,o){return o===void 0||(Nn&1073741824)!==0&&(Me&261930)===0?t.memoizedState=s:(t.memoizedState=o,t=bp(),we.lanes|=t,oi|=t,o)}function bh(t,s,o,u){return zt(o,s)?o:vs.current!==null?(t=bu(t,o,u),zt(t,s)||(ct=!0),t):(Nn&42)===0||(Nn&1073741824)!==0&&(Me&261930)===0?(ct=!0,t.memoizedState=o):(t=bp(),we.lanes|=t,oi|=t,s)}function wh(t,s,o,u,m){var y=ne.p;ne.p=y!==0&&8>y?y:8;var T=z.T,w={};z.T=w,Au(t,!1,s,o);try{var R=m(),H=z.S;if(H!==null&&H(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=$0(R,u);Nr(t,s,K,Kt(t))}else Nr(t,s,u,Kt(t))}catch(Z){Nr(t,s,{then:function(){},status:"rejected",reason:Z},Kt())}finally{ne.p=y,T!==null&&w.types!==null&&(T.types=w.types),z.T=T}}function Q0(){}function wu(t,s,o,u){if(t.tag!==5)throw Error(r(476));var m=Ch(t).queue;wh(t,m,s,J,o===null?Q0:function(){return Ah(t),o(u)})}function Ch(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:o},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Ah(t){var s=Ch(t);s.next===null&&(s=t.alternate.memoizedState),Nr(t,s.next.queue,{},Kt())}function Cu(){return Et(jr)}function xh(){return at().memoizedState}function Rh(){return at().memoizedState}function W0(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var o=Kt();t=ei(o);var u=ti(s,t,o);u!==null&&(Lt(u,s,o),wr(u,s,o)),s={cache:eu()},t.payload=s;return}s=s.return}}function Z0(t,s,o){var u=Kt();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ko(t)?Ih(s,o):(o=zl(t,s,o,u),o!==null&&(Lt(o,t,u),Mh(o,s,u)))}function Nh(t,s,o){var u=Kt();Nr(t,s,o,u)}function Nr(t,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ko(t))Ih(s,m);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,w=y(T,o);if(m.hasEagerState=!0,m.eagerState=w,zt(w,T))return No(t,s,m,0),Ye===null&&Ro(),!1}catch{}finally{}if(o=zl(t,s,m,u),o!==null)return Lt(o,t,u),Mh(o,s,u),!0}return!1}function Au(t,s,o,u){if(u={lane:2,revertLane:sc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ko(t)){if(s)throw Error(r(479))}else s=zl(t,o,u,2),s!==null&&Lt(s,t,2)}function Ko(t){var s=t.alternate;return t===we||s!==null&&s===we}function Ih(t,s){_s=Vo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function Mh(t,s,o){if((o&4194048)!==0){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,Pd(t,o)}}var Ir={readContext:Et,use:$o,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};Ir.useEffectEvent=it;var Dh={readContext:Et,use:$o,useCallback:function(t,s){return It().memoizedState=[t,s===void 0?null:s],t},useContext:Et,useEffect:mh,useImperativeHandle:function(t,s,o){o=o!=null?o.concat([t]):null,Jo(4194308,4,_h.bind(null,s,t),o)},useLayoutEffect:function(t,s){return Jo(4194308,4,t,s)},useInsertionEffect:function(t,s){Jo(4,2,t,s)},useMemo:function(t,s){var o=It();s=s===void 0?null:s;var u=t();if(Pi){jn(!0);try{t()}finally{jn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(t,s,o){var u=It();if(o!==void 0){var m=o(s);if(Pi){jn(!0);try{o(s)}finally{jn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},u.queue=t,t=t.dispatch=Z0.bind(null,we,t),[u.memoizedState,t]},useRef:function(t){var s=It();return t={current:t},s.memoizedState=t},useState:function(t){t=_u(t);var s=t.queue,o=Nh.bind(null,we,s);return s.dispatch=o,[t.memoizedState,o]},useDebugValue:Tu,useDeferredValue:function(t,s){var o=It();return bu(o,t,s)},useTransition:function(){var t=_u(!1);return t=wh.bind(null,we,t.queue,!0,!1),It().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,o){var u=we,m=It();if(ke){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Ye===null)throw Error(r(349));(Me&127)!==0||Zf(u,s,o)}m.memoizedState=o;var y={value:o,getSnapshot:s};return m.queue=y,mh(th.bind(null,u,y,t),[t]),u.flags|=2048,Ss(9,{destroy:void 0},eh.bind(null,u,y,o,s),null),o},useId:function(){var t=It(),s=Ye.identifierPrefix;if(ke){var o=vn,u=yn;o=(u&~(1<<32-Vt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=zo++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=j0++,s="_"+s+"r_"+o.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Cu,useFormState:ch,useActionState:ch,useOptimistic:function(t){var s=It();s.memoizedState=s.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Au.bind(null,we,!0,o),o.dispatch=s,[t,s]},useMemoCache:gu,useCacheRefresh:function(){return It().memoizedState=W0.bind(null,we)},useEffectEvent:function(t){var s=It(),o={impl:t};return s.memoizedState=o,function(){if((Be&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},xu={readContext:Et,use:$o,useCallback:Sh,useContext:Et,useEffect:Su,useImperativeHandle:Eh,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Th,useReducer:jo,useRef:ph,useState:function(){return jo(In)},useDebugValue:Tu,useDeferredValue:function(t,s){var o=at();return bh(o,Fe.memoizedState,t,s)},useTransition:function(){var t=jo(In)[0],s=at().memoizedState;return[typeof t=="boolean"?t:Rr(t),s]},useSyncExternalStore:Wf,useId:xh,useHostTransitionStatus:Cu,useFormState:dh,useActionState:dh,useOptimistic:function(t,s){var o=at();return sh(o,Fe,t,s)},useMemoCache:gu,useCacheRefresh:Rh};xu.useEffectEvent=gh;var Uh={readContext:Et,use:$o,useCallback:Sh,useContext:Et,useEffect:Su,useImperativeHandle:Eh,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Th,useReducer:vu,useRef:ph,useState:function(){return vu(In)},useDebugValue:Tu,useDeferredValue:function(t,s){var o=at();return Fe===null?bu(o,t,s):bh(o,Fe.memoizedState,t,s)},useTransition:function(){var t=vu(In)[0],s=at().memoizedState;return[typeof t=="boolean"?t:Rr(t),s]},useSyncExternalStore:Wf,useId:xh,useHostTransitionStatus:Cu,useFormState:hh,useActionState:hh,useOptimistic:function(t,s){var o=at();return Fe!==null?sh(o,Fe,t,s):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:gu,useCacheRefresh:Rh};Uh.useEffectEvent=gh;function Ru(t,s,o,u){s=t.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Nu={enqueueSetState:function(t,s,o){t=t._reactInternals;var u=Kt(),m=ei(u);m.payload=s,o!=null&&(m.callback=o),s=ti(t,m,u),s!==null&&(Lt(s,t,u),wr(s,t,u))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var u=Kt(),m=ei(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=ti(t,m,u),s!==null&&(Lt(s,t,u),wr(s,t,u))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Kt(),u=ei(o);u.tag=2,s!=null&&(u.callback=s),s=ti(t,u,o),s!==null&&(Lt(s,t,o),wr(s,t,o))}};function kh(t,s,o,u,m,y,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!gr(o,u)||!gr(m,y):!0}function Ph(t,s,o,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==t&&Nu.enqueueReplaceState(s,s.state,null)}function Oi(t,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(t=t.defaultProps){o===s&&(o=E({},o));for(var m in t)o[m]===void 0&&(o[m]=t[m])}return o}function Oh(t){xo(t)}function Lh(t){console.error(t)}function qh(t){xo(t)}function Xo(t,s){try{var o=t.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Hh(t,s,o){try{var u=t.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Iu(t,s,o){return o=ei(o),o.tag=3,o.payload={element:null},o.callback=function(){Xo(t,s)},o}function Gh(t){return t=ei(t),t.tag=3,t}function Bh(t,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;t.payload=function(){return m(y)},t.callback=function(){Hh(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Hh(s,o,u),typeof m!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function eE(t,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&hs(s,o,m,!0),o=$t.current,o!==null){switch(o.tag){case 31:case 13:return on===null?la():o.alternate===null&&st===0&&(st=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Lo?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),tc(t,u,m)),!1;case 22:return o.flags|=65536,u===Lo?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),tc(t,u,m)),!1}throw Error(r(435,o.tag))}return tc(t,u,m),la(),!1}if(ke)return s=$t.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Kl&&(t=Error(r(422),{cause:u}),_r(tn(t,o)))):(u!==Kl&&(s=Error(r(423),{cause:u}),_r(tn(s,o))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,u=tn(u,o),m=Iu(t.stateNode,u,m),ou(t,m),st!==4&&(st=2)),!1;var y=Error(r(520),{cause:u});if(y=tn(y,o),qr===null?qr=[y]:qr.push(y),st!==4&&(st=2),s===null)return!0;u=tn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,t=m&-m,o.lanes|=t,t=Iu(o.stateNode,u,t),ou(o,t),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ai===null||!ai.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Gh(m),Bh(m,t,o,u),ou(o,m),!1}o=o.return}while(o!==null);return!1}var Mu=Error(r(461)),ct=!1;function St(t,s,o,u){s.child=t===null?$f(s,null,o,u):ki(s,t.child,o,u)}function Vh(t,s,o,u,m){o=o.render;var y=s.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return Ii(s),u=fu(t,s,o,T,y,m),w=hu(),t!==null&&!ct?(pu(t,s,m),Mn(t,s,m)):(ke&&w&&Jl(s),s.flags|=1,St(t,s,u,m),s.child)}function zh(t,s,o,u,m){if(t===null){var y=o.type;return typeof y=="function"&&!Fl(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,Fh(t,s,y,u,m)):(t=Mo(o.type,null,u,s,s.mode,m),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,!Hu(t,m)){var T=y.memoizedProps;if(o=o.compare,o=o!==null?o:gr,o(T,u)&&t.ref===s.ref)return Mn(t,s,m)}return s.flags|=1,t=Cn(y,u),t.ref=s.ref,t.return=s,s.child=t}function Fh(t,s,o,u,m){if(t!==null){var y=t.memoizedProps;if(gr(y,u)&&t.ref===s.ref)if(ct=!1,s.pendingProps=u=y,Hu(t,m))(t.flags&131072)!==0&&(ct=!0);else return s.lanes=t.lanes,Mn(t,s,m)}return Du(t,s,o,u,m)}function $h(t,s,o,u){var m=u.children,y=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,t!==null){for(u=s.child=t.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,s.child=null;return jh(t,s,y,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Po(s,y!==null?y.cachePool:null),y!==null?Yf(s,y):lu(),Kf(s);else return u=s.lanes=536870912,jh(t,s,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Po(s,y.cachePool),Yf(s,y),ii(),s.memoizedState=null):(t!==null&&Po(s,null),lu(),ii());return St(t,s,m,o),s.child}function Mr(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function jh(t,s,o,u,m){var y=nu();return y=y===null?null:{parent:lt._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},t!==null&&Po(s,null),lu(),Kf(s),t!==null&&hs(t,s,u,!0),s.childLanes=m,null}function Qo(t,s){return s=Zo({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Jh(t,s,o){return ki(s,t.child,null,o),t=Qo(s,s.pendingProps),t.flags|=2,jt(s),s.memoizedState=null,t}function tE(t,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(ke){if(u.mode==="hidden")return t=Qo(s,u),s.lanes=536870912,Mr(null,t);if(cu(s),(t=Xe)?(t=rm(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Kn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},o=If(t),o.return=s,s.child=o,_t=s,Xe=null)):t=null,t===null)throw Qn(s);return s.lanes=536870912,null}return Qo(s,u)}var y=t.memoizedState;if(y!==null){var T=y.dehydrated;if(cu(s),m)if(s.flags&256)s.flags&=-257,s=Jh(t,s,o);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(ct||hs(t,s,o,!1),m=(o&t.childLanes)!==0,ct||m){if(u=Ye,u!==null&&(T=Od(u,o),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ai(t,T),Lt(u,t,T),Mu;la(),s=Jh(t,s,o)}else t=y.treeContext,Xe=an(T.nextSibling),_t=s,ke=!0,Xn=null,rn=!1,t!==null&&Uf(s,t),s=Qo(s,u),s.flags|=4096;return s}return t=Cn(t.child,{mode:u.mode,children:u.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Wo(t,s){var o=s.ref;if(o===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(t===null||t.ref!==o)&&(s.flags|=4194816)}}function Du(t,s,o,u,m){return Ii(s),o=fu(t,s,o,u,void 0,m),u=hu(),t!==null&&!ct?(pu(t,s,m),Mn(t,s,m)):(ke&&u&&Jl(s),s.flags|=1,St(t,s,o,m),s.child)}function Yh(t,s,o,u,m,y){return Ii(s),s.updateQueue=null,o=Qf(s,u,o,m),Xf(t),u=hu(),t!==null&&!ct?(pu(t,s,y),Mn(t,s,y)):(ke&&u&&Jl(s),s.flags|=1,St(t,s,o,y),s.child)}function Kh(t,s,o,u,m){if(Ii(s),s.stateNode===null){var y=us,T=o.contextType;typeof T=="object"&&T!==null&&(y=Et(T)),y=new o(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Nu,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},su(s),T=o.contextType,y.context=typeof T=="object"&&T!==null?Et(T):us,y.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Ru(s,o,T,u),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Nu.enqueueReplaceState(y,y.state,null),Ar(s,u,y,m),Cr(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(t===null){y=s.stateNode;var w=s.memoizedProps,R=Oi(o,w);y.props=R;var H=y.context,K=o.contextType;T=us,typeof K=="object"&&K!==null&&(T=Et(K));var Z=o.getDerivedStateFromProps;K=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,K||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||H!==T)&&Ph(s,y,u,T),Zn=!1;var G=s.memoizedState;y.state=G,Ar(s,u,y,m),Cr(),H=s.memoizedState,w||G!==H||Zn?(typeof Z=="function"&&(Ru(s,o,Z,u),H=s.memoizedState),(R=Zn||kh(s,o,R,u,G,H,T))?(K||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),y.props=u,y.state=H,y.context=T,u=R):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,ru(t,s),T=s.memoizedProps,K=Oi(o,T),y.props=K,Z=s.pendingProps,G=y.context,H=o.contextType,R=us,typeof H=="object"&&H!==null&&(R=Et(H)),w=o.getDerivedStateFromProps,(H=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==Z||G!==R)&&Ph(s,y,u,R),Zn=!1,G=s.memoizedState,y.state=G,Ar(s,u,y,m),Cr();var F=s.memoizedState;T!==Z||G!==F||Zn||t!==null&&t.dependencies!==null&&Uo(t.dependencies)?(typeof w=="function"&&(Ru(s,o,w,u),F=s.memoizedState),(K=Zn||kh(s,o,K,u,G,F,R)||t!==null&&t.dependencies!==null&&Uo(t.dependencies))?(H||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,F,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,F,R)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=F),y.props=u,y.state=F,y.context=R,u=K):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),u=!1)}return y=u,Wo(t,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,t!==null&&u?(s.child=ki(s,t.child,null,m),s.child=ki(s,null,o,m)):St(t,s,o,m),s.memoizedState=y.state,t=s.child):t=Mn(t,s,m),t}function Xh(t,s,o,u){return Ri(),s.flags|=256,St(t,s,o,u),s.child}var Uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(t){return{baseLanes:t,cachePool:Hf()}}function Pu(t,s,o){return t=t!==null?t.childLanes&~o:0,s&&(t|=Yt),t}function Qh(t,s,o){var u=s.pendingProps,m=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(ot.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,t===null){if(ke){if(m?ni(s):ii(),(t=Xe)?(t=rm(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Kn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},o=If(t),o.return=s,s.child=o,_t=s,Xe=null)):t=null,t===null)throw Qn(s);return yc(t)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,m?(ii(),m=s.mode,w=Zo({mode:"hidden",children:w},m),u=xi(u,m,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=ku(o),u.childLanes=Pu(t,T,o),s.memoizedState=Uu,Mr(null,u)):(ni(s),Ou(s,w))}var R=t.memoizedState;if(R!==null&&(w=R.dehydrated,w!==null)){if(y)s.flags&256?(ni(s),s.flags&=-257,s=Lu(t,s,o)):s.memoizedState!==null?(ii(),s.child=t.child,s.flags|=128,s=null):(ii(),w=u.fallback,m=s.mode,u=Zo({mode:"visible",children:u.children},m),w=xi(w,m,o,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,ki(s,t.child,null,o),u=s.child,u.memoizedState=ku(o),u.childLanes=Pu(t,T,o),s.memoizedState=Uu,s=Mr(null,u));else if(ni(s),yc(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var H=T.dgst;T=H,u=Error(r(419)),u.stack="",u.digest=T,_r({value:u,source:null,stack:null}),s=Lu(t,s,o)}else if(ct||hs(t,s,o,!1),T=(o&t.childLanes)!==0,ct||T){if(T=Ye,T!==null&&(u=Od(T,o),u!==0&&u!==R.retryLane))throw R.retryLane=u,Ai(t,u),Lt(T,t,u),Mu;gc(w)||la(),s=Lu(t,s,o)}else gc(w)?(s.flags|=192,s.child=t.child,s=null):(t=R.treeContext,Xe=an(w.nextSibling),_t=s,ke=!0,Xn=null,rn=!1,t!==null&&Uf(s,t),s=Ou(s,u.children),s.flags|=4096);return s}return m?(ii(),w=u.fallback,m=s.mode,R=t.child,H=R.sibling,u=Cn(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,H!==null?w=Cn(H,w):(w=xi(w,m,o,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Mr(null,u),u=s.child,w=t.child.memoizedState,w===null?w=ku(o):(m=w.cachePool,m!==null?(R=lt._currentValue,m=m.parent!==R?{parent:R,pool:R}:m):m=Hf(),w={baseLanes:w.baseLanes|o,cachePool:m}),u.memoizedState=w,u.childLanes=Pu(t,T,o),s.memoizedState=Uu,Mr(t.child,u)):(ni(s),o=t.child,t=o.sibling,o=Cn(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,t!==null&&(T=s.deletions,T===null?(s.deletions=[t],s.flags|=16):T.push(t)),s.child=o,s.memoizedState=null,o)}function Ou(t,s){return s=Zo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Zo(t,s){return t=Ft(22,t,null,s),t.lanes=0,t}function Lu(t,s,o){return ki(s,t.child,null,o),t=Ou(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Wh(t,s,o){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),Wl(t.return,s,o)}function qu(t,s,o,u,m,y){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=y)}function Zh(t,s,o){var u=s.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=ot.current,w=(T&2)!==0;if(w?(T=T&1|2,s.flags|=128):T&=1,$(ot,T),St(t,s,u,o),u=ke?vr:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wh(t,o,s);else if(t.tag===19)Wh(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)t=o.alternate,t!==null&&Bo(t)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),qu(s,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(t=m.alternate,t!==null&&Bo(t)===null){s.child=m;break}t=m.sibling,m.sibling=o,o=m,m=t}qu(s,!0,o,null,y,u);break;case"together":qu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Mn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),oi|=s.lanes,(o&s.childLanes)===0)if(t!==null){if(hs(t,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,o=Cn(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=Cn(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function Hu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Uo(t)))}function nE(t,s,o){switch(s.tag){case 3:Ae(s,s.stateNode.containerInfo),Wn(s,lt,t.memoizedState.cache),Ri();break;case 27:case 5:Oe(s);break;case 4:Ae(s,s.stateNode.containerInfo);break;case 10:Wn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ni(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Qh(t,s,o):(ni(s),t=Mn(t,s,o),t!==null?t.sibling:null);ni(s);break;case 19:var m=(t.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(hs(t,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return Zh(t,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),$(ot,ot.current),u)break;return null;case 22:return s.lanes=0,$h(t,s,o,s.pendingProps);case 24:Wn(s,lt,t.memoizedState.cache)}return Mn(t,s,o)}function ep(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps)ct=!0;else{if(!Hu(t,o)&&(s.flags&128)===0)return ct=!1,nE(t,s,o);ct=(t.flags&131072)!==0}else ct=!1,ke&&(s.flags&1048576)!==0&&Df(s,vr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(t=Di(s.elementType),s.type=t,typeof t=="function")Fl(t)?(u=Oi(t,u),s.tag=1,s=Kh(null,s,t,u,o)):(s.tag=0,s=Du(null,s,t,u,o));else{if(t!=null){var m=t.$$typeof;if(m===Y){s.tag=11,s=Vh(null,s,t,u,o);break e}else if(m===X){s.tag=14,s=zh(null,s,t,u,o);break e}}throw s=Ge(t)||t,Error(r(306,s,""))}}return s;case 0:return Du(t,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Oi(u,s.pendingProps),Kh(t,s,u,m,o);case 3:e:{if(Ae(s,s.stateNode.containerInfo),t===null)throw Error(r(387));u=s.pendingProps;var y=s.memoizedState;m=y.element,ru(t,s),Ar(s,u,null,o);var T=s.memoizedState;if(u=T.cache,Wn(s,lt,u),u!==y.cache&&Zl(s,[lt],o,!0),Cr(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Xh(t,s,u,o);break e}else if(u!==m){m=tn(Error(r(424)),s),_r(m),s=Xh(t,s,u,o);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xe=an(t.firstChild),_t=s,ke=!0,Xn=null,rn=!0,o=$f(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ri(),u===m){s=Mn(t,s,o);break e}St(t,s,u,o)}s=s.child}return s;case 26:return Wo(t,s),t===null?(o=dm(s.type,null,s.pendingProps,null))?s.memoizedState=o:ke||(o=s.type,t=s.pendingProps,u=ma(le.current).createElement(o),u[vt]=s,u[Mt]=t,Tt(u,o,t),mt(u),s.stateNode=u):s.memoizedState=dm(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Oe(s),t===null&&ke&&(u=s.stateNode=lm(s.type,s.pendingProps,le.current),_t=s,rn=!0,m=Xe,di(s.type)?(vc=m,Xe=an(u.firstChild)):Xe=m),St(t,s,s.pendingProps.children,o),Wo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ke&&((m=u=Xe)&&(u=DE(u,s.type,s.pendingProps,rn),u!==null?(s.stateNode=u,_t=s,Xe=an(u.firstChild),rn=!1,m=!0):m=!1),m||Qn(s)),Oe(s),m=s.type,y=s.pendingProps,T=t!==null?t.memoizedProps:null,u=y.children,hc(m,y)?u=null:T!==null&&hc(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=fu(t,s,J0,null,null,o),jr._currentValue=m),Wo(t,s),St(t,s,u,o),s.child;case 6:return t===null&&ke&&((t=o=Xe)&&(o=UE(o,s.pendingProps,rn),o!==null?(s.stateNode=o,_t=s,Xe=null,t=!0):t=!1),t||Qn(s)),null;case 13:return Qh(t,s,o);case 4:return Ae(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=ki(s,null,u,o):St(t,s,u,o),s.child;case 11:return Vh(t,s,s.type,s.pendingProps,o);case 7:return St(t,s,s.pendingProps,o),s.child;case 8:return St(t,s,s.pendingProps.children,o),s.child;case 12:return St(t,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Wn(s,s.type,u.value),St(t,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,Ii(s),m=Et(m),u=u(m),s.flags|=1,St(t,s,u,o),s.child;case 14:return zh(t,s,s.type,s.pendingProps,o);case 15:return Fh(t,s,s.type,s.pendingProps,o);case 19:return Zh(t,s,o);case 31:return tE(t,s,o);case 22:return $h(t,s,o,s.pendingProps);case 24:return Ii(s),u=Et(lt),t===null?(m=nu(),m===null&&(m=Ye,y=eu(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),s.memoizedState={parent:u,cache:m},su(s),Wn(s,lt,m)):((t.lanes&o)!==0&&(ru(t,s),Ar(s,null,null,o),Cr()),m=t.memoizedState,y=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Wn(s,lt,u)):(u=y.cache,Wn(s,lt,u),u!==m.cache&&Zl(s,[lt],o,!0))),St(t,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Dn(t){t.flags|=4}function Gu(t,s,o,u,m){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(xp())t.flags|=8192;else throw Ui=Lo,iu}else t.flags&=-16777217}function tp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gm(s))if(xp())t.flags|=8192;else throw Ui=Lo,iu}function ea(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ud():536870912,t.lanes|=s,Cs|=s)}function Dr(t,s){if(!ke)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Qe(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(s)for(var m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=u,t.childLanes=o,s}function iE(t,s,o){var u=s.pendingProps;switch(Yl(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(s),null;case 1:return Qe(s),null;case 3:return o=s.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Rn(lt),Te(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(fs(s)?Dn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xl())),Qe(s),null;case 26:var m=s.type,y=s.memoizedState;return t===null?(Dn(s),y!==null?(Qe(s),tp(s,y)):(Qe(s),Gu(s,m,null,u,o))):y?y!==t.memoizedState?(Dn(s),Qe(s),tp(s,y)):(Qe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==u&&Dn(s),Qe(s),Gu(s,m,t,u,o)),null;case 27:if(nt(s),o=le.current,m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&Dn(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}t=W.current,fs(s)?kf(s):(t=lm(m,u,o),s.stateNode=t,Dn(s))}return Qe(s),null;case 5:if(nt(s),m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&Dn(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}if(y=W.current,fs(s))kf(s);else{var T=ma(le.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[vt]=s,y[Mt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(Tt(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Dn(s)}}return Qe(s),Gu(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,o),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==u&&Dn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(t=le.current,fs(s)){if(t=s.stateNode,o=s.memoizedProps,u=null,m=_t,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}t[vt]=s,t=!!(t.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Qp(t.nodeValue,o)),t||Qn(s,!0)}else t=ma(t).createTextNode(u),t[vt]=s,s.stateNode=t}return Qe(s),null;case 31:if(o=s.memoizedState,t===null||t.memoizedState!==null){if(u=fs(s),o!==null){if(t===null){if(!u)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[vt]=s}else Ri(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),t=!1}else o=Xl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return s.flags&256?(jt(s),s):(jt(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Qe(s),null;case 13:if(u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=fs(s),u!==null&&u.dehydrated!==null){if(t===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[vt]=s}else Ri(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),m=!1}else m=Xl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(jt(s),s):(jt(s),null)}return jt(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,t=t!==null&&t.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==t&&o&&(s.child.flags|=8192),ea(s,s.updateQueue),Qe(s),null);case 4:return Te(),t===null&&lc(s.stateNode.containerInfo),Qe(s),null;case 10:return Rn(s.type),Qe(s),null;case 19:if(P(ot),u=s.memoizedState,u===null)return Qe(s),null;if(m=(s.flags&128)!==0,y=u.rendering,y===null)if(m)Dr(u,!1);else{if(st!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(y=Bo(t),y!==null){for(s.flags|=128,Dr(u,!1),t=y.updateQueue,s.updateQueue=t,ea(s,t),s.subtreeFlags=0,t=o,o=s.child;o!==null;)Nf(o,t),o=o.sibling;return $(ot,ot.current&1|2),ke&&An(s,u.treeForkCount),s.child}t=t.sibling}u.tail!==null&&Nt()>ra&&(s.flags|=128,m=!0,Dr(u,!1),s.lanes=4194304)}else{if(!m)if(t=Bo(y),t!==null){if(s.flags|=128,m=!0,t=t.updateQueue,s.updateQueue=t,ea(s,t),Dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ke)return Qe(s),null}else 2*Nt()-u.renderingStartTime>ra&&o!==536870912&&(s.flags|=128,m=!0,Dr(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(t=u.last,t!==null?t.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Nt(),t.sibling=null,o=ot.current,$(ot,m?o&1|2:o&1),ke&&An(s,u.treeForkCount),t):(Qe(s),null);case 22:case 23:return jt(s),uu(),u=s.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Qe(s),s.subtreeFlags&6&&(s.flags|=8192)):Qe(s),o=s.updateQueue,o!==null&&ea(s,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),t!==null&&P(Mi),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Rn(lt),Qe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function sE(t,s){switch(Yl(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Rn(lt),Te(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return nt(s),null;case 31:if(s.memoizedState!==null){if(jt(s),s.alternate===null)throw Error(r(340));Ri()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(jt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ri()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(ot),null;case 4:return Te(),null;case 10:return Rn(s.type),null;case 22:case 23:return jt(s),uu(),t!==null&&P(Mi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Rn(lt),null;case 25:return null;default:return null}}function np(t,s){switch(Yl(s),s.tag){case 3:Rn(lt),Te();break;case 26:case 27:case 5:nt(s);break;case 4:Te();break;case 31:s.memoizedState!==null&&jt(s);break;case 13:jt(s);break;case 19:P(ot);break;case 10:Rn(s.type);break;case 22:case 23:jt(s),uu(),t!==null&&P(Mi);break;case 24:Rn(lt)}}function Ur(t,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){u=void 0;var y=o.create,T=o.inst;u=y(),T.destroy=u}o=o.next}while(o!==m)}}catch(w){ze(s,s.return,w)}}function si(t,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&t)===t){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=s;var R=o,H=w;try{H()}catch(K){ze(m,R,K)}}}u=u.next}while(u!==y)}}catch(K){ze(s,s.return,K)}}function ip(t){var s=t.updateQueue;if(s!==null){var o=t.stateNode;try{Jf(s,o)}catch(u){ze(t,t.return,u)}}}function sp(t,s,o){o.props=Oi(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(u){ze(t,s,u)}}function kr(t,s){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof o=="function"?t.refCleanup=o(u):o.current=u}}catch(m){ze(t,s,m)}}function _n(t,s){var o=t.ref,u=t.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){ze(t,s,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ze(t,s,m)}else o.current=null}function rp(t){var s=t.type,o=t.memoizedProps,u=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){ze(t,t.return,m)}}function Bu(t,s,o){try{var u=t.stateNode;AE(u,t.type,o,s),u[Mt]=s}catch(m){ze(t,t.return,m)}}function op(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&di(t.type)||t.tag===4}function Vu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||op(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&di(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zu(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(t),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=bn));else if(u!==4&&(u===27&&di(t.type)&&(o=t.stateNode,s=null),t=t.child,t!==null))for(zu(t,s,o),t=t.sibling;t!==null;)zu(t,s,o),t=t.sibling}function ta(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(u!==4&&(u===27&&di(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(ta(t,s,o),t=t.sibling;t!==null;)ta(t,s,o),t=t.sibling}function ap(t){var s=t.stateNode,o=t.memoizedProps;try{for(var u=t.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Tt(s,u,o),s[vt]=t,s[Mt]=o}catch(y){ze(t,t.return,y)}}var Un=!1,dt=!1,Fu=!1,lp=typeof WeakSet=="function"?WeakSet:Set,gt=null;function rE(t,s){if(t=t.containerInfo,dc=Ta,t=Ef(t),Ll(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var T=0,w=-1,R=-1,H=0,K=0,Z=t,G=null;t:for(;;){for(var F;Z!==o||m!==0&&Z.nodeType!==3||(w=T+m),Z!==y||u!==0&&Z.nodeType!==3||(R=T+u),Z.nodeType===3&&(T+=Z.nodeValue.length),(F=Z.firstChild)!==null;)G=Z,Z=F;for(;;){if(Z===t)break t;if(G===o&&++H===m&&(w=T),G===y&&++K===u&&(R=T),(F=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=F}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(fc={focusedElem:t,selectionRange:o},Ta=!1,gt=s;gt!==null;)if(s=gt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,gt=t;else for(;gt!==null;){switch(s=gt,y=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)m=t[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,o=s,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var ue=Oi(o.type,m);t=u.getSnapshotBeforeUpdate(ue,y),u.__reactInternalSnapshotBeforeUpdate=t}catch(_e){ze(o,o.return,_e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,o=t.nodeType,o===9)mc(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,gt=t;break}gt=s.return}}function up(t,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Pn(t,o),u&4&&Ur(5,o);break;case 1:if(Pn(t,o),u&4)if(t=o.stateNode,s===null)try{t.componentDidMount()}catch(T){ze(o,o.return,T)}else{var m=Oi(o.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(m,s,t.__reactInternalSnapshotBeforeUpdate)}catch(T){ze(o,o.return,T)}}u&64&&ip(o),u&512&&kr(o,o.return);break;case 3:if(Pn(t,o),u&64&&(t=o.updateQueue,t!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Jf(t,s)}catch(T){ze(o,o.return,T)}}break;case 27:s===null&&u&4&&ap(o);case 26:case 5:Pn(t,o),s===null&&u&4&&rp(o),u&512&&kr(o,o.return);break;case 12:Pn(t,o);break;case 31:Pn(t,o),u&4&&fp(t,o);break;case 13:Pn(t,o),u&4&&hp(t,o),u&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=pE.bind(null,o),kE(t,o))));break;case 22:if(u=o.memoizedState!==null||Un,!u){s=s!==null&&s.memoizedState!==null||dt,m=Un;var y=dt;Un=u,(dt=s)&&!y?On(t,o,(o.subtreeFlags&8772)!==0):Pn(t,o),Un=m,dt=y}break;case 30:break;default:Pn(t,o)}}function cp(t){var s=t.alternate;s!==null&&(t.alternate=null,cp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&El(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ze=null,Ut=!1;function kn(t,s,o){for(o=o.child;o!==null;)dp(t,s,o),o=o.sibling}function dp(t,s,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(sr,o)}catch{}switch(o.tag){case 26:dt||_n(o,s),kn(t,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:dt||_n(o,s);var u=Ze,m=Ut;di(o.type)&&(Ze=o.stateNode,Ut=!1),kn(t,s,o),zr(o.stateNode),Ze=u,Ut=m;break;case 5:dt||_n(o,s);case 6:if(u=Ze,m=Ut,Ze=null,kn(t,s,o),Ze=u,Ut=m,Ze!==null)if(Ut)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(o.stateNode)}catch(y){ze(o,s,y)}else try{Ze.removeChild(o.stateNode)}catch(y){ze(o,s,y)}break;case 18:Ze!==null&&(Ut?(t=Ze,im(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),Us(t)):im(Ze,o.stateNode));break;case 4:u=Ze,m=Ut,Ze=o.stateNode.containerInfo,Ut=!0,kn(t,s,o),Ze=u,Ut=m;break;case 0:case 11:case 14:case 15:si(2,o,s),dt||si(4,o,s),kn(t,s,o);break;case 1:dt||(_n(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&sp(o,s,u)),kn(t,s,o);break;case 21:kn(t,s,o);break;case 22:dt=(u=dt)||o.memoizedState!==null,kn(t,s,o),dt=u;break;default:kn(t,s,o)}}function fp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Us(t)}catch(o){ze(s,s.return,o)}}}function hp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Us(t)}catch(o){ze(s,s.return,o)}}function oE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new lp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new lp),s;default:throw Error(r(435,t.tag))}}function na(t,s){var o=oE(t);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=mE.bind(null,t,u);u.then(m,m)}})}function kt(t,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=t,T=s,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(di(w.type)){Ze=w.stateNode,Ut=!1;break e}break;case 5:Ze=w.stateNode,Ut=!1;break e;case 3:case 4:Ze=w.stateNode.containerInfo,Ut=!0;break e}w=w.return}if(Ze===null)throw Error(r(160));dp(y,T,m),Ze=null,Ut=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)pp(s,t),s=s.sibling}var dn=null;function pp(t,s){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:kt(s,t),Pt(t),u&4&&(si(3,t,t.return),Ur(3,t),si(5,t,t.return));break;case 1:kt(s,t),Pt(t),u&512&&(dt||o===null||_n(o,o.return)),u&64&&Un&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=dn;if(kt(s,t),Pt(t),u&512&&(dt||o===null||_n(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=t.memoizedState,o===null)if(u===null)if(t.stateNode===null){e:{u=t.type,o=t.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[ar]||y[vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Tt(y,u,o),y[vt]=t,mt(y),u=y;break e;case"link":var T=pm("link","href",m).get(u+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(y=T[w],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}y=m.createElement(u),Tt(y,u,o),m.head.appendChild(y);break;case"meta":if(T=pm("meta","content",m).get(u+(o.content||""))){for(w=0;w<T.length;w++)if(y=T[w],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}y=m.createElement(u),Tt(y,u,o),m.head.appendChild(y);break;default:throw Error(r(468,u))}y[vt]=t,mt(y),u=y}t.stateNode=u}else mm(m,t.type,t.stateNode);else t.stateNode=hm(m,u,t.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?mm(m,t.type,t.stateNode):hm(m,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Bu(t,t.memoizedProps,o.memoizedProps)}break;case 27:kt(s,t),Pt(t),u&512&&(dt||o===null||_n(o,o.return)),o!==null&&u&4&&Bu(t,t.memoizedProps,o.memoizedProps);break;case 5:if(kt(s,t),Pt(t),u&512&&(dt||o===null||_n(o,o.return)),t.flags&32){m=t.stateNode;try{ns(m,"")}catch(ue){ze(t,t.return,ue)}}u&4&&t.stateNode!=null&&(m=t.memoizedProps,Bu(t,m,o!==null?o.memoizedProps:m)),u&1024&&(Fu=!0);break;case 6:if(kt(s,t),Pt(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,o=t.stateNode;try{o.nodeValue=u}catch(ue){ze(t,t.return,ue)}}break;case 3:if(va=null,m=dn,dn=ga(s.containerInfo),kt(s,t),dn=m,Pt(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Us(s.containerInfo)}catch(ue){ze(t,t.return,ue)}Fu&&(Fu=!1,mp(t));break;case 4:u=dn,dn=ga(t.stateNode.containerInfo),kt(s,t),Pt(t),dn=u;break;case 12:kt(s,t),Pt(t);break;case 31:kt(s,t),Pt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,na(t,u)));break;case 13:kt(s,t),Pt(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(sa=Nt()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,na(t,u)));break;case 22:m=t.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,H=Un,K=dt;if(Un=H||m,dt=K||R,kt(s,t),dt=K,Un=H,Pt(t),u&8192)e:for(s=t.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||R||Un||dt||Li(t)),o=null,s=t;;){if(s.tag===5||s.tag===26){if(o===null){R=o=s;try{if(y=R.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=R.stateNode;var Z=R.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ue){ze(R,R.return,ue)}}}else if(s.tag===6){if(o===null){R=s;try{R.stateNode.nodeValue=m?"":R.memoizedProps}catch(ue){ze(R,R.return,ue)}}}else if(s.tag===18){if(o===null){R=s;try{var F=R.stateNode;m?sm(F,!0):sm(R.stateNode,!1)}catch(ue){ze(R,R.return,ue)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=t.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,na(t,o))));break;case 19:kt(s,t),Pt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,na(t,u)));break;case 30:break;case 21:break;default:kt(s,t),Pt(t)}}function Pt(t){var s=t.flags;if(s&2){try{for(var o,u=t.return;u!==null;){if(op(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,y=Vu(t);ta(t,y,m);break;case 5:var T=o.stateNode;o.flags&32&&(ns(T,""),o.flags&=-33);var w=Vu(t);ta(t,w,T);break;case 3:case 4:var R=o.stateNode.containerInfo,H=Vu(t);zu(t,H,R);break;default:throw Error(r(161))}}catch(K){ze(t,t.return,K)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function mp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;mp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Pn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)up(t,s.alternate,s),s=s.sibling}function Li(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:si(4,s,s.return),Li(s);break;case 1:_n(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&sp(s,s.return,o),Li(s);break;case 27:zr(s.stateNode);case 26:case 5:_n(s,s.return),Li(s);break;case 22:s.memoizedState===null&&Li(s);break;case 30:Li(s);break;default:Li(s)}t=t.sibling}}function On(t,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=t,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:On(m,y,o),Ur(4,y);break;case 1:if(On(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){ze(u,u.return,H)}if(u=y,m=u.updateQueue,m!==null){var w=u.stateNode;try{var R=m.shared.hiddenCallbacks;if(R!==null)for(m.shared.hiddenCallbacks=null,m=0;m<R.length;m++)jf(R[m],w)}catch(H){ze(u,u.return,H)}}o&&T&64&&ip(y),kr(y,y.return);break;case 27:ap(y);case 26:case 5:On(m,y,o),o&&u===null&&T&4&&rp(y),kr(y,y.return);break;case 12:On(m,y,o);break;case 31:On(m,y,o),o&&T&4&&fp(m,y);break;case 13:On(m,y,o),o&&T&4&&hp(m,y);break;case 22:y.memoizedState===null&&On(m,y,o),kr(y,y.return);break;case 30:break;default:On(m,y,o)}s=s.sibling}}function $u(t,s){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&Er(o))}function ju(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Er(t))}function fn(t,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gp(t,s,o,u),s=s.sibling}function gp(t,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:fn(t,s,o,u),m&2048&&Ur(9,s);break;case 1:fn(t,s,o,u);break;case 3:fn(t,s,o,u),m&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Er(t)));break;case 12:if(m&2048){fn(t,s,o,u),t=s.stateNode;try{var y=s.memoizedProps,T=y.id,w=y.onPostCommit;typeof w=="function"&&w(T,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){ze(s,s.return,R)}}else fn(t,s,o,u);break;case 31:fn(t,s,o,u);break;case 13:fn(t,s,o,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?fn(t,s,o,u):Pr(t,s):y._visibility&2?fn(t,s,o,u):(y._visibility|=2,Ts(t,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&$u(T,s);break;case 24:fn(t,s,o,u),m&2048&&ju(s.alternate,s);break;default:fn(t,s,o,u)}}function Ts(t,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=t,T=s,w=o,R=u,H=T.flags;switch(T.tag){case 0:case 11:case 15:Ts(y,T,w,R,m),Ur(8,T);break;case 23:break;case 22:var K=T.stateNode;T.memoizedState!==null?K._visibility&2?Ts(y,T,w,R,m):Pr(y,T):(K._visibility|=2,Ts(y,T,w,R,m)),m&&H&2048&&$u(T.alternate,T);break;case 24:Ts(y,T,w,R,m),m&&H&2048&&ju(T.alternate,T);break;default:Ts(y,T,w,R,m)}s=s.sibling}}function Pr(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=t,u=s,m=u.flags;switch(u.tag){case 22:Pr(o,u),m&2048&&$u(u.alternate,u);break;case 24:Pr(o,u),m&2048&&ju(u.alternate,u);break;default:Pr(o,u)}s=s.sibling}}var Or=8192;function bs(t,s,o){if(t.subtreeFlags&Or)for(t=t.child;t!==null;)yp(t,s,o),t=t.sibling}function yp(t,s,o){switch(t.tag){case 26:bs(t,s,o),t.flags&Or&&t.memoizedState!==null&&jE(o,dn,t.memoizedState,t.memoizedProps);break;case 5:bs(t,s,o);break;case 3:case 4:var u=dn;dn=ga(t.stateNode.containerInfo),bs(t,s,o),dn=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Or,Or=16777216,bs(t,s,o),Or=u):bs(t,s,o));break;default:bs(t,s,o)}}function vp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Lr(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gt=u,Ep(u,t)}vp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_p(t),t=t.sibling}function _p(t){switch(t.tag){case 0:case 11:case 15:Lr(t),t.flags&2048&&si(9,t,t.return);break;case 3:Lr(t);break;case 12:Lr(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ia(t)):Lr(t);break;default:Lr(t)}}function ia(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gt=u,Ep(u,t)}vp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:si(8,s,s.return),ia(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ia(s));break;default:ia(s)}t=t.sibling}}function Ep(t,s){for(;gt!==null;){var o=gt;switch(o.tag){case 0:case 11:case 15:si(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Er(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,gt=u;else e:for(o=t;gt!==null;){u=gt;var m=u.sibling,y=u.return;if(cp(u),u===o){gt=null;break e}if(m!==null){m.return=y,gt=m;break e}gt=y}}}var aE={getCacheForType:function(t){var s=Et(lt),o=s.data.get(t);return o===void 0&&(o=t(),s.data.set(t,o)),o},cacheSignal:function(){return Et(lt).controller.signal}},lE=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ye=null,Ne=null,Me=0,Ve=0,Jt=null,ri=!1,ws=!1,Ju=!1,Ln=0,st=0,oi=0,qi=0,Yu=0,Yt=0,Cs=0,qr=null,Ot=null,Ku=!1,sa=0,Sp=0,ra=1/0,oa=null,ai=null,pt=0,li=null,As=null,qn=0,Xu=0,Qu=null,Tp=null,Hr=0,Wu=null;function Kt(){return(Be&2)!==0&&Me!==0?Me&-Me:z.T!==null?sc():Ld()}function bp(){if(Yt===0)if((Me&536870912)===0||ke){var t=po;po<<=1,(po&3932160)===0&&(po=262144),Yt=t}else Yt=536870912;return t=$t.current,t!==null&&(t.flags|=32),Yt}function Lt(t,s,o){(t===Ye&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)&&(xs(t,0),ui(t,Me,Yt,!1)),or(t,o),((Be&2)===0||t!==Ye)&&(t===Ye&&((Be&2)===0&&(qi|=o),st===4&&ui(t,Me,Yt,!1)),En(t))}function wp(t,s,o){if((Be&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&t.expiredLanes)===0||rr(t,s),m=u?dE(t,s):ec(t,s,!0),y=u;do{if(m===0){ws&&!u&&ui(t,s,0,!1);break}else{if(o=t.current.alternate,y&&!uE(o)){m=ec(t,s,!1),y=!1;continue}if(m===2){if(y=s,t.errorRecoveryDisabledLanes&y)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var w=t;m=qr;var R=w.current.memoizedState.isDehydrated;if(R&&(xs(w,T).flags|=256),T=ec(w,T,!1),T!==2){if(Ju&&!R){w.errorRecoveryDisabledLanes|=y,qi|=y,m=4;break e}y=Ot,Ot=m,y!==null&&(Ot===null?Ot=y:Ot.push.apply(Ot,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){xs(t,0),ui(t,s,0,!0);break}e:{switch(u=t,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ui(u,s,Yt,!ri);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=sa+300-Nt(),10<m)){if(ui(u,s,Yt,!ri),go(u,0,!0)!==0)break e;qn=s,u.timeoutHandle=tm(Cp.bind(null,u,o,Ot,oa,Ku,s,Yt,qi,Cs,ri,y,"Throttled",-0,0),m);break e}Cp(u,o,Ot,oa,Ku,s,Yt,qi,Cs,ri,y,null,-0,0)}}break}while(!0);En(t)}function Cp(t,s,o,u,m,y,T,w,R,H,K,Z,G,F){if(t.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bn},yp(s,y,Z);var ue=(y&62914560)===y?sa-Nt():(y&4194048)===y?Sp-Nt():0;if(ue=JE(Z,ue),ue!==null){qn=y,t.cancelPendingCommit=ue(Up.bind(null,t,s,y,o,u,m,T,w,R,K,Z,null,G,F)),ui(t,y,T,!H);return}}Up(t,s,y,o,u,m,T,w,R)}function uE(t){for(var s=t;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!zt(y(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ui(t,s,o,u){s&=~Yu,s&=~qi,t.suspendedLanes|=s,t.pingedLanes&=~s,u&&(t.warmLanes|=s),u=t.expirationTimes;for(var m=s;0<m;){var y=31-Vt(m),T=1<<y;u[y]=-1,m&=~T}o!==0&&kd(t,o,s)}function aa(){return(Be&6)===0?(Gr(0),!1):!0}function Zu(){if(Ne!==null){if(Ve===0)var t=Ne.return;else t=Ne,xn=Ni=null,mu(t),ys=null,Tr=0,t=Ne;for(;t!==null;)np(t.alternate,t),t=t.return;Ne=null}}function xs(t,s){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,NE(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),qn=0,Zu(),Ye=t,Ne=o=Cn(t.current,null),Me=s,Ve=0,Jt=null,ri=!1,ws=rr(t,s),Ju=!1,Cs=Yt=Yu=qi=oi=st=0,Ot=qr=null,Ku=!1,(s&8)!==0&&(s|=s&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=s;0<u;){var m=31-Vt(u),y=1<<m;s|=t[m],u&=~y}return Ln=s,Ro(),o}function Ap(t,s){we=null,z.H=Ir,s===gs||s===Oo?(s=Vf(),Ve=3):s===iu?(s=Vf(),Ve=4):Ve=s===Mu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,Ne===null&&(st=1,Xo(t,tn(s,t.current)))}function xp(){var t=$t.current;return t===null?!0:(Me&4194048)===Me?on===null:(Me&62914560)===Me||(Me&536870912)!==0?t===on:!1}function Rp(){var t=z.H;return z.H=Ir,t===null?Ir:t}function Np(){var t=z.A;return z.A=aE,t}function la(){st=4,ri||(Me&4194048)!==Me&&$t.current!==null||(ws=!0),(oi&134217727)===0&&(qi&134217727)===0||Ye===null||ui(Ye,Me,Yt,!1)}function ec(t,s,o){var u=Be;Be|=2;var m=Rp(),y=Np();(Ye!==t||Me!==s)&&(oa=null,xs(t,s)),s=!1;var T=st;e:do try{if(Ve!==0&&Ne!==null){var w=Ne,R=Jt;switch(Ve){case 8:Zu(),T=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(s=!0);var H=Ve;if(Ve=0,Jt=null,Rs(t,w,R,H),o&&ws){T=0;break e}break;default:H=Ve,Ve=0,Jt=null,Rs(t,w,R,H)}}cE(),T=st;break}catch(K){Ap(t,K)}while(!0);return s&&t.shellSuspendCounter++,xn=Ni=null,Be=u,z.H=m,z.A=y,Ne===null&&(Ye=null,Me=0,Ro()),T}function cE(){for(;Ne!==null;)Ip(Ne)}function dE(t,s){var o=Be;Be|=2;var u=Rp(),m=Np();Ye!==t||Me!==s?(oa=null,ra=Nt()+500,xs(t,s)):ws=rr(t,s);e:do try{if(Ve!==0&&Ne!==null){s=Ne;var y=Jt;t:switch(Ve){case 1:Ve=0,Jt=null,Rs(t,s,y,1);break;case 2:case 9:if(Gf(y)){Ve=0,Jt=null,Mp(s);break}s=function(){Ve!==2&&Ve!==9||Ye!==t||(Ve=7),En(t)},y.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Gf(y)?(Ve=0,Jt=null,Mp(s)):(Ve=0,Jt=null,Rs(t,s,y,7));break;case 5:var T=null;switch(Ne.tag){case 26:T=Ne.memoizedState;case 5:case 27:var w=Ne;if(T?gm(T):w.stateNode.complete){Ve=0,Jt=null;var R=w.sibling;if(R!==null)Ne=R;else{var H=w.return;H!==null?(Ne=H,ua(H)):Ne=null}break t}}Ve=0,Jt=null,Rs(t,s,y,5);break;case 6:Ve=0,Jt=null,Rs(t,s,y,6);break;case 8:Zu(),st=6;break e;default:throw Error(r(462))}}fE();break}catch(K){Ap(t,K)}while(!0);return xn=Ni=null,z.H=u,z.A=m,Be=o,Ne!==null?0:(Ye=null,Me=0,Ro(),st)}function fE(){for(;Ne!==null&&!hl();)Ip(Ne)}function Ip(t){var s=ep(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,s===null?ua(t):Ne=s}function Mp(t){var s=t,o=s.alternate;switch(s.tag){case 15:case 0:s=Yh(o,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=Yh(o,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:mu(s);default:np(o,s),s=Ne=Nf(s,Ln),s=ep(o,s,Ln)}t.memoizedProps=t.pendingProps,s===null?ua(t):Ne=s}function Rs(t,s,o,u){xn=Ni=null,mu(s),ys=null,Tr=0;var m=s.return;try{if(eE(t,m,s,o,Me)){st=1,Xo(t,tn(o,t.current)),Ne=null;return}}catch(y){if(m!==null)throw Ne=m,y;st=1,Xo(t,tn(o,t.current)),Ne=null;return}s.flags&32768?(ke||u===1?t=!0:ws||(Me&536870912)!==0?t=!1:(ri=t=!0,(u===2||u===9||u===3||u===6)&&(u=$t.current,u!==null&&u.tag===13&&(u.flags|=16384))),Dp(s,t)):ua(s)}function ua(t){var s=t;do{if((s.flags&32768)!==0){Dp(s,ri);return}t=s.return;var o=iE(s.alternate,s,Ln);if(o!==null){Ne=o;return}if(s=s.sibling,s!==null){Ne=s;return}Ne=s=t}while(s!==null);st===0&&(st=5)}function Dp(t,s){do{var o=sE(t.alternate,t);if(o!==null){o.flags&=32767,Ne=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=o}while(t!==null);st=6,Ne=null}function Up(t,s,o,u,m,y,T,w,R){t.cancelPendingCommit=null;do ca();while(pt!==0);if((Be&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=Vl,$_(t,o,y,T,w,R),t===Ye&&(Ne=Ye=null,Me=0),As=s,li=t,qn=o,Xu=y,Qu=m,Tp=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gE(fo,function(){return qp(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,m=ne.p,ne.p=2,T=Be,Be|=4;try{rE(t,s,o)}finally{Be=T,ne.p=m,z.T=u}}pt=1,kp(),Pp(),Op()}}function kp(){if(pt===1){pt=0;var t=li,s=As,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var u=ne.p;ne.p=2;var m=Be;Be|=4;try{pp(s,t);var y=fc,T=Ef(t.containerInfo),w=y.focusedElem,R=y.selectionRange;if(T!==w&&w&&w.ownerDocument&&_f(w.ownerDocument.documentElement,w)){if(R!==null&&Ll(w)){var H=R.start,K=R.end;if(K===void 0&&(K=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(K,w.value.length);else{var Z=w.ownerDocument||document,G=Z&&Z.defaultView||window;if(G.getSelection){var F=G.getSelection(),ue=w.textContent.length,_e=Math.min(R.start,ue),je=R.end===void 0?_e:Math.min(R.end,ue);!F.extend&&_e>je&&(T=je,je=_e,_e=T);var k=vf(w,_e),I=vf(w,je);if(k&&I&&(F.rangeCount!==1||F.anchorNode!==k.node||F.anchorOffset!==k.offset||F.focusNode!==I.node||F.focusOffset!==I.offset)){var q=Z.createRange();q.setStart(k.node,k.offset),F.removeAllRanges(),_e>je?(F.addRange(q),F.extend(I.node,I.offset)):(q.setEnd(I.node,I.offset),F.addRange(q))}}}}for(Z=[],F=w;F=F.parentNode;)F.nodeType===1&&Z.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Z.length;w++){var Q=Z[w];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Ta=!!dc,fc=dc=null}finally{Be=m,ne.p=u,z.T=o}}t.current=s,pt=2}}function Pp(){if(pt===2){pt=0;var t=li,s=As,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var u=ne.p;ne.p=2;var m=Be;Be|=4;try{up(t,s.alternate,s)}finally{Be=m,ne.p=u,z.T=o}}pt=3}}function Op(){if(pt===4||pt===3){pt=0,pl();var t=li,s=As,o=qn,u=Tp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?pt=5:(pt=0,As=li=null,Lp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(ai=null),vl(o),s=s.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(sr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=z.T,m=ne.p,ne.p=2,z.T=null;try{for(var y=t.onRecoverableError,T=0;T<u.length;T++){var w=u[T];y(w.value,{componentStack:w.stack})}}finally{z.T=s,ne.p=m}}(qn&3)!==0&&ca(),En(t),m=t.pendingLanes,(o&261930)!==0&&(m&42)!==0?t===Wu?Hr++:(Hr=0,Wu=t):Hr=0,Gr(0)}}function Lp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Er(s)))}function ca(){return kp(),Pp(),Op(),qp()}function qp(){if(pt!==5)return!1;var t=li,s=Xu;Xu=0;var o=vl(qn),u=z.T,m=ne.p;try{ne.p=32>o?32:o,z.T=null,o=Qu,Qu=null;var y=li,T=qn;if(pt=0,As=li=null,qn=0,(Be&6)!==0)throw Error(r(331));var w=Be;if(Be|=4,_p(y.current),gp(y,y.current,T,o),Be=w,Gr(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(sr,y)}catch{}return!0}finally{ne.p=m,z.T=u,Lp(t,s)}}function Hp(t,s,o){s=tn(o,s),s=Iu(t.stateNode,s,2),t=ti(t,s,2),t!==null&&(or(t,2),En(t))}function ze(t,s,o){if(t.tag===3)Hp(t,t,o);else for(;s!==null;){if(s.tag===3){Hp(s,t,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ai===null||!ai.has(u))){t=tn(o,t),o=Gh(2),u=ti(s,o,2),u!==null&&(Bh(o,u,s,t),or(u,2),En(u));break}}s=s.return}}function tc(t,s,o){var u=t.pingCache;if(u===null){u=t.pingCache=new lE;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Ju=!0,m.add(o),t=hE.bind(null,t,s,o),s.then(t,t))}function hE(t,s,o){var u=t.pingCache;u!==null&&u.delete(s),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Ye===t&&(Me&o)===o&&(st===4||st===3&&(Me&62914560)===Me&&300>Nt()-sa?(Be&2)===0&&xs(t,0):Yu|=o,Cs===Me&&(Cs=0)),En(t)}function Gp(t,s){s===0&&(s=Ud()),t=Ai(t,s),t!==null&&(or(t,s),En(t))}function pE(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),Gp(t,o)}function mE(t,s){var o=0;switch(t.tag){case 31:case 13:var u=t.stateNode,m=t.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Gp(t,o)}function gE(t,s){return co(t,s)}var da=null,Ns=null,nc=!1,fa=!1,ic=!1,ci=0;function En(t){t!==Ns&&t.next===null&&(Ns===null?da=Ns=t:Ns=Ns.next=t),fa=!0,nc||(nc=!0,vE())}function Gr(t,s){if(!ic&&fa){ic=!0;do for(var o=!1,u=da;u!==null;){if(t!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,w=u.pingedLanes;y=(1<<31-Vt(42|t)+1)-1,y&=m&~(T&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,Fp(u,y))}else y=Me,y=go(u,u===Ye?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||rr(u,y)||(o=!0,Fp(u,y));u=u.next}while(o);ic=!1}}function yE(){Bp()}function Bp(){fa=nc=!1;var t=0;ci!==0&&RE()&&(t=ci);for(var s=Nt(),o=null,u=da;u!==null;){var m=u.next,y=Vp(u,s);y===0?(u.next=null,o===null?da=m:o.next=m,m===null&&(Ns=o)):(o=u,(t!==0||(y&3)!==0)&&(fa=!0)),u=m}pt!==0&&pt!==5||Gr(t),ci!==0&&(ci=0)}function Vp(t,s){for(var o=t.suspendedLanes,u=t.pingedLanes,m=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var T=31-Vt(y),w=1<<T,R=m[T];R===-1?((w&o)===0||(w&u)!==0)&&(m[T]=F_(w,s)):R<=s&&(t.expiredLanes|=w),y&=~w}if(s=Ye,o=Me,o=go(t,t===s?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,o===0||t===s&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Gt(u),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||rr(t,o)){if(s=o&-o,s===t.callbackPriority)return s;switch(u!==null&&Gt(u),vl(o)){case 2:case 8:o=rt;break;case 32:o=fo;break;case 268435456:o=Dd;break;default:o=fo}return u=zp.bind(null,t),o=co(o,u),t.callbackPriority=s,t.callbackNode=o,s}return u!==null&&u!==null&&Gt(u),t.callbackPriority=2,t.callbackNode=null,2}function zp(t,s){if(pt!==0&&pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(ca()&&t.callbackNode!==o)return null;var u=Me;return u=go(t,t===Ye?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(wp(t,u,s),Vp(t,Nt()),t.callbackNode!=null&&t.callbackNode===o?zp.bind(null,t):null)}function Fp(t,s){if(ca())return null;wp(t,s,!0)}function vE(){IE(function(){(Be&6)!==0?co(me,yE):Bp()})}function sc(){if(ci===0){var t=ps;t===0&&(t=ho,ho<<=1,(ho&261888)===0&&(ho=256)),ci=t}return ci}function $p(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Eo(""+t)}function jp(t,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,t.id&&o.setAttribute("form",t.id),s.parentNode.insertBefore(o,s),t=new FormData(t),o.parentNode.removeChild(o),t}function _E(t,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var y=$p((m[Mt]||null).action),T=u.submitter;T&&(s=(s=T[Mt]||null)?$p(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var w=new wo("action","action",null,u,m);t.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ci!==0){var R=T?jp(m,T):new FormData(m);wu(o,{pending:!0,data:R,method:m.method,action:y},null,R)}}else typeof y=="function"&&(w.preventDefault(),R=T?jp(m,T):new FormData(m),wu(o,{pending:!0,data:R,method:m.method,action:y},y,R))},currentTarget:m}]})}}for(var rc=0;rc<Bl.length;rc++){var oc=Bl[rc],EE=oc.toLowerCase(),SE=oc[0].toUpperCase()+oc.slice(1);cn(EE,"on"+SE)}cn(bf,"onAnimationEnd"),cn(wf,"onAnimationIteration"),cn(Cf,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(L0,"onTransitionRun"),cn(q0,"onTransitionStart"),cn(H0,"onTransitionCancel"),cn(Af,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Br));function Jp(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],m=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var w=u[T],R=w.instance,H=w.currentTarget;if(w=w.listener,R!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=H;try{y(m)}catch(K){xo(K)}m.currentTarget=null,y=R}else for(T=0;T<u.length;T++){if(w=u[T],R=w.instance,H=w.currentTarget,w=w.listener,R!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=H;try{y(m)}catch(K){xo(K)}m.currentTarget=null,y=R}}}}function Ie(t,s){var o=s[_l];o===void 0&&(o=s[_l]=new Set);var u=t+"__bubble";o.has(u)||(Yp(s,t,2,!1),o.add(u))}function ac(t,s,o){var u=0;s&&(u|=4),Yp(o,t,u,s)}var ha="_reactListening"+Math.random().toString(36).slice(2);function lc(t){if(!t[ha]){t[ha]=!0,Gd.forEach(function(o){o!=="selectionchange"&&(TE.has(o)||ac(o,!1,t),ac(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ha]||(s[ha]=!0,ac("selectionchange",!1,s))}}function Yp(t,s,o,u){switch(bm(s)){case 2:var m=XE;break;case 8:m=QE;break;default:m=bc}o=m.bind(null,s,o,t),m=void 0,!Rl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?t.addEventListener(s,o,{capture:!0,passive:m}):t.addEventListener(s,o,!0):m!==void 0?t.addEventListener(s,o,{passive:m}):t.addEventListener(s,o,!1)}function uc(t,s,o,u,m){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=u.return;T!==null;){var R=T.tag;if((R===3||R===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=Qi(w),T===null)return;if(R=T.tag,R===5||R===6||R===26||R===27){u=y=T;continue e}w=w.parentNode}}u=u.return}Wd(function(){var H=y,K=Al(o),Z=[];e:{var G=xf.get(t);if(G!==void 0){var F=wo,ue=t;switch(t){case"keypress":if(To(o)===0)break e;case"keydown":case"keyup":F=m0;break;case"focusin":ue="focus",F=Dl;break;case"focusout":ue="blur",F=Dl;break;case"beforeblur":case"afterblur":F=Dl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=i0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=v0;break;case bf:case wf:case Cf:F=o0;break;case Af:F=E0;break;case"scroll":case"scrollend":F=t0;break;case"wheel":F=T0;break;case"copy":case"cut":case"paste":F=l0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=sf;break;case"toggle":case"beforetoggle":F=w0}var _e=(s&4)!==0,je=!_e&&(t==="scroll"||t==="scrollend"),k=_e?G!==null?G+"Capture":null:G;_e=[];for(var I=H,q;I!==null;){var Q=I;if(q=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||q===null||k===null||(Q=ur(I,k),Q!=null&&_e.push(Vr(I,Q,q))),je)break;I=I.return}0<_e.length&&(G=new F(G,ue,null,o,K),Z.push({event:G,listeners:_e}))}}if((s&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",G&&o!==Cl&&(ue=o.relatedTarget||o.fromElement)&&(Qi(ue)||ue[Xi]))break e;if((F||G)&&(G=K.window===K?K:(G=K.ownerDocument)?G.defaultView||G.parentWindow:window,F?(ue=o.relatedTarget||o.toElement,F=H,ue=ue?Qi(ue):null,ue!==null&&(je=l(ue),_e=ue.tag,ue!==je||_e!==5&&_e!==27&&_e!==6)&&(ue=null)):(F=null,ue=H),F!==ue)){if(_e=tf,Q="onMouseLeave",k="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(_e=sf,Q="onPointerLeave",k="onPointerEnter",I="pointer"),je=F==null?G:lr(F),q=ue==null?G:lr(ue),G=new _e(Q,I+"leave",F,o,K),G.target=je,G.relatedTarget=q,Q=null,Qi(K)===H&&(_e=new _e(k,I+"enter",ue,o,K),_e.target=q,_e.relatedTarget=je,Q=_e),je=Q,F&&ue)t:{for(_e=bE,k=F,I=ue,q=0,Q=k;Q;Q=_e(Q))q++;Q=0;for(var ge=I;ge;ge=_e(ge))Q++;for(;0<q-Q;)k=_e(k),q--;for(;0<Q-q;)I=_e(I),Q--;for(;q--;){if(k===I||I!==null&&k===I.alternate){_e=k;break t}k=_e(k),I=_e(I)}_e=null}else _e=null;F!==null&&Kp(Z,G,F,_e,!1),ue!==null&&je!==null&&Kp(Z,je,ue,_e,!0)}}e:{if(G=H?lr(H):window,F=G.nodeName&&G.nodeName.toLowerCase(),F==="select"||F==="input"&&G.type==="file")var Le=ff;else if(cf(G))if(hf)Le=k0;else{Le=D0;var fe=M0}else F=G.nodeName,!F||F.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&wl(H.elementType)&&(Le=ff):Le=U0;if(Le&&(Le=Le(t,H))){df(Z,Le,o,K);break e}fe&&fe(t,G,H),t==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&bl(G,"number",G.value)}switch(fe=H?lr(H):window,t){case"focusin":(cf(fe)||fe.contentEditable==="true")&&(os=fe,ql=H,yr=null);break;case"focusout":yr=ql=os=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,Sf(Z,o,K);break;case"selectionchange":if(O0)break;case"keydown":case"keyup":Sf(Z,o,K)}var Ce;if(kl)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else rs?lf(t,o)&&(De="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(De="onCompositionStart");De&&(rf&&o.locale!=="ko"&&(rs||De!=="onCompositionStart"?De==="onCompositionEnd"&&rs&&(Ce=Zd()):(Yn=K,Nl="value"in Yn?Yn.value:Yn.textContent,rs=!0)),fe=pa(H,De),0<fe.length&&(De=new nf(De,t,null,o,K),Z.push({event:De,listeners:fe}),Ce?De.data=Ce:(Ce=uf(o),Ce!==null&&(De.data=Ce)))),(Ce=A0?x0(t,o):R0(t,o))&&(De=pa(H,"onBeforeInput"),0<De.length&&(fe=new nf("onBeforeInput","beforeinput",null,o,K),Z.push({event:fe,listeners:De}),fe.data=Ce)),_E(Z,t,H,o,K)}Jp(Z,s)})}function Vr(t,s,o){return{instance:t,listener:s,currentTarget:o}}function pa(t,s){for(var o=s+"Capture",u=[];t!==null;){var m=t,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=ur(t,o),m!=null&&u.unshift(Vr(t,m,y)),m=ur(t,s),m!=null&&u.push(Vr(t,m,y))),t.tag===3)return u;t=t.return}return[]}function bE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Kp(t,s,o,u,m){for(var y=s._reactName,T=[];o!==null&&o!==u;){var w=o,R=w.alternate,H=w.stateNode;if(w=w.tag,R!==null&&R===u)break;w!==5&&w!==26&&w!==27||H===null||(R=H,m?(H=ur(o,y),H!=null&&T.unshift(Vr(o,H,R))):m||(H=ur(o,y),H!=null&&T.push(Vr(o,H,R)))),o=o.return}T.length!==0&&t.push({event:s,listeners:T})}var wE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(wE,`
`).replace(CE,"")}function Qp(t,s){return s=Xp(s),Xp(t)===s}function $e(t,s,o,u,m,y){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ns(t,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ns(t,""+u);break;case"className":vo(t,"class",u);break;case"tabIndex":vo(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vo(t,o,u);break;case"style":Xd(t,u,y);break;case"data":if(s!=="object"){vo(t,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){t.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=Eo(""+u),t.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&$e(t,s,"name",m.name,m,null),$e(t,s,"formEncType",m.formEncType,m,null),$e(t,s,"formMethod",m.formMethod,m,null),$e(t,s,"formTarget",m.formTarget,m,null)):($e(t,s,"encType",m.encType,m,null),$e(t,s,"method",m.method,m,null),$e(t,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=Eo(""+u),t.setAttribute(o,u);break;case"onClick":u!=null&&(t.onclick=bn);break;case"onScroll":u!=null&&Ie("scroll",t);break;case"onScrollEnd":u!=null&&Ie("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}o=Eo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""+u):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":u===!0?t.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,u):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(o,u):t.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(o):t.setAttribute(o,u);break;case"popover":Ie("beforetoggle",t),Ie("toggle",t),yo(t,"popover",u);break;case"xlinkActuate":Tn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Tn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Tn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Tn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Tn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Tn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":yo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Z_.get(o)||o,yo(t,o,u))}}function cc(t,s,o,u,m,y){switch(o){case"style":Xd(t,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"children":typeof u=="string"?ns(t,u):(typeof u=="number"||typeof u=="bigint")&&ns(t,""+u);break;case"onScroll":u!=null&&Ie("scroll",t);break;case"onScrollEnd":u!=null&&Ie("scrollend",t);break;case"onClick":u!=null&&(t.onclick=bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bd.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),y=t[Mt]||null,y=y!=null?y[o]:null,typeof y=="function"&&t.removeEventListener(s,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(s,u,m);break e}o in t?t[o]=u:u===!0?t.setAttribute(o,""):yo(t,o,u)}}}function Tt(t,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",t),Ie("load",t);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var T=o[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$e(t,s,y,T,o,null)}}m&&$e(t,s,"srcSet",o.srcSet,o,null),u&&$e(t,s,"src",o.src,o,null);return;case"input":Ie("invalid",t);var w=y=T=m=null,R=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var K=o[u];if(K!=null)switch(u){case"name":m=K;break;case"type":T=K;break;case"checked":R=K;break;case"defaultChecked":H=K;break;case"value":y=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:$e(t,s,u,K,o,null)}}jd(t,y,w,R,H,T,m,!1);return;case"select":Ie("invalid",t),u=T=y=null;for(m in o)if(o.hasOwnProperty(m)&&(w=o[m],w!=null))switch(m){case"value":y=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:$e(t,s,m,w,o,null)}s=y,o=T,t.multiple=!!u,s!=null?ts(t,!!u,s,!1):o!=null&&ts(t,!!u,o,!0);return;case"textarea":Ie("invalid",t),y=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":m=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:$e(t,s,T,w,o,null)}Yd(t,u,m,y);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:$e(t,s,R,u,o,null)}return;case"dialog":Ie("beforetoggle",t),Ie("toggle",t),Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":Ie("load",t);break;case"video":case"audio":for(u=0;u<Br.length;u++)Ie(Br[u],t);break;case"image":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"embed":case"source":case"link":Ie("error",t),Ie("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:$e(t,s,H,u,o,null)}return;default:if(wl(s)){for(K in o)o.hasOwnProperty(K)&&(u=o[K],u!==void 0&&cc(t,s,K,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&$e(t,s,w,u,o,null))}function AE(t,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,w=null,R=null,H=null,K=null;for(F in o){var Z=o[F];if(o.hasOwnProperty(F)&&Z!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":R=Z;default:u.hasOwnProperty(F)||$e(t,s,F,null,u,Z)}}for(var G in u){var F=u[G];if(Z=o[G],u.hasOwnProperty(G)&&(F!=null||Z!=null))switch(G){case"type":y=F;break;case"name":m=F;break;case"checked":H=F;break;case"defaultChecked":K=F;break;case"value":T=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:F!==Z&&$e(t,s,G,F,u,Z)}}Tl(t,T,w,R,H,K,y,m);return;case"select":F=T=w=G=null;for(y in o)if(R=o[y],o.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":F=R;default:u.hasOwnProperty(y)||$e(t,s,y,null,u,R)}for(m in u)if(y=u[m],R=o[m],u.hasOwnProperty(m)&&(y!=null||R!=null))switch(m){case"value":G=y;break;case"defaultValue":w=y;break;case"multiple":T=y;default:y!==R&&$e(t,s,m,y,u,R)}s=w,o=T,u=F,G!=null?ts(t,!!o,G,!1):!!u!=!!o&&(s!=null?ts(t,!!o,s,!0):ts(t,!!o,o?[]:"",!1));return;case"textarea":F=G=null;for(w in o)if(m=o[w],o.hasOwnProperty(w)&&m!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:$e(t,s,w,null,u,m)}for(T in u)if(m=u[T],y=o[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":G=m;break;case"defaultValue":F=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&$e(t,s,T,m,u,y)}Jd(t,G,F);return;case"option":for(var ue in o)if(G=o[ue],o.hasOwnProperty(ue)&&G!=null&&!u.hasOwnProperty(ue))switch(ue){case"selected":t.selected=!1;break;default:$e(t,s,ue,null,u,G)}for(R in u)if(G=u[R],F=o[R],u.hasOwnProperty(R)&&G!==F&&(G!=null||F!=null))switch(R){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:$e(t,s,R,G,u,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in o)G=o[_e],o.hasOwnProperty(_e)&&G!=null&&!u.hasOwnProperty(_e)&&$e(t,s,_e,null,u,G);for(H in u)if(G=u[H],F=o[H],u.hasOwnProperty(H)&&G!==F&&(G!=null||F!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:$e(t,s,H,G,u,F)}return;default:if(wl(s)){for(var je in o)G=o[je],o.hasOwnProperty(je)&&G!==void 0&&!u.hasOwnProperty(je)&&cc(t,s,je,void 0,u,G);for(K in u)G=u[K],F=o[K],!u.hasOwnProperty(K)||G===F||G===void 0&&F===void 0||cc(t,s,K,G,u,F);return}}for(var k in o)G=o[k],o.hasOwnProperty(k)&&G!=null&&!u.hasOwnProperty(k)&&$e(t,s,k,null,u,G);for(Z in u)G=u[Z],F=o[Z],!u.hasOwnProperty(Z)||G===F||G==null&&F==null||$e(t,s,Z,G,u,F)}function Wp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,T=m.initiatorType,w=m.duration;if(y&&w&&Wp(T)){for(T=0,w=m.responseEnd,u+=1;u<o.length;u++){var R=o[u],H=R.startTime;if(H>w)break;var K=R.transferSize,Z=R.initiatorType;K&&Wp(Z)&&(R=R.responseEnd,T+=K*(R<w?1:(w-H)/(R-H)))}if(--u,s+=8*(y+T)/(m.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dc=null,fc=null;function ma(t){return t.nodeType===9?t:t.ownerDocument}function Zp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function em(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function hc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pc=null;function RE(){var t=window.event;return t&&t.type==="popstate"?t===pc?!1:(pc=t,!0):(pc=null,!1)}var tm=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(t){return nm.resolve(null).then(t).catch(ME)}:tm;function ME(t){setTimeout(function(){throw t})}function di(t){return t==="head"}function im(t,s){var o=s,u=0;do{var m=o.nextSibling;if(t.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){t.removeChild(m),Us(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")zr(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,zr(o);for(var y=o.firstChild;y;){var T=y.nextSibling,w=y.nodeName;y[ar]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=T}}else o==="body"&&zr(t.ownerDocument.body);o=m}while(o);Us(s)}function sm(t,s){var o=t;t=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=u}while(o)}function mc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":mc(o),El(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function DE(t,s,o,u){for(;t.nodeType===1;){var m=o;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[ar])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=an(t.nextSibling),t===null)break}return null}function UE(t,s,o){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=an(t.nextSibling),t===null))return null;return t}function rm(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=an(t.nextSibling),t===null))return null;return t}function gc(t){return t.data==="$?"||t.data==="$~"}function yc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function kE(t,s){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function an(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var vc=null;function om(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(s===0)return an(t.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}t=t.nextSibling}return null}function am(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return t;s--}else o!=="/$"&&o!=="/&"||s++}t=t.previousSibling}return null}function lm(t,s,o){switch(s=ma(o),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function zr(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);El(t)}var ln=new Map,um=new Set;function ga(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hn=ne.d;ne.d={f:PE,r:OE,D:LE,C:qE,L:HE,m:GE,X:VE,S:BE,M:zE};function PE(){var t=Hn.f(),s=aa();return t||s}function OE(t){var s=Wi(t);s!==null&&s.tag===5&&s.type==="form"?Ah(s):Hn.r(t)}var Is=typeof document>"u"?null:document;function cm(t,s,o){var u=Is;if(u&&typeof s=="string"&&s){var m=Zt(s);m='link[rel="'+t+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),um.has(m)||(um.add(m),t={rel:t,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),Tt(s,"link",t),mt(s),u.head.appendChild(s)))}}function LE(t){Hn.D(t),cm("dns-prefetch",t,null)}function qE(t,s){Hn.C(t,s),cm("preconnect",t,s)}function HE(t,s,o){Hn.L(t,s,o);var u=Is;if(u&&t&&s){var m='link[rel="preload"][as="'+Zt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Zt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Zt(o.imageSizes)+'"]')):m+='[href="'+Zt(t)+'"]';var y=m;switch(s){case"style":y=Ms(t);break;case"script":y=Ds(t)}ln.has(y)||(t=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:t,as:s},o),ln.set(y,t),u.querySelector(m)!==null||s==="style"&&u.querySelector(Fr(y))||s==="script"&&u.querySelector($r(y))||(s=u.createElement("link"),Tt(s,"link",t),mt(s),u.head.appendChild(s)))}}function GE(t,s){Hn.m(t,s);var o=Is;if(o&&t){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Zt(u)+'"][href="'+Zt(t)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ds(t)}if(!ln.has(y)&&(t=E({rel:"modulepreload",href:t},s),ln.set(y,t),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector($r(y)))return}u=o.createElement("link"),Tt(u,"link",t),mt(u),o.head.appendChild(u)}}}function BE(t,s,o){Hn.S(t,s,o);var u=Is;if(u&&t){var m=Zi(u).hoistableStyles,y=Ms(t);s=s||"default";var T=m.get(y);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(Fr(y)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},o),(o=ln.get(y))&&_c(t,o);var R=T=u.createElement("link");mt(R),Tt(R,"link",t),R._p=new Promise(function(H,K){R.onload=H,R.onerror=K}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ya(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(y,T)}}}function VE(t,s){Hn.X(t,s);var o=Is;if(o&&t){var u=Zi(o).hoistableScripts,m=Ds(t),y=u.get(m);y||(y=o.querySelector($r(m)),y||(t=E({src:t,async:!0},s),(s=ln.get(m))&&Ec(t,s),y=o.createElement("script"),mt(y),Tt(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function zE(t,s){Hn.M(t,s);var o=Is;if(o&&t){var u=Zi(o).hoistableScripts,m=Ds(t),y=u.get(m);y||(y=o.querySelector($r(m)),y||(t=E({src:t,async:!0,type:"module"},s),(s=ln.get(m))&&Ec(t,s),y=o.createElement("script"),mt(y),Tt(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function dm(t,s,o,u){var m=(m=le.current)?ga(m):null;if(!m)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ms(o.href),o=Zi(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=Ms(o.href);var y=Zi(m).hoistableStyles,T=y.get(t);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,T),(y=m.querySelector(Fr(t)))&&!y._p&&(T.instance=y,T.state.loading=5),ln.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ln.set(t,o),y||FE(m,t,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ds(o),o=Zi(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ms(t){return'href="'+Zt(t)+'"'}function Fr(t){return'link[rel="stylesheet"]['+t+"]"}function fm(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function FE(t,s,o,u){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=t.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Tt(s,"link",o),mt(s),t.head.appendChild(s))}function Ds(t){return'[src="'+Zt(t)+'"]'}function $r(t){return"script[async]"+t}function hm(t,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=t.querySelector('style[data-href~="'+Zt(o.href)+'"]');if(u)return s.instance=u,mt(u),u;var m=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),mt(u),Tt(u,"style",m),ya(u,o.precedence,t),s.instance=u;case"stylesheet":m=Ms(o.href);var y=t.querySelector(Fr(m));if(y)return s.state.loading|=4,s.instance=y,mt(y),y;u=fm(o),(m=ln.get(m))&&_c(u,m),y=(t.ownerDocument||t).createElement("link"),mt(y);var T=y;return T._p=new Promise(function(w,R){T.onload=w,T.onerror=R}),Tt(y,"link",u),s.state.loading|=4,ya(y,o.precedence,t),s.instance=y;case"script":return y=Ds(o.src),(m=t.querySelector($r(y)))?(s.instance=m,mt(m),m):(u=o,(m=ln.get(y))&&(u=E({},o),Ec(u,m)),t=t.ownerDocument||t,m=t.createElement("script"),mt(m),Tt(m,"link",u),t.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ya(u,o.precedence,t));return s.instance}function ya(t,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===s)y=w;else if(y!==m)break}y?y.parentNode.insertBefore(t,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(t,s.firstChild))}function _c(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Ec(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var va=null;function pm(t,s,o){if(va===null){var u=new Map,m=va=new Map;m.set(o,u)}else m=va,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(t))return u;for(u.set(t,null),o=o.getElementsByTagName(t),m=0;m<o.length;m++){var y=o[m];if(!(y[ar]||y[vt]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=t+T;var w=u.get(T);w?w.push(y):u.set(T,[y])}}return u}function mm(t,s,o){t=t.ownerDocument||t,t.head.insertBefore(o,s==="title"?t.querySelector("head > title"):null)}function $E(t,s,o){if(o===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function jE(t,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Ms(u.href),y=s.querySelector(Fr(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=_a.bind(t),s.then(t,t)),o.state.loading|=4,o.instance=y,mt(y);return}y=s.ownerDocument||s,u=fm(u),(m=ln.get(m))&&_c(u,m),y=y.createElement("link"),mt(y);var T=y;T._p=new Promise(function(w,R){T.onload=w,T.onerror=R}),Tt(y,"link",u),o.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=_a.bind(t),s.addEventListener("load",o),s.addEventListener("error",o))}}var Sc=0;function JE(t,s){return t.stylesheets&&t.count===0&&Sa(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var u=setTimeout(function(){if(t.stylesheets&&Sa(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+s);0<t.imgBytes&&Sc===0&&(Sc=62500*xE());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Sa(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>Sc?50:800)+s);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function _a(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sa(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ea=null;function Sa(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ea=new Map,s.forEach(YE,t),Ea=null,_a.call(t))}function YE(t,s){if(!(s.state.loading&4)){var o=Ea.get(t);if(o)var u=o.get(null);else{o=new Map,Ea.set(t,o);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),y=o.get(T)||u,y===u&&o.set(null,m),o.set(T,m),this.count++,u=_a.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),s.state.loading|=4}}var jr={$$typeof:M,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function KE(t,s,o,u,m,y,T,w,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.hiddenUpdates=gl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function ym(t,s,o,u,m,y,T,w,R,H,K,Z){return t=new KE(t,s,o,T,R,H,K,Z,w),s=1,y===!0&&(s|=24),y=Ft(3,null,null,s),t.current=y,y.stateNode=t,s=eu(),s.refCount++,t.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:s},su(y),t}function vm(t){return t?(t=us,t):us}function _m(t,s,o,u,m,y){m=vm(m),u.context===null?u.context=m:u.pendingContext=m,u=ei(s),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ti(t,u,s),o!==null&&(Lt(o,t,s),wr(o,t,s))}function Em(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function Tc(t,s){Em(t,s),(t=t.alternate)&&Em(t,s)}function Sm(t){if(t.tag===13||t.tag===31){var s=Ai(t,67108864);s!==null&&Lt(s,t,67108864),Tc(t,67108864)}}function Tm(t){if(t.tag===13||t.tag===31){var s=Kt();s=yl(s);var o=Ai(t,s);o!==null&&Lt(o,t,s),Tc(t,s)}}var Ta=!0;function XE(t,s,o,u){var m=z.T;z.T=null;var y=ne.p;try{ne.p=2,bc(t,s,o,u)}finally{ne.p=y,z.T=m}}function QE(t,s,o,u){var m=z.T;z.T=null;var y=ne.p;try{ne.p=8,bc(t,s,o,u)}finally{ne.p=y,z.T=m}}function bc(t,s,o,u){if(Ta){var m=wc(u);if(m===null)uc(t,s,u,ba,o),wm(t,u);else if(ZE(m,t,s,o,u))u.stopPropagation();else if(wm(t,u),s&4&&-1<WE.indexOf(t)){for(;m!==null;){var y=Wi(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Si(y.pendingLanes);if(T!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var R=1<<31-Vt(T);w.entanglements[1]|=R,T&=~R}En(y),(Be&6)===0&&(ra=Nt()+500,Gr(0))}}break;case 31:case 13:w=Ai(y,2),w!==null&&Lt(w,y,2),aa(),Tc(y,2)}if(y=wc(u),y===null&&uc(t,s,u,ba,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else uc(t,s,u,null,o)}}function wc(t){return t=Al(t),Cc(t)}var ba=null;function Cc(t){if(ba=null,t=Qi(t),t!==null){var s=l(t);if(s===null)t=null;else{var o=s.tag;if(o===13){if(t=c(s),t!==null)return t;t=null}else if(o===31){if(t=h(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return ba=t,null}function bm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ml()){case me:return 2;case rt:return 8;case fo:case q_:return 32;case Dd:return 268435456;default:return 32}default:return 32}}var Ac=!1,fi=null,hi=null,pi=null,Jr=new Map,Yr=new Map,mi=[],WE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wm(t,s){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(s.pointerId)}}function Kr(t,s,o,u,m,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Wi(s),s!==null&&Sm(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),t)}function ZE(t,s,o,u,m){switch(s){case"focusin":return fi=Kr(fi,t,s,o,u,m),!0;case"dragenter":return hi=Kr(hi,t,s,o,u,m),!0;case"mouseover":return pi=Kr(pi,t,s,o,u,m),!0;case"pointerover":var y=m.pointerId;return Jr.set(y,Kr(Jr.get(y)||null,t,s,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Yr.set(y,Kr(Yr.get(y)||null,t,s,o,u,m)),!0}return!1}function Cm(t){var s=Qi(t.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){t.blockedOn=s,qd(t.priority,function(){Tm(o)});return}}else if(s===31){if(s=h(o),s!==null){t.blockedOn=s,qd(t.priority,function(){Tm(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wa(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=wc(t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Cl=u,o.target.dispatchEvent(u),Cl=null}else return s=Wi(o),s!==null&&Sm(s),t.blockedOn=o,!1;s.shift()}return!0}function Am(t,s,o){wa(t)&&o.delete(s)}function eS(){Ac=!1,fi!==null&&wa(fi)&&(fi=null),hi!==null&&wa(hi)&&(hi=null),pi!==null&&wa(pi)&&(pi=null),Jr.forEach(Am),Yr.forEach(Am)}function Ca(t,s){t.blockedOn===s&&(t.blockedOn=null,Ac||(Ac=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eS)))}var Aa=null;function xm(t){Aa!==t&&(Aa=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Aa===t&&(Aa=null);for(var s=0;s<t.length;s+=3){var o=t[s],u=t[s+1],m=t[s+2];if(typeof u!="function"){if(Cc(u||o)===null)continue;break}var y=Wi(o);y!==null&&(t.splice(s,3),s-=3,wu(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Us(t){function s(R){return Ca(R,t)}fi!==null&&Ca(fi,t),hi!==null&&Ca(hi,t),pi!==null&&Ca(pi,t),Jr.forEach(s),Yr.forEach(s);for(var o=0;o<mi.length;o++){var u=mi[o];u.blockedOn===t&&(u.blockedOn=null)}for(;0<mi.length&&(o=mi[0],o.blockedOn===null);)Cm(o),o.blockedOn===null&&mi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],T=m[Mt]||null;if(typeof y=="function")T||xm(o);else if(T){var w=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Mt]||null)w=T.formAction;else if(Cc(m)!==null)continue}else w=T.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),xm(o)}}}function Rm(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function xc(t){this._internalRoot=t}xa.prototype.render=xc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Kt();_m(o,u,t,s,null,null)},xa.prototype.unmount=xc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;_m(t.current,2,null,t,null,null),aa(),s[Xi]=null}};function xa(t){this._internalRoot=t}xa.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ld();t={blockedOn:null,target:t,priority:s};for(var o=0;o<mi.length&&s!==0&&s<mi[o].priority;o++);mi.splice(o,0,t),o===0&&Cm(t)}};var Nm=e.version;if(Nm!=="19.2.1")throw Error(r(527,Nm,"19.2.1"));ne.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var tS={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ra.isDisabled&&Ra.supportsFiber)try{sr=Ra.inject(tS),Bt=Ra}catch{}}return Qr.createRoot=function(t,s){if(!a(t))throw Error(r(299));var o=!1,u="",m=Oh,y=Lh,T=qh;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=ym(t,1,!1,null,null,o,u,null,m,y,T,Rm),t[Xi]=s.current,lc(t),new xc(s)},Qr.hydrateRoot=function(t,s,o){if(!a(t))throw Error(r(299));var u=!1,m="",y=Oh,T=Lh,w=qh,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(R=o.formState)),s=ym(t,1,!0,s,o??null,u,m,R,y,T,w,Rm),s.context=vm(null),o=s.current,u=Kt(),u=yl(u),m=ei(u),m.callback=null,ti(o,m,u),o=u,s.current.lanes=o,or(s,o),En(s),t[Xi]=s.current,lc(t),new xa(s)},Qr.version="19.2.1",Qr}var Hm;function fS(){if(Hm)return Ic.exports;Hm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ic.exports=dS(),Ic.exports}var hS=fS(),xe=(n=>(n.PROFILE="PROFILE",n.HEALTH="HEALTH",n.TODO="TODO",n.FINANCE="FINANCE",n.NOTE="NOTE",n))(xe||{});const Re=({name:n,className:e=""})=>_.jsx("span",{className:`material-symbols-rounded ${e} select-none`,children:n}),yi=({children:n,className:e="",onClick:i})=>_.jsx("div",{onClick:i,className:`bg-white rounded-2xl shadow-sm border border-stone-100 p-4 transition-all duration-300 ${i?"cursor-pointer hover:shadow-md hover:-translate-y-1":""} ${e}`,children:n}),Se=({children:n,variant:e="primary",size:i="md",className:r="",...a})=>{const l="rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-stone-800 text-white hover:bg-stone-900 shadow-sm",secondary:"bg-stone-100 text-stone-700 hover:bg-stone-200",ghost:"bg-transparent text-stone-600 hover:bg-stone-50",danger:"bg-rose-50 text-rose-600 hover:bg-rose-100",icon:"bg-transparent text-stone-500 hover:bg-stone-100 hover:text-stone-800 rounded-full p-2"},h={sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"},g=e==="icon"?`${l} ${c.icon} ${r}`:`${l} ${c[e]} ${h[i]} ${r}`;return _.jsx("button",{className:g,...a,children:n})},Gm=({text:n,color:e="bg-stone-100 text-stone-600"})=>_.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium uppercase tracking-wider ${e}`,children:n}),Bs=({src:n,alt:e,size:i="w-10 h-10",className:r=""})=>n?_.jsx("img",{src:n,alt:e,className:`${i} rounded-full object-cover border-2 border-white shadow-sm ${r}`}):_.jsx("div",{className:`${i} rounded-full bg-stone-200 flex items-center justify-center border-2 border-white shadow-sm ${r}`,children:_.jsx("span",{className:"text-stone-500 font-bold text-xl",children:e.charAt(0).toUpperCase()})}),Qt=({isOpen:n,onClose:e,title:i,children:r})=>n?_.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[_.jsx("div",{className:"absolute inset-0 bg-stone-900/40 backdrop-blur-sm",onClick:e}),_.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg relative z-10 animate-fade-in-up flex flex-col max-h-[90vh]",children:[_.jsxs("div",{className:"p-6 border-b border-stone-100 flex items-center justify-between bg-cream rounded-t-3xl",children:[_.jsx("h3",{className:"text-xl font-bold text-stone-800",children:i}),_.jsx(Se,{variant:"icon",onClick:e,children:_.jsx(Re,{name:"close"})})]}),_.jsx("div",{className:"p-6 overflow-y-auto",children:r})]})]}):null,Xs=({checked:n,onChange:e,label:i})=>_.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e(!n),children:[_.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors duration-300 ${n?"bg-emerald-500":"bg-stone-200"}`,children:_.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-300 ${n?"translate-x-5":"translate-x-0"}`})}),i&&_.jsx("span",{className:"text-sm font-medium text-stone-700",children:i})]}),tt=({label:n,className:e="",...i})=>_.jsxs("div",{className:"w-full",children:[n&&_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1.5",children:n}),_.jsx("input",{className:`w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-2.5 text-stone-800 focus:outline-none focus:ring-2 focus:ring-stone-800/10 focus:border-stone-400 transition-all ${e}`,...i})]}),Vs=({label:n,className:e="",...i})=>_.jsxs("div",{className:"w-full",children:[n&&_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1.5",children:n}),_.jsx("textarea",{className:`w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-2.5 text-stone-800 focus:outline-none focus:ring-2 focus:ring-stone-800/10 focus:border-stone-400 transition-all min-h-[100px] resize-y ${e}`,...i})]}),pS=({requests:n,people:e,onAccept:i,onDecline:r,onCreateNewProfile:a})=>{const[l,c]=ee.useState(null),[h,g]=ee.useState(null),[p,v]=ee.useState(!1);if(n.length===0)return null;const E=async b=>{v(!0);try{await i(b,h),c(null),g(null)}catch(C){console.error("Failed to accept request:",C),alert("Failed to accept request. Please try again.")}finally{v(!1)}},S=b=>{a(),c(null),alert('Create your new profile. Once done, return here and select it from the "Merge with existing" dropdown to complete the collaboration.')};return _.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-4 mb-6",children:[_.jsxs("h3",{className:"font-bold text-indigo-800 flex items-center gap-2 mb-3",children:[_.jsx(Re,{name:"notifications",className:"text-indigo-500"}),"Collaboration Requests (",n.length,")"]}),_.jsx("div",{className:"space-y-3",children:n.map(b=>_.jsxs("div",{className:"bg-white rounded-xl p-4 border border-indigo-100",children:[_.jsx("div",{className:"flex justify-between items-start",children:_.jsxs("div",{children:[_.jsxs("p",{className:"text-stone-800 font-medium",children:[_.jsx("span",{className:"text-indigo-600",children:b.requesterName})," wants to collaborate on"]}),_.jsxs("p",{className:"text-sm text-stone-500 mt-1",children:[_.jsx("strong",{children:b.personName})," profile"]})]})}),l===b.id?_.jsxs("div",{className:"mt-4 p-3 bg-stone-50 rounded-xl",children:[_.jsx("p",{className:"text-sm text-stone-600 mb-3",children:"How would you like to handle this?"}),_.jsxs("div",{className:"space-y-2 mb-4",children:[_.jsx(Se,{variant:"primary",onClick:()=>S(b.id),disabled:p,className:"w-full",children:"Create New Profile"}),_.jsxs("div",{className:"relative",children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-2",children:"Or merge with existing:"}),_.jsxs("select",{value:h||"",onChange:C=>g(C.target.value||null),className:"w-full p-3 bg-white border border-stone-200 rounded-xl text-sm outline-none focus:border-indigo-400",children:[_.jsx("option",{value:"",children:"Select a profile..."}),e.map(C=>_.jsxs("option",{value:C.id,children:[C.name," (",C.relation,")"]},C.id))]})]}),h&&_.jsx(Se,{variant:"primary",onClick:()=>E(b.id),disabled:p,className:"w-full",children:p?"Merging...":"Merge & Accept"})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:()=>{c(null),g(null)},disabled:p,className:"flex-1",children:"Cancel"}),_.jsx(Se,{variant:"ghost",onClick:()=>r(b.id),disabled:p,className:"flex-1 text-red-400 hover:text-red-600",children:"Decline"})]})]}):_.jsxs("div",{className:"mt-3 flex gap-2",children:[_.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>r(b.id),className:"text-stone-500",children:"Decline"}),_.jsx(Se,{variant:"primary",size:"sm",onClick:()=>c(b.id),children:"Review & Accept"})]})]},b.id))})]})},mS=({people:n,onSelectPerson:e,onAddPerson:i,pendingCollaborationRequests:r=[],onAcceptCollaborationRequest:a,onDeclineCollaborationRequest:l})=>{const c=n.flatMap(v=>v.todos.map(E=>({...E,person:v}))).filter(v=>!v.isCompleted).sort((v,E)=>new Date(v.dueDate).getTime()-new Date(E.dueDate).getTime()),h=n.flatMap(v=>{const E=[];return v.health.forEach(S=>{new Date(S.meta.updatedAt).getTime()>Date.now()-10080*60*1e3&&E.push({id:`h-${S.id}`,text:`${v.name}: Added health record "${S.title}"`,time:new Date(S.meta.updatedAt).toLocaleDateString(),personId:v.id,icon:"medical_services",color:"bg-rose-100 text-rose-600",timestamp:new Date(S.meta.updatedAt).getTime(),recordType:xe.HEALTH})}),v.todos.filter(S=>S.isCompleted).forEach(S=>{new Date(S.meta.updatedAt).getTime()>Date.now()-10080*60*1e3&&E.push({id:`t-${S.id}`,text:`${v.name}: Completed "${S.title}"`,time:new Date(S.meta.updatedAt).toLocaleDateString(),personId:v.id,icon:"check_circle",color:"bg-sky-100 text-sky-600",timestamp:new Date(S.meta.updatedAt).getTime(),recordType:xe.TODO})}),E}).sort((v,E)=>E.timestamp-v.timestamp).slice(0,4),g=new Date,p=n.filter(v=>v.birthday).map(v=>{const E=new Date(v.birthday),S=new Date(g.getFullYear(),E.getMonth(),E.getDate());S<g&&S.setFullYear(g.getFullYear()+1);const b=Math.ceil((S.getTime()-g.getTime())/(1e3*60*60*24));return{...v,daysUntil:b,nextBirthday:S}}).filter(v=>v.daysUntil<=30).sort((v,E)=>v.daysUntil-E.daysUntil);return _.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 pb-20",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-stone-800 font-sans",children:"Good Morning"}),_.jsx("p",{className:"text-stone-500 mt-1",children:"Here's what's happening with your people."})]}),_.jsx("div",{className:"text-right hidden sm:block",children:_.jsx("p",{className:"text-sm font-semibold text-stone-800",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})})]}),_.jsx("section",{children:_.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar",children:[n.map(v=>_.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[80px] cursor-pointer group",onClick:()=>e(v.id),children:[_.jsx("div",{className:`p-1 rounded-full ${v.themeColor} group-hover:ring-2 ring-offset-2 ring-stone-200 transition-all`,children:_.jsx(Bs,{src:v.avatarUrl,alt:v.name,size:"w-16 h-16"})}),_.jsx("span",{className:"text-xs font-semibold text-stone-600 group-hover:text-stone-900",children:v.name})]},v.id)),_.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[80px] cursor-pointer group",onClick:i,children:[_.jsx("div",{className:"w-16 h-16 rounded-full bg-stone-100 flex items-center justify-center border-2 border-dashed border-stone-300 group-hover:border-stone-400 group-hover:bg-stone-200 transition-all",children:_.jsx(Re,{name:"add",className:"text-stone-400 group-hover:text-stone-600"})}),_.jsx("span",{className:"text-xs font-semibold text-stone-400 group-hover:text-stone-600",children:"Add New"})]})]})}),r.length>0&&a&&l&&_.jsx(pS,{requests:r,people:n,onAccept:a,onDecline:l,onCreateNewProfile:i}),_.jsxs("section",{className:"space-y-6",children:[_.jsxs("h2",{className:"text-lg font-bold text-stone-800 flex items-center gap-2",children:[_.jsx(Re,{name:"dynamic_feed",className:"text-stone-400"}),"Updates & Upcoming"]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(v=>_.jsxs(yi,{className:"flex items-start gap-4 hover:bg-stone-50/50",onClick:()=>e(v.personId,v.recordType),children:[_.jsx("div",{className:`p-2 rounded-xl ${v.color}`,children:_.jsx(Re,{name:v.icon})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:v.text}),_.jsx("p",{className:"text-xs text-stone-400 mt-1",children:v.time})]})]},v.id))}),_.jsxs(yi,{className:"p-0 overflow-hidden",children:[_.jsxs("div",{className:"p-4 border-b border-stone-100 bg-stone-50 flex justify-between items-center",children:[_.jsx("h3",{className:"font-semibold text-stone-700",children:"Upcoming Priorities"}),_.jsx(Gm,{text:`${c.length} Pending`})]}),_.jsx("div",{className:"divide-y divide-stone-100",children:c.length===0?_.jsx("div",{className:"p-8 text-center text-stone-400",children:"All caught up! "}):c.slice(0,5).map(v=>_.jsxs("div",{className:"p-4 flex items-center gap-3 hover:bg-stone-50 transition-colors cursor-pointer",onClick:()=>e(v.person.id,xe.TODO),children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${v.priority==="HIGH"?"bg-red-400":"bg-stone-300"}`}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"text-stone-800 font-medium text-sm line-through-active",children:v.title}),_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsx(Bs,{src:v.person.avatarUrl,alt:v.person.name,size:"w-4 h-4"}),_.jsx("span",{className:"text-xs text-stone-500",children:v.person.name}),_.jsx("span",{className:"text-xs text-stone-300",children:""}),_.jsxs("span",{className:"text-xs text-stone-500",children:["Due ",new Date(v.dueDate).toLocaleDateString()]})]})]}),_.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-stone-300 hover:border-emerald-500 hover:bg-emerald-50 transition-all"})]},v.id))})]}),p.length>0&&_.jsxs(yi,{className:"p-0 overflow-hidden",children:[_.jsxs("div",{className:"p-4 border-b border-stone-100 bg-gradient-to-r from-rose-50 to-pink-50 flex justify-between items-center",children:[_.jsxs("h3",{className:"font-semibold text-stone-700 flex items-center gap-2",children:[_.jsx(Re,{name:"cake",className:"text-rose-400"}),"Upcoming Birthdays"]}),_.jsx(Gm,{text:`${p.length}`,color:"bg-rose-100 text-rose-600"})]}),_.jsx("div",{className:"divide-y divide-stone-100",children:p.map(v=>_.jsxs("div",{className:"p-4 flex items-center gap-3 hover:bg-stone-50 transition-colors cursor-pointer",onClick:()=>e(v.id),children:[_.jsx(Bs,{src:v.avatarUrl,alt:v.name,size:"w-10 h-10"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"text-stone-800 font-medium text-sm",children:v.name}),_.jsx("p",{className:"text-xs text-stone-500",children:v.daysUntil===0?" Today!":v.daysUntil===1?" Tomorrow!":`In ${v.daysUntil} days`})]}),_.jsx("div",{className:"text-right",children:_.jsx("p",{className:"text-sm font-medium text-rose-500",children:v.nextBirthday.toLocaleDateString("en-US",{month:"short",day:"numeric"})})})]},v.id))})]})]})]})},gS="modulepreload",yS=function(n){return"/"+n},Bm={},Ji=function(e,i,r){let a=Promise.resolve();if(i&&i.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(i.map(p=>{if(p=yS(p),p in Bm)return;Bm[p]=!0;const v=p.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":gS,v||(S.as="script"),S.crossOrigin="",S.href=p,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((b,C)=>{S.addEventListener("load",b),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},vS=({isOpen:n,onClose:e,person:i,onUpdate:r,onDelete:a,onLinkToUser:l})=>{const[c,h]=ee.useState(i.name),[g,p]=ee.useState(i.relation),[v,E]=ee.useState(i.birthday||""),[S,b]=ee.useState(i.email||""),[C,x]=ee.useState(""),[N,U]=ee.useState([]),[O,M]=ee.useState(!1),[Y,L]=ee.useState(!1),j=async D=>{if(!D||D.length<3){U([]);return}M(!0);try{const{supabase:te}=await Ji(async()=>{const{supabase:pe}=await Promise.resolve().then(()=>Ki);return{supabase:pe}},void 0),{data:de,error:ye}=await te.from("profiles").select("id, email, full_name").ilike("email",`%${D}%`).limit(5);!ye&&de&&U(de)}catch(te){console.error("Error searching users:",te)}finally{M(!1)}};ee.useEffect(()=>{const D=setTimeout(()=>{j(C)},300);return()=>clearTimeout(D)},[C]);const X=D=>{D.preventDefault(),r({...i,name:c,relation:g,birthday:v,email:S||void 0}),e()},re=async D=>{l&&(await l(i.id,D),r({...i,linkedUserId:D}),x(""),U([]))};return Y?_.jsx(Qt,{isOpen:n,onClose:()=>L(!1),title:"Delete Person",children:_.jsxs("div",{className:"space-y-4",children:[_.jsxs("p",{className:"text-stone-600",children:["Are you sure you want to delete ",_.jsx("strong",{children:i.name}),"? This will also delete all their health records, todos, notes, and financial records."]}),_.jsx("p",{className:"text-red-500 text-sm font-medium",children:"This action cannot be undone."}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:()=>L(!1),children:"Cancel"}),_.jsx(Se,{variant:"danger",onClick:a,children:"Delete Forever"})]})]})}):_.jsx(Qt,{isOpen:n,onClose:e,title:"Edit Profile",children:_.jsxs("form",{onSubmit:X,className:"space-y-4",children:[_.jsx(tt,{label:"Name",value:c,onChange:D=>h(D.target.value)}),_.jsx(tt,{label:"Relation",value:g,onChange:D=>p(D.target.value)}),_.jsx(tt,{label:"Birthday",type:"date",value:v,onChange:D=>E(D.target.value)}),_.jsx(tt,{label:"Email (Optional)",type:"email",value:S,onChange:D=>b(D.target.value),placeholder:"email@example.com"}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Link to Account"}),i.linkedUserId?_.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-xl text-sm text-green-700",children:[_.jsx(Re,{name:"check_circle",className:"inline mr-2"}),"Profile is linked to an account"]}):_.jsxs("div",{className:"space-y-2",children:[_.jsx(tt,{placeholder:"Search by email...",value:C,onChange:D=>x(D.target.value),type:"email"}),O&&_.jsx("div",{className:"text-xs text-stone-400",children:"Searching..."}),N.length>0&&_.jsx("div",{className:"border border-stone-200 rounded-xl overflow-hidden",children:N.map(D=>_.jsxs("button",{type:"button",onClick:()=>re(D.id),className:"w-full p-3 text-left hover:bg-stone-50 border-b border-stone-100 last:border-b-0 flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:(D.full_name||D.email||"U")[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:D.full_name||"No name"}),_.jsx("p",{className:"text-xs text-stone-500",children:D.email})]})]},D.id))})]})]}),_.jsxs("div",{className:"flex justify-between pt-4",children:[_.jsx(Se,{variant:"danger",onClick:()=>L(!0),type:"button",children:"Delete Person"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",children:"Save Changes"})]})]})]})})},_S=({isOpen:n,onClose:e,todo:i,person:r,onUpdate:a,onDelete:l})=>{var re;const[c,h]=ee.useState(i.title),[g,p]=ee.useState(i.dueDate),[v,E]=ee.useState(i.priority),[S,b]=ee.useState(i.description||""),[C,x]=ee.useState((((re=i.sharedWithCollaboratorIds)==null?void 0:re.length)||0)>0),[N,U]=ee.useState(i.sharedWithCollaboratorIds||[]),[O,M]=ee.useState([]),[Y,L]=ee.useState(!1);ee.useEffect(()=>{n&&(async()=>{try{const{supabase:te}=await Ji(async()=>{const{supabase:pe}=await Promise.resolve().then(()=>Ki);return{supabase:pe}},void 0),{data:de,error:ye}=await te.from("person_shares").select("id, user_id, user_email, profiles(full_name, email)").eq("person_id",r.id).not("user_id","is",null);!ye&&de&&M(de.map(pe=>{var Ge,Pe;return{id:pe.id,name:((Ge=pe.profiles)==null?void 0:Ge.full_name)||pe.user_email||"Unknown",email:((Pe=pe.profiles)==null?void 0:Pe.email)||pe.user_email}}))}catch(te){console.error("Error fetching collaborators:",te)}})()},[n,r.id]);const j=D=>{D.preventDefault(),a({title:c,dueDate:g,priority:v,description:S,sharedWithCollaboratorIds:C?N:void 0}),e()},X=D=>{U(te=>te.includes(D)?te.filter(de=>de!==D):[...te,D])};return Y?_.jsx(Qt,{isOpen:n,onClose:()=>L(!1),title:"Delete Task",children:_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-stone-600",children:"Are you sure you want to delete this task?"}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:()=>L(!1),children:"Cancel"}),_.jsx(Se,{variant:"danger",onClick:()=>{l(),e()},children:"Delete"})]})]})}):_.jsx(Qt,{isOpen:n,onClose:e,title:"Edit Task",children:_.jsxs("form",{onSubmit:j,className:"space-y-4",children:[_.jsx(tt,{label:"Title",value:c,onChange:D=>h(D.target.value)}),_.jsx(tt,{label:"Due Date",type:"date",value:g,onChange:D=>p(D.target.value)}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Priority"}),_.jsxs("select",{value:v,onChange:D=>E(D.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"LOW",children:"Low"}),_.jsx("option",{value:"MEDIUM",children:"Medium"}),_.jsx("option",{value:"HIGH",children:"High"})]})]}),_.jsx(Vs,{label:"Description",value:S,onChange:D=>b(D.target.value),placeholder:"Add more details..."}),_.jsxs("div",{className:"pt-4 border-t border-stone-100",children:[_.jsx(Xs,{checked:C,onChange:x,label:"Share with Collaborators?"}),C&&O.length>0&&_.jsxs("div",{className:"mt-3 pl-[52px]",children:[_.jsx("p",{className:"text-xs font-bold text-stone-500 uppercase mb-2",children:"Select Collaborators"}),_.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:O.map(D=>_.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-colors ${N.includes(D.id)?"bg-indigo-100 border-2 border-indigo-300":"bg-stone-50 border border-stone-200 hover:border-indigo-200"}`,children:[_.jsx("input",{type:"checkbox",checked:N.includes(D.id),onChange:()=>X(D.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),_.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:D.name[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:D.name}),D.email&&_.jsx("p",{className:"text-xs text-stone-500",children:D.email})]})]},D.id))})]}),C&&O.length===0&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"No accepted collaborators yet."})]}),_.jsxs("div",{className:"flex justify-between pt-4",children:[_.jsx(Se,{variant:"danger",onClick:()=>L(!0),type:"button",children:"Delete"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",children:"Save"})]})]})]})})},ES=({isOpen:n,onClose:e,record:i,person:r,onUpdate:a,onDelete:l})=>{var re;const[c,h]=ee.useState(i.title),[g,p]=ee.useState(i.date),[v,E]=ee.useState(i.notes),[S,b]=ee.useState(i.type),[C,x]=ee.useState((((re=i.sharedWithCollaboratorIds)==null?void 0:re.length)||0)>0),[N,U]=ee.useState(i.sharedWithCollaboratorIds||[]),[O,M]=ee.useState([]),[Y,L]=ee.useState(!1);ee.useEffect(()=>{n&&(async()=>{try{const{supabase:te}=await Ji(async()=>{const{supabase:pe}=await Promise.resolve().then(()=>Ki);return{supabase:pe}},void 0),{data:de,error:ye}=await te.from("person_shares").select("id, user_id, user_email, profiles(full_name, email)").eq("person_id",r.id).not("user_id","is",null);!ye&&de&&M(de.map(pe=>{var Ge,Pe;return{id:pe.id,name:((Ge=pe.profiles)==null?void 0:Ge.full_name)||pe.user_email||"Unknown",email:((Pe=pe.profiles)==null?void 0:Pe.email)||pe.user_email}}))}catch(te){console.error("Error fetching collaborators:",te)}})()},[n,r.id]);const j=D=>{D.preventDefault(),a({title:c,date:g,notes:v,type:S,sharedWithCollaboratorIds:C?N:void 0}),e()},X=D=>{U(te=>te.includes(D)?te.filter(de=>de!==D):[...te,D])};return Y?_.jsx(Qt,{isOpen:n,onClose:()=>L(!1),title:"Delete Health Record",children:_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-stone-600",children:"Are you sure you want to delete this health record?"}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:()=>L(!1),children:"Cancel"}),_.jsx(Se,{variant:"danger",onClick:()=>{l(),e()},children:"Delete"})]})]})}):_.jsx(Qt,{isOpen:n,onClose:e,title:"Edit Health Record",children:_.jsxs("form",{onSubmit:j,className:"space-y-4",children:[_.jsx(tt,{label:"Title",value:c,onChange:D=>h(D.target.value)}),_.jsx(tt,{label:"Date",type:"date",value:g,onChange:D=>p(D.target.value)}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Type"}),_.jsxs("select",{value:S,onChange:D=>b(D.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"CHECKUP",children:"Checkup"}),_.jsx("option",{value:"MEDICATION",children:"Medication"}),_.jsx("option",{value:"VACCINE",children:"Vaccine"}),_.jsx("option",{value:"OTHER",children:"Other"})]})]}),_.jsx(Vs,{label:"Notes",value:v,onChange:D=>E(D.target.value)}),_.jsxs("div",{className:"pt-4 border-t border-stone-100",children:[_.jsx(Xs,{checked:C,onChange:x,label:"Share with Collaborators?"}),C&&O.length>0&&_.jsxs("div",{className:"mt-3 pl-[52px]",children:[_.jsx("p",{className:"text-xs font-bold text-stone-500 uppercase mb-2",children:"Select Collaborators"}),_.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:O.map(D=>_.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-colors ${N.includes(D.id)?"bg-indigo-100 border-2 border-indigo-300":"bg-stone-50 border border-stone-200 hover:border-indigo-200"}`,children:[_.jsx("input",{type:"checkbox",checked:N.includes(D.id),onChange:()=>X(D.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),_.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:D.name[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:D.name}),D.email&&_.jsx("p",{className:"text-xs text-stone-500",children:D.email})]})]},D.id))})]}),C&&O.length===0&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"No accepted collaborators yet."})]}),_.jsxs("div",{className:"flex justify-between pt-4",children:[_.jsx(Se,{variant:"danger",onClick:()=>L(!0),type:"button",children:"Delete"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",children:"Save"})]})]})]})})},SS=({isOpen:n,onClose:e,note:i,person:r,onUpdate:a,onDelete:l})=>{var Y;const[c,h]=ee.useState(i.title),[g,p]=ee.useState(i.content),[v,E]=ee.useState((((Y=i.sharedWithCollaboratorIds)==null?void 0:Y.length)||0)>0),[S,b]=ee.useState(i.sharedWithCollaboratorIds||[]),[C,x]=ee.useState([]),[N,U]=ee.useState(!1);ee.useEffect(()=>{n&&(async()=>{try{const{supabase:j}=await Ji(async()=>{const{supabase:D}=await Promise.resolve().then(()=>Ki);return{supabase:D}},void 0),{data:X,error:re}=await j.from("person_shares").select("id, user_id, user_email, profiles(full_name, email)").eq("person_id",r.id).not("user_id","is",null);!re&&X&&x(X.map(D=>{var te,de;return{id:D.id,name:((te=D.profiles)==null?void 0:te.full_name)||D.user_email||"Unknown",email:((de=D.profiles)==null?void 0:de.email)||D.user_email}}))}catch(j){console.error("Error fetching collaborators:",j)}})()},[n,r.id]);const O=L=>{L.preventDefault(),a({title:c,content:g,sharedWithCollaboratorIds:v?S:void 0}),e()},M=L=>{b(j=>j.includes(L)?j.filter(X=>X!==L):[...j,L])};return N?_.jsx(Qt,{isOpen:n,onClose:()=>U(!1),title:"Delete Note",children:_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-stone-600",children:"Are you sure you want to delete this note?"}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:()=>U(!1),children:"Cancel"}),_.jsx(Se,{variant:"danger",onClick:()=>{l(),e()},children:"Delete"})]})]})}):_.jsx(Qt,{isOpen:n,onClose:e,title:"Edit Note",children:_.jsxs("form",{onSubmit:O,className:"space-y-4",children:[_.jsx(tt,{label:"Title",value:c,onChange:L=>h(L.target.value)}),_.jsx(Vs,{label:"Content",value:g,onChange:L=>p(L.target.value)}),_.jsxs("div",{className:"pt-4 border-t border-stone-100",children:[_.jsx(Xs,{checked:v,onChange:E,label:"Share with Collaborators?"}),v&&C.length>0&&_.jsxs("div",{className:"mt-3 pl-[52px]",children:[_.jsx("p",{className:"text-xs font-bold text-stone-500 uppercase mb-2",children:"Select Collaborators"}),_.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:C.map(L=>_.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-colors ${S.includes(L.id)?"bg-indigo-100 border-2 border-indigo-300":"bg-stone-50 border border-stone-200 hover:border-indigo-200"}`,children:[_.jsx("input",{type:"checkbox",checked:S.includes(L.id),onChange:()=>M(L.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),_.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:L.name[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:L.name}),L.email&&_.jsx("p",{className:"text-xs text-stone-500",children:L.email})]})]},L.id))})]}),v&&C.length===0&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"No accepted collaborators yet."})]}),_.jsxs("div",{className:"flex justify-between pt-4",children:[_.jsx(Se,{variant:"danger",onClick:()=>U(!0),type:"button",children:"Delete"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",children:"Save"})]})]})]})})},TS=({isOpen:n,onClose:e,record:i,person:r,onUpdate:a,onDelete:l})=>{var re;const[c,h]=ee.useState(i.title),[g,p]=ee.useState(i.amount.toString()),[v,E]=ee.useState(i.type),[S,b]=ee.useState(i.date),[C,x]=ee.useState((((re=i.sharedWithCollaboratorIds)==null?void 0:re.length)||0)>0),[N,U]=ee.useState(i.sharedWithCollaboratorIds||[]),[O,M]=ee.useState([]),[Y,L]=ee.useState(!1);ee.useEffect(()=>{n&&(async()=>{try{const{supabase:te}=await Ji(async()=>{const{supabase:pe}=await Promise.resolve().then(()=>Ki);return{supabase:pe}},void 0),{data:de,error:ye}=await te.from("person_shares").select("id, user_id, user_email, profiles(full_name, email)").eq("person_id",r.id).not("user_id","is",null);!ye&&de&&M(de.map(pe=>{var Ge,Pe;return{id:pe.id,name:((Ge=pe.profiles)==null?void 0:Ge.full_name)||pe.user_email||"Unknown",email:((Pe=pe.profiles)==null?void 0:Pe.email)||pe.user_email}}))}catch(te){console.error("Error fetching collaborators:",te)}})()},[n,r.id]);const j=D=>{D.preventDefault(),a({title:c,amount:parseFloat(g),type:v,date:S,sharedWithCollaboratorIds:C?N:void 0}),e()},X=D=>{U(te=>te.includes(D)?te.filter(de=>de!==D):[...te,D])};return Y?_.jsx(Qt,{isOpen:n,onClose:()=>L(!1),title:"Delete Financial Record",children:_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-stone-600",children:"Are you sure you want to delete this financial record?"}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:()=>L(!1),children:"Cancel"}),_.jsx(Se,{variant:"danger",onClick:()=>{l(),e()},children:"Delete"})]})]})}):_.jsx(Qt,{isOpen:n,onClose:e,title:"Edit Financial Record",children:_.jsxs("form",{onSubmit:j,className:"space-y-4",children:[_.jsx(tt,{label:"Title",value:c,onChange:D=>h(D.target.value)}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("div",{className:"flex-1",children:_.jsx(tt,{label:"Amount",type:"number",value:g,onChange:D=>p(D.target.value)})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Type"}),_.jsxs("select",{value:v,onChange:D=>E(D.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"EXPENSE",children:"Expense"}),_.jsx("option",{value:"GIFT",children:"Gift"}),_.jsx("option",{value:"OWED",children:"Owed"}),_.jsx("option",{value:"LENT",children:"Lent"})]})]})]}),_.jsx(tt,{label:"Date",type:"date",value:S,onChange:D=>b(D.target.value)}),_.jsxs("div",{className:"pt-4 border-t border-stone-100",children:[_.jsx(Xs,{checked:C,onChange:x,label:"Share with Collaborators?"}),C&&O.length>0&&_.jsxs("div",{className:"mt-3 pl-[52px]",children:[_.jsx("p",{className:"text-xs font-bold text-stone-500 uppercase mb-2",children:"Select Collaborators"}),_.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:O.map(D=>_.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-colors ${N.includes(D.id)?"bg-indigo-100 border-2 border-indigo-300":"bg-stone-50 border border-stone-200 hover:border-indigo-200"}`,children:[_.jsx("input",{type:"checkbox",checked:N.includes(D.id),onChange:()=>X(D.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),_.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:D.name[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:D.name}),D.email&&_.jsx("p",{className:"text-xs text-stone-500",children:D.email})]})]},D.id))})]}),C&&O.length===0&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"No accepted collaborators yet."})]}),_.jsxs("div",{className:"flex justify-between pt-4",children:[_.jsx(Se,{variant:"danger",onClick:()=>L(!0),type:"button",children:"Delete"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",children:"Save"})]})]})]})})},bS=({person:n,currentUser:e,initialTab:i,onBack:r,onUpdatePerson:a,onDeletePerson:l,onAddTodo:c,onUpdateTodo:h,onDeleteTodo:g,onToggleTodo:p,onAddHealth:v,onUpdateHealth:E,onDeleteHealth:S,onAddNote:b,onUpdateNote:C,onDeleteNote:x,onAddFinance:N,onUpdateFinance:U,onDeleteFinance:O,onUploadAvatar:M,onShareRecord:Y,onUnshareRecord:L,onLinkToUser:j,onSendCollaborationRequest:X})=>{const[re,D]=ee.useState(i||xe.PROFILE),[te,de]=ee.useState(!1),[ye,pe]=ee.useState(!1);ee.useEffect(()=>{i&&D(i)},[i]);const[Ge,Pe]=ee.useState(!1),[z,ne]=ee.useState(null),[J,V]=ee.useState(!1),[B,A]=ee.useState(null),[P,$]=ee.useState(null),[W,oe]=ee.useState(null),[le,ve]=ee.useState(null),Ae=[{id:xe.PROFILE,label:"Profile",icon:"face"},{id:xe.HEALTH,label:"Health",icon:"monitor_heart"},{id:xe.TODO,label:"Todos",icon:"check_circle"},{id:xe.FINANCE,label:"Finance",icon:"account_balance_wallet"},{id:xe.NOTE,label:"Notes",icon:"edit_note"}],Te=ie=>{ne(ie),Pe(!0)},Oe=()=>{l(n.id),r()},nt=ie=>{switch(ie){case"HIGH":return"bg-red-400";case"MEDIUM":return"bg-amber-400";case"LOW":return"bg-green-400";default:return"bg-stone-300"}};return _.jsx("div",{className:"max-w-4xl mx-auto pb-20",children:_.jsxs("div",{className:"sticky top-0 bg-cream/95 backdrop-blur-md z-10 pt-4 pb-2 mb-4 border-b border-stone-100",children:[_.jsxs("button",{onClick:r,className:"flex items-center text-stone-500 hover:text-stone-800 mb-4 text-sm font-semibold",children:[_.jsx(Re,{name:"arrow_back",className:"text-lg mr-1"})," Back to Dashboard"]}),_.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[_.jsxs("div",{className:"relative group",children:[_.jsx(Bs,{src:n.avatarUrl,alt:n.name,size:"w-32 h-32",className:`border-4 border-white shadow-lg ${te?"opacity-50":""}`}),te?_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-800"})}):_.jsxs("label",{className:"absolute inset-0 flex items-center justify-center bg-black/40 text-white opacity-0 group-hover:opacity-100 rounded-full cursor-pointer transition-opacity",children:[_.jsx(Re,{name:"photo_camera"}),_.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:async ie=>{if(ie.target.files&&ie.target.files[0]){de(!0);try{await M(n.id,ie.target.files[0])}catch(yt){console.error("Upload failed:",yt),alert("Failed to upload image. Please try again.")}finally{de(!1)}}}})]})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("h1",{className:"text-3xl font-bold text-stone-800",children:n.name}),_.jsx("button",{onClick:()=>V(!0),className:"text-stone-400 hover:text-stone-600",children:_.jsx(Re,{name:"edit",className:"text-xl"})})]}),_.jsx("p",{className:"text-stone-500 text-lg",children:n.relation})]})]}),_.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:Ae.map(ie=>_.jsxs("button",{onClick:()=>D(ie.id),className:`flex items-center gap-2 px-6 py-3 rounded-full font-medium transition-all whitespace-nowrap ${re===ie.id?"bg-stone-800 text-white shadow-md":"bg-white text-stone-600 hover:bg-stone-100"}`,children:[_.jsx(Re,{name:ie.icon}),ie.label]},ie.id))}),_.jsxs("div",{className:"mt-8",children:[re===xe.PROFILE&&_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs(yi,{className:"p-6",children:[_.jsx("h3",{className:"text-xs font-bold text-stone-400 uppercase tracking-wider mb-4",children:"Basic Info"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between py-2 border-b border-stone-100",children:[_.jsx("span",{className:"text-stone-500",children:"Relation"}),_.jsx("span",{className:"font-medium text-stone-800",children:n.relation})]}),_.jsxs("div",{className:"flex justify-between py-2 border-b border-stone-100",children:[_.jsx("span",{className:"text-stone-500",children:"Birthday"}),_.jsx("span",{className:"font-medium text-stone-800",children:n.birthday||"Not set"})]})]})]}),_.jsxs(yi,{className:"p-6 bg-indigo-50 border-indigo-100",children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsx("h3",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wider",children:"Shared With"}),_.jsx("button",{onClick:()=>pe(!0),className:"text-indigo-600 text-sm font-medium hover:underline",children:"Manage"})]}),_.jsx("div",{className:"flex -space-x-2 mb-4",children:n.collaborators.length>0?n.collaborators.map((ie,yt)=>_.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-200 border-2 border-white flex items-center justify-center text-xs font-bold text-indigo-700",title:ie,children:ie[0]},yt)):_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-dashed border-indigo-300 flex items-center justify-center text-indigo-400",children:_.jsx(Re,{name:"add",className:"text-sm"})})}),_.jsx("p",{className:"text-sm text-indigo-800 mb-4",children:n.collaborators.length>0?`Shared with ${n.collaborators.length} others.`:"This profile is private to you."}),_.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 text-sm",children:[_.jsx(Re,{name:n.sharingPreference==="ALWAYS_SHARE"?"visibility":"visibility_off"}),_.jsx("span",{children:n.sharingPreference==="ALWAYS_SHARE"?"Always share updates":"Ask before sharing is ON"})]})]})]}),re===xe.HEALTH&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-stone-800",children:"Health Records"}),_.jsxs(Se,{variant:"primary",onClick:()=>Te(xe.HEALTH),children:[_.jsx(Re,{name:"add"})," Add Record"]})]}),n.health.length===0?_.jsxs("div",{className:"text-center py-12 bg-white rounded-3xl border border-dashed border-stone-200",children:[_.jsx("div",{className:"w-16 h-16 bg-stone-50 rounded-full flex items-center justify-center mx-auto mb-4 text-stone-300",children:_.jsx(Re,{name:"monitor_heart",className:"text-2xl"})}),_.jsx("p",{className:"text-stone-500",children:"No health records yet."})]}):n.health.map(ie=>_.jsx(yi,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>$(ie),children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{className:"flex gap-4",children:[_.jsx("div",{className:"w-12 h-12 rounded-2xl bg-rose-100 text-rose-500 flex items-center justify-center shrink-0",children:_.jsx(Re,{name:"medical_services"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-stone-800",children:ie.title}),_.jsxs("p",{className:"text-sm text-stone-500",children:[ie.date,"  ",ie.type]}),ie.notes&&_.jsx("p",{className:"mt-2 text-stone-600 text-sm bg-stone-50 p-2 rounded-lg",children:ie.notes}),ie.attachments&&ie.attachments.length>0&&_.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ie.attachments.map((yt,Rt)=>_.jsxs("a",{href:yt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-blue-50 text-blue-600 px-2 py-1 rounded text-xs hover:bg-blue-100 transition-colors",onClick:Ue=>Ue.stopPropagation(),children:[_.jsx(Re,{name:"attachment",className:"text-sm"}),_.jsxs("span",{children:["Attachment ",Rt+1]})]},Rt))})]})]}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsx(Re,{name:"chevron_right",className:"text-stone-300 group-hover:text-stone-500"})})]})},ie.id))]}),re===xe.TODO&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-stone-800",children:"Todos & Tasks"}),_.jsxs(Se,{variant:"primary",onClick:()=>Te(xe.TODO),children:[_.jsx(Re,{name:"add"})," Add Task"]})]}),n.todos.length===0?_.jsx("div",{className:"text-center py-12 bg-white rounded-3xl border border-dashed border-stone-200",children:_.jsx("p",{className:"text-stone-500",children:"No tasks yet."})}):n.todos.map(ie=>_.jsxs("div",{className:`flex items-center gap-4 p-4 bg-white rounded-2xl border transition-all ${ie.isCompleted?"border-stone-100 opacity-60":"border-stone-200 shadow-sm"}`,children:[_.jsx("button",{onClick:yt=>{yt.stopPropagation(),p(ie.id,!ie.isCompleted)},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors shrink-0 ${ie.isCompleted?"bg-green-500 border-green-500 text-white":"border-stone-300 hover:border-green-500"}`,children:ie.isCompleted&&_.jsx(Re,{name:"check",className:"text-sm"})}),_.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>A(ie),children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${nt(ie.priority)}`}),_.jsx("h4",{className:`font-medium ${ie.isCompleted?"line-through text-stone-400":"text-stone-800"}`,children:ie.title})]}),ie.description&&_.jsx("p",{className:"text-xs text-stone-500 mt-1 line-clamp-1",children:ie.description}),_.jsxs("p",{className:"text-xs text-stone-400 mt-1",children:["Due ",ie.dueDate]})]}),_.jsx("div",{className:"flex items-center gap-1",children:_.jsx("button",{onClick:()=>A(ie),className:"text-stone-400 hover:text-stone-600 p-1.5",children:_.jsx(Re,{name:"edit",className:"text-lg"})})})]},ie.id))]}),re===xe.NOTE&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-stone-800",children:"Notes & Memories"}),_.jsxs(Se,{variant:"primary",onClick:()=>Te(xe.NOTE),children:[_.jsx(Re,{name:"add"})," Add Note"]})]}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.notes.map(ie=>_.jsxs(yi,{className:"p-4 bg-yellow-50 border-yellow-100 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>oe(ie),children:[_.jsx("div",{className:"flex justify-between items-start mb-2",children:_.jsx("h4",{className:"font-bold text-stone-800",children:ie.title})}),_.jsx("p",{className:"text-stone-600 text-sm whitespace-pre-wrap line-clamp-4",children:ie.content})]},ie.id))})]}),re===xe.FINANCE&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-stone-800",children:"Financial Records"}),_.jsxs(Se,{variant:"primary",onClick:()=>Te(xe.FINANCE),children:[_.jsx(Re,{name:"add"})," Add Record"]})]}),n.financial&&n.financial.length>0?n.financial.map(ie=>_.jsx(yi,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>ve(ie),children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ie.type==="EXPENSE"?"bg-red-100 text-red-600":ie.type==="GIFT"?"bg-purple-100 text-purple-600":ie.type==="OWED"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:_.jsx(Re,{name:ie.type==="EXPENSE"?"receipt_long":ie.type==="GIFT"?"card_giftcard":ie.type==="OWED"?"arrow_downward":"arrow_upward"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-stone-800",children:ie.title}),_.jsxs("p",{className:"text-xs text-stone-500",children:[ie.date,"  ",ie.type]})]})]}),_.jsx("div",{className:"flex items-center gap-3",children:_.jsxs("span",{className:`font-bold ${ie.type==="EXPENSE"||ie.type==="LENT"?"text-red-500":"text-green-500"}`,children:[ie.type==="EXPENSE"||ie.type==="LENT"?"-":"+","$",ie.amount.toFixed(2)]})})]})},ie.id)):_.jsx("div",{className:"text-center py-12 bg-white rounded-3xl border border-dashed border-stone-200",children:_.jsx("p",{className:"text-stone-500",children:"No financial records yet."})})]})]}),_.jsx(wS,{isOpen:ye,onClose:()=>pe(!1),person:n,onUpdatePerson:a,onSendCollaborationRequest:X}),_.jsx(CS,{isOpen:Ge,onClose:()=>Pe(!1),type:re,person:n,currentUser:e,onAddTodo:c,onAddHealth:v,onAddNote:b,onAddFinance:N}),_.jsx(vS,{isOpen:J,onClose:()=>V(!1),person:n,onUpdate:a,onDelete:Oe,onLinkToUser:j}),B&&_.jsx(_S,{isOpen:!0,onClose:()=>A(null),todo:B,person:n,onUpdate:ie=>h(B.id,ie),onDelete:()=>g(B.id)}),P&&_.jsx(ES,{isOpen:!0,onClose:()=>$(null),record:P,person:n,onUpdate:ie=>E(P.id,ie),onDelete:()=>S(P.id)}),W&&_.jsx(SS,{isOpen:!0,onClose:()=>oe(null),note:W,person:n,onUpdate:ie=>C(W.id,ie),onDelete:()=>x(W.id)}),le&&_.jsx(TS,{isOpen:!0,onClose:()=>ve(null),record:le,person:n,onUpdate:ie=>U(le.id,ie),onDelete:()=>O(le.id)})]})})},wS=({isOpen:n,onClose:e,person:i,onUpdatePerson:r,onSendCollaborationRequest:a})=>{const[l,c]=ee.useState("existing"),[h,g]=ee.useState(""),[p,v]=ee.useState(""),[E,S]=ee.useState([]),[b,C]=ee.useState(!1),[x,N]=ee.useState("");ee.useEffect(()=>{n&&(async()=>{try{const{supabase:j}=await Ji(async()=>{const{supabase:te}=await Promise.resolve().then(()=>Ki);return{supabase:te}},void 0),{data:{user:X}}=await j.auth.getUser();if(!X)return;const{data:re,error:D}=await j.from("people").select("*").eq("created_by",X.id).neq("id",i.id).order("name");!D&&re&&S(re.map(te=>({id:te.id,name:te.name,relation:te.relation||"",avatarUrl:te.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${te.name}`,themeColor:te.theme_color||"bg-stone-100",birthday:te.birthday||"",email:te.email||void 0,linkedUserId:te.linked_user_id||void 0,collaborators:[],sharingPreference:te.sharing_preference||"ASK_EVERY_TIME",health:[],todos:[],financial:[],notes:[]})))}catch(j){console.error("Error fetching profiles:",j)}})()},[n,i.id]);const U=L=>{r({...i,sharingPreference:L?"ALWAYS_SHARE":"ASK_EVERY_TIME"})},O=async()=>{if(!h||!a)return;const L=E.find(j=>j.id===h);if(L){C(!0);try{L.linkedUserId?(await a(i.id,L.linkedUserId),alert("Collaboration request sent! They will see it in their collaboration requests shelf.")):L.email?(await a(i.id,void 0,L.email),alert("Email invitation sent! Once they sign up, they will see the collaboration request.")):(await a(i.id,void 0,void 0),alert("Collaboration request created. They will see it once they link their account.")),g(""),N("")}catch(j){console.error("Error sending collaboration request:",j),alert("Failed to send collaboration request. Please try again.")}finally{C(!1)}}},M=async L=>{if(L.preventDefault(),!(!p||!a)){C(!0);try{await a(i.id,void 0,p),v(""),alert("Invitation sent!")}catch(j){console.error("Error sending invitation:",j),alert("Failed to send invitation. Please try again.")}finally{C(!1)}}},Y=L=>{r({...i,collaborators:i.collaborators.filter(j=>j!==L)})};return _.jsx(Qt,{isOpen:n,onClose:e,title:`Sharing: ${i.name}`,children:_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-100",children:[_.jsx("div",{className:"flex justify-between items-center mb-2",children:_.jsx("span",{className:"font-bold text-stone-800",children:"Default Sharing Preference"})}),_.jsx("p",{className:"text-xs text-stone-500 mb-4",children:"When adding new items, should they be shared by default?"}),_.jsx(Xs,{checked:i.sharingPreference==="ALWAYS_SHARE",onChange:U,label:i.sharingPreference==="ALWAYS_SHARE"?"Always Share New Items":"Ask Me Every Time"})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-stone-700 mb-3",children:"Current Collaborators"}),_.jsxs("div",{className:"space-y-2",children:[i.collaborators.length===0&&_.jsx("p",{className:"text-sm text-stone-400 italic",children:"No one else has access yet."}),i.collaborators.map(L=>_.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-stone-100 rounded-xl",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs uppercase",children:L.charAt(0)}),_.jsx("span",{className:"font-medium text-stone-700",children:L})]}),_.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>Y(L),className:"text-red-400 hover:text-red-600 hover:bg-red-50",children:"Remove"})]},L))]})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-stone-700 mb-3",children:"Invite Kith / Kin"}),_.jsxs("div",{className:"flex gap-2 mb-4 border-b border-stone-200",children:[_.jsx("button",{type:"button",onClick:()=>c("existing"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${l==="existing"?"border-indigo-500 text-indigo-600":"border-transparent text-stone-500 hover:text-stone-700"}`,children:"Existing Profiles"}),_.jsx("button",{type:"button",onClick:()=>c("new"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${l==="new"?"border-indigo-500 text-indigo-600":"border-transparent text-stone-500 hover:text-stone-700"}`,children:"New User"})]}),l==="existing"&&_.jsx("div",{className:"space-y-3",children:E.length===0?_.jsx("p",{className:"text-sm text-stone-400 italic",children:"No other profiles available. Create more profiles to invite them."}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Select Profile"}),_.jsxs("select",{value:h,onChange:L=>g(L.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"",children:"Choose a profile..."}),E.map(L=>_.jsxs("option",{value:L.id,children:[L.name," (",L.relation,")"]},L.id))]})]}),h&&_.jsx("div",{className:"p-3 bg-indigo-50 border border-indigo-100 rounded-xl text-sm",children:(()=>{const L=E.find(j=>j.id===h);return L!=null&&L.linkedUserId?_.jsx("p",{className:"text-indigo-700",children:" This profile is linked to an account. They will receive a collaboration request in their shelf."}):L!=null&&L.email?_.jsxs("p",{className:"text-indigo-700",children:[" An email invitation will be sent to ",L.email,". Once they sign up, they will see the collaboration request."]}):_.jsx("p",{className:"text-indigo-700",children:" Collaboration request will be created. They will see it once they link their account."})})()}),_.jsx(Se,{variant:"primary",onClick:O,disabled:!h||b,className:"w-full",children:b?"Sharing...":"Share"})]})}),l==="new"&&_.jsxs("form",{onSubmit:M,className:"space-y-3",children:[_.jsx(tt,{placeholder:"email@example.com",value:p,onChange:L=>v(L.target.value),type:"email"}),_.jsx(Se,{type:"submit",variant:"primary",disabled:!p||b,className:"w-full",children:b?"Sending...":"Send Email Invitation"}),_.jsx("p",{className:"text-xs text-stone-400",children:"They will receive an email to join your circle."})]})]})]})})},CS=({isOpen:n,onClose:e,type:i,person:r,currentUser:a,onAddTodo:l,onAddHealth:c,onAddNote:h,onAddFinance:g})=>{if(!i)return null;const[p,v]=ee.useState(""),[E,S]=ee.useState(new Date().toISOString().split("T")[0]),[b,C]=ee.useState(""),[x,N]=ee.useState(""),[U,O]=ee.useState("EXPENSE"),[M,Y]=ee.useState("OTHER"),[L,j]=ee.useState("MEDIUM"),[X,re]=ee.useState(""),[D,te]=ee.useState(r.sharingPreference==="ALWAYS_SHARE"),[de,ye]=ee.useState([]),[pe,Ge]=ee.useState([]),[Pe,z]=ee.useState([]);ee.useEffect(()=>{n&&(async()=>{try{const{supabase:A}=await Ji(async()=>{const{supabase:W}=await Promise.resolve().then(()=>Ki);return{supabase:W}},void 0),{data:P,error:$}=await A.from("person_shares").select("id, user_id, user_email, profiles(full_name, email)").eq("person_id",r.id).not("user_id","is",null);!$&&P&&Ge(P.map(W=>{var oe,le;return{id:W.id,name:((oe=W.profiles)==null?void 0:oe.full_name)||W.user_email||"Unknown",email:((le=W.profiles)==null?void 0:le.email)||W.user_email}}))}catch(A){console.error("Error fetching collaborators:",A)}})()},[n,r.id]),Fa.useEffect(()=>{n&&(v(""),C(""),N(""),O("EXPENSE"),Y("OTHER"),j("MEDIUM"),re(""),S(new Date().toISOString().split("T")[0]),te(r.sharingPreference==="ALWAYS_SHARE"),ye([]),z([]))},[n,r.sharingPreference]);const ne=()=>{if(!p)return;const B=D?de:void 0;i===xe.TODO?l(r.id,p,E,L,X,B):i===xe.HEALTH?c(r.id,p,E,b,M,Pe,B):i===xe.NOTE?h(r.id,p,b,B):i===xe.FINANCE&&g(r.id,p,parseFloat(x),U,E,B),e()},J=B=>{ye(A=>A.includes(B)?A.filter(P=>P!==B):[...A,B])},V=()=>{switch(i){case xe.TODO:return"Add New Task";case xe.HEALTH:return"Add Health Record";case xe.NOTE:return"Create Note";case xe.FINANCE:return"Add Expense/Gift";default:return"Add Item"}};return _.jsx(Qt,{isOpen:n,onClose:e,title:V(),children:_.jsxs("div",{className:"space-y-4",children:[_.jsx(tt,{label:"Title",value:p,onChange:B=>v(B.target.value),placeholder:"e.g. Buy Vitamins",autoFocus:!0}),(i===xe.TODO||i===xe.HEALTH||i===xe.FINANCE)&&_.jsx(tt,{label:i===xe.TODO?"Due Date":"Date",type:"date",value:E,onChange:B=>S(B.target.value)}),i===xe.TODO&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Priority"}),_.jsxs("select",{value:L,onChange:B=>j(B.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"LOW",children:"Low"}),_.jsx("option",{value:"MEDIUM",children:"Medium"}),_.jsx("option",{value:"HIGH",children:"High"})]})]}),_.jsx(Vs,{label:"Description (Optional)",value:X,onChange:B=>re(B.target.value),placeholder:"Add more details..."})]}),i===xe.FINANCE&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("div",{className:"flex-1",children:_.jsx(tt,{label:"Amount",type:"number",value:x,onChange:B=>N(B.target.value),placeholder:"0.00"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Type"}),_.jsxs("select",{value:U,onChange:B=>O(B.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"EXPENSE",children:"Expense"}),_.jsx("option",{value:"GIFT",children:"Gift"}),_.jsx("option",{value:"OWED",children:"Owed"}),_.jsx("option",{value:"LENT",children:"Lent"})]})]})]}),i===xe.HEALTH&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Type"}),_.jsxs("select",{value:M,onChange:B=>Y(B.target.value),className:"w-full p-3 bg-stone-50 border border-stone-200 rounded-xl text-sm outline-none focus:border-stone-400 transition-colors",children:[_.jsx("option",{value:"CHECKUP",children:"Checkup"}),_.jsx("option",{value:"MEDICATION",children:"Medication"}),_.jsx("option",{value:"VACCINE",children:"Vaccine"}),_.jsx("option",{value:"OTHER",children:"Other"})]})]}),_.jsx(Vs,{label:"Notes",value:b,onChange:B=>C(B.target.value),placeholder:"Enter details..."})]}),i===xe.NOTE&&_.jsx(Vs,{label:"Content",value:b,onChange:B=>C(B.target.value),placeholder:"Enter details..."}),i===xe.HEALTH&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1.5",children:"Attachments"}),_.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Pe.map((B,A)=>_.jsxs("div",{className:"bg-stone-100 px-2 py-1 rounded text-xs flex items-center gap-1",children:[_.jsx("span",{className:"truncate max-w-[150px]",children:B.name}),_.jsx("button",{onClick:()=>z(Pe.filter((P,$)=>$!==A)),className:"text-stone-400 hover:text-stone-600",children:_.jsx(Re,{name:"close",className:"text-sm"})})]},A))}),_.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1.5 bg-stone-50 border border-stone-200 rounded-lg text-sm text-stone-600 hover:bg-stone-100 transition-colors",children:[_.jsx(Re,{name:"attach_file"}),_.jsx("span",{children:"Attach Files"}),_.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:B=>{B.target.files&&z([...Pe,...Array.from(B.target.files)])}})]})]}),_.jsxs("div",{className:"pt-4 border-t border-stone-100",children:[_.jsx(Xs,{checked:D,onChange:te,label:"Share with Collaborators?"}),D&&pe.length>0&&_.jsxs("div",{className:"mt-3 pl-[52px]",children:[_.jsx("p",{className:"text-xs font-bold text-stone-500 uppercase mb-2",children:"Select Collaborators"}),_.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:pe.map(B=>_.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-colors ${de.includes(B.id)?"bg-indigo-100 border-2 border-indigo-300":"bg-stone-50 border border-stone-200 hover:border-indigo-200"}`,children:[_.jsx("input",{type:"checkbox",checked:de.includes(B.id),onChange:()=>J(B.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),_.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs",children:B.name[0].toUpperCase()}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-stone-800",children:B.name}),B.email&&_.jsx("p",{className:"text-xs text-stone-500",children:B.email})]})]},B.id))})]}),D&&pe.length===0&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"No accepted collaborators yet. Add collaborators from the profile sharing settings."}),!D&&_.jsx("p",{className:"text-xs text-stone-400 mt-2 pl-[52px]",children:"Only you will see this."})]}),_.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[_.jsx(Se,{variant:"ghost",onClick:e,children:"Cancel"}),_.jsx(Se,{variant:"primary",onClick:ne,disabled:!p,children:"Save Item"})]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AS,xS;function RS(){return{geminiUrl:AS,vertexUrl:xS}}function NS(n,e,i,r){var a,l;if(!(n!=null&&n.baseUrl)){const c=RS();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zn{}function ae(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(r,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(n,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(i))n[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(l+1),i[p])}else for(const p of g)f(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];f(g[0],e.slice(l+1),i);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],a=n[r];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[r]=i}function d(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return i;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(r+1),i)):i}else return i}else n=n[a]}return n}catch(r){if(r instanceof TypeError)return i;throw r}}function IS(n,e){for(const[i,r]of Object.entries(e)){const a=i.split("."),l=r.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Vc(n,a,l,0,c)}}function Vc(n,e,i,r,a){if(r>=e.length||typeof n!="object"||n===null)return;const l=e[r];if(l.endsWith("[]")){const c=l.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Vc(g,e,i,r+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const E=[];for(const S of i.slice(r))S==="*"?E.push(p):E.push(S);f(c,E,v)}for(const p of h)delete c[p]}}else{const c=n;l in c&&Vc(c[l],e,i,r+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MS(n){const e={},i=d(n,["operationName"]);i!=null&&f(e,["operationName"],i);const r=d(n,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function DS(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],kS(c)),e}function US(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],PS(c)),e}function kS(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>OS(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function PS(n){const e={},i=d(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>LS(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function OS(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],zS(i)),e}function LS(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],FS(i)),e}function qS(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function HS(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function GS(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],BS(c)),e}function BS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function $y(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],VS(c)),e}function VS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function zS(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],md(r));const a=d(n,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function FS(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],md(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vm;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vm||(Vm={}));var zm;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(zm||(zm={}));var Fm;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Fm||(Fm={}));var Je;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Je||(Je={}));var $m;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})($m||($m={}));var jm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jm||(jm={}));var Jm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Jm||(Jm={}));var Ym;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ym||(Ym={}));var Km;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Km||(Km={}));var Xm;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(Xm||(Xm={}));var Qm;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Qm||(Qm={}));var Wm;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Wm||(Wm={}));var Zm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Zm||(Zm={}));var eg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(eg||(eg={}));var tg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(tg||(tg={}));var ng;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ng||(ng={}));var ig;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ig||(ig={}));var sg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(sg||(sg={}));var rg;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rg||(rg={}));var $a;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($a||($a={}));var og;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(og||(og={}));var ag;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ag||(ag={}));var lg;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lg||(lg={}));var zc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zc||(zc={}));var ug;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ug||(ug={}));var cg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cg||(cg={}));var dg;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(dg||(dg={}));var fg;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(fg||(fg={}));var hg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(hg||(hg={}));var pg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pg||(pg={}));var mg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(mg||(mg={}));var gg;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(gg||(gg={}));var yg;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(yg||(yg={}));var vg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(vg||(vg={}));var _g;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_g||(_g={}));var Eg;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Eg||(Eg={}));var Sg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Sg||(Sg={}));var Tg;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tg||(Tg={}));var bg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(bg||(bg={}));var wg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(wg||(wg={}));var Cg;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Cg||(Cg={}));var Ag;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Ag||(Ag={}));var xg;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xg||(xg={}));var Rg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Rg||(Rg={}));var Ng;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ng||(Ng={}));var Ig;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Ig||(Ig={}));var Mg;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Mg||(Mg={}));var Dg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Dg||(Dg={}));var Ug;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ug||(Ug={}));var kg;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kg||(kg={}));var Pg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Pg||(Pg={}));var Og;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Og||(Og={}));var Lg;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Lg||(Lg={}));var qg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(qg||(qg={}));var Gs;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Gs||(Gs={}));class Fc{constructor(e){const i={};for(const r of e.headers.entries())i[r[0]]=r[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wr{get text(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[b,C]of Object.entries(S))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&E.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,b]of Object.entries(E))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,r,a,l,c,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,r,a,l,c,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Hg{}class Gg{}class $S{}class jS{}class JS{}class YS{}class Bg{}class Vg{}class zg{}class KS{}class ja{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new ja;let a;const l=e;return i?a=US(l):a=DS(l),Object.assign(r,a),r}}class Fg{}class $g{}class jg{}class Jg{}class XS{}class QS{}class WS{}class gd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new gd,l=GS(e);return Object.assign(r,l),r}}class ZS{}class eT{}class tT{}class Yg{}class nT{get text(){var e,i,r;let a="",l=!1;const c=[];for(const h of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,r;let a="";const l=[];for(const c of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class iT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class yd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new yd,l=$y(e);return Object.assign(r,l),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function He(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jy(n,e){const i=He(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Jy(n){return Array.isArray(n)?n.map(e=>Ja(e)):[Ja(n)]}function Ja(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Yy(n){const e=Ja(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ky(n){const e=Ja(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Xy(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Kg(e)):[Kg(n)]}function $c(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Xg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Qg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function xt(n){if(n==null)throw new Error("ContentUnion is required");return $c(n)?n:{role:"user",parts:Xy(n)}}function vd(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const r=xt(i);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const i=xt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>xt(i)):[xt(e)]}function un(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Xg(n)||Qg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xt(n)]}const e=[],i=[],r=$c(n[0]);for(const a of n){const l=$c(a);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Xg(a)||Qg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return r||e.push({role:"user",parts:Xy(i)}),e}function sT(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(r=>r!=="null");if(i.length===1)e.type=Object.values(Je).includes(i[0].toUpperCase())?i[0].toUpperCase():Je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of i)e.anyOf.push({type:Object.values(Je).includes(r.toUpperCase())?r.toUpperCase():Je.TYPE_UNSPECIFIED})}}function zs(n){const e={},i=["items"],r=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&sT(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Je).includes(h.toUpperCase())?h.toUpperCase():Je.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=zs(h);else if(r.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(zs(p))}e[c]=g}else if(a.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=zs(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function _d(n){return zs(n)}function Ed(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Sd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Qs(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zs(e.response));return n}function Ws(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function rT(n,e,i,r=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Fn(n,e){if(typeof e!="string")throw new Error("name must be a string");return rT(n,e,"cachedContents")}function Qy(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ei(n){return md(n)}function oT(n){return n!=null&&typeof n=="object"&&"name"in n}function aT(n){return n!=null&&typeof n=="object"&&"video"in n}function lT(n){return n!=null&&typeof n=="object"&&"uri"in n}function Wy(n){var e;let i;if(oT(n)&&(i=n.name),!(lT(n)&&(i=n.uri,i===void 0))&&!(aT(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Zy(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function ev(n){for(const e of["models","tunedModels","publisherModels"])if(uT(n,e))return n[e];return[]}function uT(n,e){return n!==null&&typeof n=="object"&&e in n}function cT(n,e={}){const i=n,r={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(r.responseJsonSchema=i.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function dT(n,e={}){const i=[],r=new Set;for(const a of n){const l=a.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const c=cT(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function tv(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const r=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function fT(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nv(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Zs(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function iv(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hT(n){const e={},i=d(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const r=d(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>JT(c))),f(e,["inlinedResponses"],l)}const a=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function pT(n){const e={},i=d(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const r=d(n,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const a=d(n,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function mT(n){const e={},i=d(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const r=d(n,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const a=d(n,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function qa(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["metadata","state"]);a!=null&&f(e,["state"],iv(a));const l=d(n,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(n,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(n,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(n,["metadata","output"]);return p!=null&&f(e,["dest"],hT(nv(p))),e}function jc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["state"]);a!=null&&f(e,["state"],iv(a));const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(n,["model"]);v!=null&&f(e,["model"],v);const E=d(n,["inputConfig"]);E!=null&&f(e,["src"],gT(E));const S=d(n,["outputConfig"]);S!=null&&f(e,["dest"],pT(nv(S)));const b=d(n,["completionStats"]);return b!=null&&f(e,["completionStats"],b),e}function gT(n){const e={},i=d(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const r=d(n,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const a=d(n,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function yT(n,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&f(i,["fileName"],r);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>jT(n,c))),f(i,["requests","requests"],l)}return i}function vT(n){const e={},i=d(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const r=d(n,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const a=d(n,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _T(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ET(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function ST(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function TT(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const r=d(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],bT(r));const a=d(n,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const p=d(n,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["safetyRatings"],S)}const E=d(n,["urlContextMetadata"]);return E!=null&&f(e,["urlContextMetadata"],E),e}function bT(n){const e={},i=d(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["citations"],r)}return e}function sv(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>eb(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function wT(n,e){const i={},r=d(n,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function CT(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],mT(fT(a))),i}function Wg(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],yT(n,tv(n,a)));const l=d(e,["config"]);return l!=null&&wT(l,i),i}function AT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],He(n,r));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],vT(tv(n,a)));const l=d(e,["config"]);return l!=null&&CT(l,i),i}function xT(n,e){const i={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),i}function RT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],PT(n,a));const l=d(e,["config"]);return l!=null&&xT(l,i),i}function NT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function IT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function MT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);return l!=null&&f(e,["error"],l),e}function DT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);return l!=null&&f(e,["error"],l),e}function UT(n,e){const i={},r=d(e,["contents"]);if(r!=null){let l=vd(n,r);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],kT(a,i)),IS(i,{"requests[].*":"requests[].request.*"})),i}function kT(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function PT(n,e){const i={},r=d(e,["fileName"]);r!=null&&f(i,["file_name"],r);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],UT(n,a)),i}function OT(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function LT(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qT(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HT(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],sv(xt(a)));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(r,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(r,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(r,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(r,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const U=d(e,["responseSchema"]);U!=null&&f(r,["responseSchema"],_d(U));const O=d(e,["responseJsonSchema"]);if(O!=null&&f(r,["responseJsonSchema"],O),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let ye=M;Array.isArray(ye)&&(ye=ye.map(pe=>tb(pe))),f(i,["safetySettings"],ye)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let ye=Ws(Y);Array.isArray(ye)&&(ye=ye.map(pe=>ib(Qs(pe)))),f(i,["tools"],ye)}const L=d(e,["toolConfig"]);if(i!==void 0&&L!=null&&f(i,["toolConfig"],nb(L)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=d(e,["cachedContent"]);i!==void 0&&j!=null&&f(i,["cachedContent"],Fn(n,j));const X=d(e,["responseModalities"]);X!=null&&f(r,["responseModalities"],X);const re=d(e,["mediaResolution"]);re!=null&&f(r,["mediaResolution"],re);const D=d(e,["speechConfig"]);if(D!=null&&f(r,["speechConfig"],Ed(D)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=d(e,["thinkingConfig"]);te!=null&&f(r,["thinkingConfig"],te);const de=d(e,["imageConfig"]);return de!=null&&f(r,["imageConfig"],$T(de)),r}function GT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>TT(p))),f(e,["candidates"],g)}const a=d(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function BT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function VT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Zs(n,r)),i}function zT(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function FT(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function $T(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["request","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let h=un(a);Array.isArray(h)&&(h=h.map(g=>sv(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],HT(n,c,d(i,["request"],{}))),i}function JT(n){const e={},i=d(n,["response"]);i!=null&&f(e,["response"],GT(i));const r=d(n,["error"]);return r!=null&&f(e,["error"],r),e}function YT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function KT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(n,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function XT(n){const e={},i=d(n,["config"]);return i!=null&&YT(i,e),e}function QT(n){const e={},i=d(n,["config"]);return i!=null&&KT(i,e),e}function WT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>qa(c))),f(e,["batchJobs"],l)}return e}function ZT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>jc(c))),f(e,["batchJobs"],l)}return e}function eb(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],OT(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],LT(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],_T(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const v=d(n,["thought"]);v!=null&&f(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&f(e,["thoughtSignature"],E);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function tb(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function nb(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],qT(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function ib(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],zT(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],FT(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Vn||(Vn={}));class Yi{constructor(e,i,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,r,a)}init(e,i,r){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!r||Object.keys(r).length===0?c={config:{}}:typeof r=="object"?c=Object.assign({},r):c=r,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sb extends zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Yi(Vn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Wg(this.apiClient,e),r=i._url,a=ae("{model}:batchGenerateContent",r),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=S,E.request=b}p.push(E)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const r=i?Object.assign({},i):{},a=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${a}`),r.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?r.dest=`${l.slice(0,-6)}/dest`:r.dest=`${l}_dest_${a}`;else if(c)r.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=AT(this.apiClient,e);return h=ae("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>jc(v))}else{const p=Wg(this.apiClient,e);return h=ae("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>qa(v))}}async createEmbeddingsInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RT(this.apiClient,e);return l=ae("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>qa(g))}}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=VT(this.apiClient,e);return h=ae("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>jc(v))}else{const p=BT(this.apiClient,e);return h=ae("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>qa(v))}}async cancel(e){var i,r,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=ST(this.apiClient,e);c=ae("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const g=ET(this.apiClient,e);c=ae("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=QT(e);return h=ae("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ZT(v),S=new Yg;return Object.assign(S,E),S})}else{const p=XT(e);return h=ae("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=WT(v),S=new Yg;return Object.assign(S,E),S})}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=IT(this.apiClient,e);return h=ae("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>DT(v))}else{const p=NT(this.apiClient,e);return h=ae("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>MT(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rb(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Zg(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Rb(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function ob(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let v=un(c);Array.isArray(v)&&(v=v.map(E=>Zg(E))),f(e,["contents"],v)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Zg(xt(h)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>Ib(E))),f(e,["tools"],v)}const p=d(n,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],Nb(p)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function ab(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let E=un(c);Array.isArray(E)&&(E=E.map(S=>S)),f(e,["contents"],E)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],xt(h));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>Mb(S))),f(e,["tools"],E)}const p=d(n,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function lb(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],jy(n,r));const a=d(e,["config"]);return a!=null&&ob(a,i),i}function ub(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],jy(n,r));const a=d(e,["config"]);return a!=null&&ab(a,i),i}function cb(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Fn(n,r)),i}function db(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Fn(n,r)),i}function fb(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function hb(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function pb(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function mb(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gb(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yb(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function vb(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Fn(n,r)),i}function _b(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Fn(n,r)),i}function Eb(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Sb(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Tb(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function bb(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function wb(n){const e={},i=d(n,["config"]);return i!=null&&Tb(i,e),e}function Cb(n){const e={},i=d(n,["config"]);return i!=null&&bb(i,e),e}function Ab(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function xb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function Rb(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],pb(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],mb(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],rb(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const v=d(n,["thought"]);v!=null&&f(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&f(e,["thoughtSignature"],E);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Nb(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],gb(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function Ib(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],Eb(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],Sb(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function Mb(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>yb(S))),f(e,["functionDeclarations"],E)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Db(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Ub(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function kb(n,e){const i={},r=d(e,["name"]);r!=null&&f(i,["_url","name"],Fn(n,r));const a=d(e,["config"]);return a!=null&&Db(a,i),i}function Pb(n,e){const i={},r=d(e,["name"]);r!=null&&f(i,["_url","name"],Fn(n,r));const a=d(e,["config"]);return a!=null&&Ub(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ob extends zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Yi(Vn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(i),i)}async create(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ub(this.apiClient,e);return h=ae("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=lb(this.apiClient,e);return h=ae("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=_b(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=vb(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=db(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=hb(v),S=new jg;return Object.assign(S,E),S})}else{const p=cb(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fb(v),S=new jg;return Object.assign(S,E),S})}}async update(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Pb(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=kb(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Cb(e);return h=ae("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=xb(v),S=new Jg;return Object.assign(S,E),S})}else{const p=wb(e);return h=ae("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Ab(v),S=new Jg;return Object.assign(S,E),S})}}}function ey(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],r=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function We(n){return this instanceof We?(this.v=n,this):new We(n)}function Fs(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(C){return Promise.resolve(C).then(b,E)}}function h(b,C){r[b]&&(a[b]=function(x){return new Promise(function(N,U){l.push([b,x,N,U])>1||g(b,x)})},C&&(a[b]=C(a[b])))}function g(b,C){try{p(r[b](C))}catch(x){S(l[0][3],x)}}function p(b){b.value instanceof We?Promise.resolve(b.value.v).then(v,E):S(l[0][2],b)}function v(b){g("next",b)}function E(b){g("throw",b)}function S(b,C){b(C),l.shift(),l.length&&g(l[0][0],l[0][1])}}function io(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof ey=="function"?ey(n):n[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=n[l]&&function(c){return new Promise(function(h,g){c=n[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:rv(i)}function rv(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qb(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ty(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let r=0;for(;r<i;)if(n[r].role==="user")e.push(n[r]),r++;else{const a=[];let l=!0;for(;r<i&&n[r].role==="model";)a.push(n[r]),l&&!rv(n[r])&&(l=!1),r++;l?e.push(...a):e.pop()}return e}class Hb{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Gb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Gb{constructor(e,i,r,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=r,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),qb(l)}async sendMessage(e){var i;await this.sendPromise;const r=xt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const b=p?[p]:[];this.recordHistory(r,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const r=xt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,r)}getHistory(e=!1){const i=e?ty(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var r,a;return Fs(this,arguments,function*(){var c,h,g,p;const v=[];try{for(var E=!0,S=io(e),b;b=yield We(S.next()),c=b.done,!c;E=!0){p=b.value,E=!1;const C=p;if(Lb(C)){const x=(a=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content;x!==void 0&&v.push(x)}yield yield We(C)}}catch(C){h={error:C}}finally{try{!E&&!c&&(g=S.return)&&(yield We(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(i,v)})}recordHistory(e,i,r){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...ty(r)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bb(n){const e={},i=d(n,["file"]);return i!=null&&f(e,["file"],i),e}function Vb(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function zb(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],Wy(i)),e}function Fb(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function $b(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],Wy(i)),e}function jb(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Jb(n){const e={},i=d(n,["config"]);return i!=null&&jb(i,e),e}function Yb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kb extends zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Yi(Vn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Jb(e);return l=ae("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Yb(g),v=new ZS;return Object.assign(v,p),v})}}async createInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Bb(e);return l=ae("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=Vb(g),v=new eT;return Object.assign(v,p),v})}}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$b(e);return l=ae("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zb(e);return l=ae("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Fb(g),v=new tT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ha(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Xb(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>fw(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function Qb(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Wb(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zb(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function ew(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const r=d(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const a=d(n,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(n,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const E=d(n,["presencePenalty"]);E!=null&&f(e,["presencePenalty"],E);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const b=d(n,["responseMimeType"]);b!=null&&f(e,["responseMimeType"],b);const C=d(n,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const x=d(n,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const N=d(n,["routingConfig"]);N!=null&&f(e,["routingConfig"],N);const U=d(n,["seed"]);U!=null&&f(e,["seed"],U);const O=d(n,["speechConfig"]);O!=null&&f(e,["speechConfig"],ov(O));const M=d(n,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const Y=d(n,["temperature"]);Y!=null&&f(e,["temperature"],Y);const L=d(n,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const j=d(n,["topK"]);j!=null&&f(e,["topK"],j);const X=d(n,["topP"]);if(X!=null&&f(e,["topP"],X),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tw(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function nw(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function iw(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],Sd(E));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],Xb(xt(C)));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let j=Ws(x);Array.isArray(j)&&(j=j.map(X=>pw(Qs(X)))),f(e,["setup","tools"],j)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],hw(N));const U=d(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const Y=d(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const L=d(n,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),i}function sw(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],ew(r));const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],ov(Sd(E)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],xt(C));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let j=Ws(x);Array.isArray(j)&&(j=j.map(X=>mw(Qs(X)))),f(e,["setup","tools"],j)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],N);const U=d(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const Y=d(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const L=d(n,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),i}function rw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],He(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],iw(a,i)),i}function ow(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],He(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],sw(a,i)),i}function aw(n){const e={},i=d(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function lw(n){const e={},i=d(n,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["weightedPrompts"],r)}return e}function uw(n){const e={},i=d(n,["media"]);if(i!=null){let p=Jy(i);Array.isArray(p)&&(p=p.map(v=>Ha(v))),f(e,["mediaChunks"],p)}const r=d(n,["audio"]);r!=null&&f(e,["audio"],Ha(Ky(r)));const a=d(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(n,["video"]);l!=null&&f(e,["video"],Ha(Yy(l)));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function cw(n){const e={},i=d(n,["media"]);if(i!=null){let p=Jy(i);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const r=d(n,["audio"]);r!=null&&f(e,["audio"],Ky(r));const a=d(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(n,["video"]);l!=null&&f(e,["video"],Yy(l));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function dw(n){const e={},i=d(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const r=d(n,["serverContent"]);r!=null&&f(e,["serverContent"],r);const a=d(n,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(n,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],gw(c));const h=d(n,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(n,["sessionResumptionUpdate"]);return g!=null&&f(e,["sessionResumptionUpdate"],g),e}function fw(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],Qb(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],Wb(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],Ha(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const v=d(n,["thought"]);v!=null&&f(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&f(e,["thoughtSignature"],E);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function hw(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ov(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const r=d(n,["voiceConfig"]);if(r!=null&&f(e,["voiceConfig"],r),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function pw(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],tw(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],nw(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function mw(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>Zb(S))),f(e,["functionDeclarations"],E)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function gw(n){const e={},i=d(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const r=d(n,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const a=d(n,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(n,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(n,["promptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["promptTokensDetails"],b)}const p=d(n,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["cacheTokensDetails"],b)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["responseTokensDetails"],b)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(C=>C)),f(e,["toolUsePromptTokensDetails"],b)}const S=d(n,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yw(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function vw(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const r=d(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],_w(r));const a=d(n,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const p=d(n,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),f(e,["safetyRatings"],S)}const E=d(n,["urlContextMetadata"]);return E!=null&&f(e,["urlContextMetadata"],E),e}function _w(n){const e={},i=d(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["citations"],r)}return e}function Ew(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let l=un(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function Sw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function Tw(n){const e={},i=d(n,["values"]);i!=null&&f(e,["values"],i);const r=d(n,["statistics"]);return r!=null&&f(e,["statistics"],bw(r)),e}function bw(n){const e={},i=d(n,["truncated"]);i!=null&&f(e,["truncated"],i);const r=d(n,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function rl(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>DC(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function ww(n){const e={},i=d(n,["controlType"]);i!=null&&f(e,["controlType"],i);const r=d(n,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function Cw(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Aw(n,e){const i={},r=d(n,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],xt(r));const a=d(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>dv(h))),f(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],yC(l)),i}function xw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let c=un(a);Array.isArray(c)&&(c=c.map(h=>rl(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&Cw(l),i}function Rw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let c=un(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&Aw(l,i),i}function Nw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const a=d(n,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function Iw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function Mw(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],He(n,r)),i}function Dw(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],He(n,r)),i}function Uw(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function kw(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Pw(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const b=d(n,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const C=d(n,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const N=d(n,["addWatermark"]);e!==void 0&&N!=null&&f(e,["parameters","addWatermark"],N);const U=d(n,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const O=d(n,["editMode"]);e!==void 0&&O!=null&&f(e,["parameters","editMode"],O);const M=d(n,["baseSteps"]);return e!==void 0&&M!=null&&f(e,["parameters","editConfig","baseSteps"],M),i}function Ow(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>qC(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&Pw(c,i),i}function Lw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ol(l))),f(e,["generatedImages"],a)}return e}function qw(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Hw(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(n,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function Gw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let h=vd(n,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&qw(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],He(n,c)),i}function Bw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let c=vd(n,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&Hw(l,i),i}function Vw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(n,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function zw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Tw(c))),f(e,["embeddings"],l)}const a=d(n,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function Fw(n){const e={},i=d(n,["endpoint"]);i!=null&&f(e,["name"],i);const r=d(n,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function $w(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function jw(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Jw(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Yw(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Kw(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],rl(xt(a)));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(r,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(r,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(r,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(r,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const U=d(e,["responseSchema"]);U!=null&&f(r,["responseSchema"],_d(U));const O=d(e,["responseJsonSchema"]);if(O!=null&&f(r,["responseJsonSchema"],O),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let ye=M;Array.isArray(ye)&&(ye=ye.map(pe=>HC(pe))),f(i,["safetySettings"],ye)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let ye=Ws(Y);Array.isArray(ye)&&(ye=ye.map(pe=>jC(Qs(pe)))),f(i,["tools"],ye)}const L=d(e,["toolConfig"]);if(i!==void 0&&L!=null&&f(i,["toolConfig"],$C(L)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=d(e,["cachedContent"]);i!==void 0&&j!=null&&f(i,["cachedContent"],Fn(n,j));const X=d(e,["responseModalities"]);X!=null&&f(r,["responseModalities"],X);const re=d(e,["mediaResolution"]);re!=null&&f(r,["mediaResolution"],re);const D=d(e,["speechConfig"]);if(D!=null&&f(r,["speechConfig"],Ed(D)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const te=d(e,["thinkingConfig"]);te!=null&&f(r,["thinkingConfig"],te);const de=d(e,["imageConfig"]);return de!=null&&f(r,["imageConfig"],TC(de)),r}function Xw(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],xt(a));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(r,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&f(r,["presencePenalty"],b);const C=d(e,["frequencyPenalty"]);C!=null&&f(r,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&f(r,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const U=d(e,["responseSchema"]);U!=null&&f(r,["responseSchema"],_d(U));const O=d(e,["responseJsonSchema"]);O!=null&&f(r,["responseJsonSchema"],O);const M=d(e,["routingConfig"]);M!=null&&f(r,["routingConfig"],M);const Y=d(e,["modelSelectionConfig"]);Y!=null&&f(r,["modelConfig"],Y);const L=d(e,["safetySettings"]);if(i!==void 0&&L!=null){let z=L;Array.isArray(z)&&(z=z.map(ne=>ne)),f(i,["safetySettings"],z)}const j=d(e,["tools"]);if(i!==void 0&&j!=null){let z=Ws(j);Array.isArray(z)&&(z=z.map(ne=>dv(Qs(ne)))),f(i,["tools"],z)}const X=d(e,["toolConfig"]);i!==void 0&&X!=null&&f(i,["toolConfig"],X);const re=d(e,["labels"]);i!==void 0&&re!=null&&f(i,["labels"],re);const D=d(e,["cachedContent"]);i!==void 0&&D!=null&&f(i,["cachedContent"],Fn(n,D));const te=d(e,["responseModalities"]);te!=null&&f(r,["responseModalities"],te);const de=d(e,["mediaResolution"]);de!=null&&f(r,["mediaResolution"],de);const ye=d(e,["speechConfig"]);ye!=null&&f(r,["speechConfig"],cv(Ed(ye)));const pe=d(e,["audioTimestamp"]);pe!=null&&f(r,["audioTimestamp"],pe);const Ge=d(e,["thinkingConfig"]);Ge!=null&&f(r,["thinkingConfig"],Ge);const Pe=d(e,["imageConfig"]);return Pe!=null&&f(r,["imageConfig"],bC(Pe)),r}function ny(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let c=un(a);Array.isArray(c)&&(c=c.map(h=>rl(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],Kw(n,l,i)),i}function iy(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["contents"]);if(a!=null){let c=un(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],Xw(n,l,i)),i}function sy(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>vw(p))),f(e,["candidates"],g)}const a=d(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function ry(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const a=d(n,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(n,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(n,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(n,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function Qw(n,e){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(n,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=d(n,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=d(n,["imageSize"]);if(e!==void 0&&b!=null&&f(e,["parameters","sampleImageSize"],b),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Ww(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&f(e,["parameters","includeSafetyAttributes"],E);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const b=d(n,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const C=d(n,["outputMimeType"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","mimeType"],C);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const N=d(n,["addWatermark"]);e!==void 0&&N!=null&&f(e,["parameters","addWatermark"],N);const U=d(n,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const O=d(n,["imageSize"]);e!==void 0&&O!=null&&f(e,["parameters","sampleImageSize"],O);const M=d(n,["enhancePrompt"]);return e!==void 0&&M!=null&&f(e,["parameters","enhancePrompt"],M),i}function Zw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&Qw(l,i),i}function eC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&Ww(l,i),i}function tC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>hC(c))),f(e,["generatedImages"],l)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],lv(a)),e}function nC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ol(c))),f(e,["generatedImages"],l)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],uv(a)),e}function iC(n,e){const i={},r=d(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(n,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(n,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],al(v));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(b=>rA(b))),f(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function sC(n,e){const i={},r=d(n,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(n,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(n,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(n,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&f(e,["parameters","pubsubTopic"],E);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const b=d(n,["enhancePrompt"]);e!==void 0&&b!=null&&f(e,["parameters","enhancePrompt"],b);const C=d(n,["generateAudio"]);e!==void 0&&C!=null&&f(e,["parameters","generateAudio"],C);const x=d(n,["lastFrame"]);e!==void 0&&x!=null&&f(e,["instances[0]","lastFrame"],gn(x));const N=d(n,["referenceImages"]);if(e!==void 0&&N!=null){let M=N;Array.isArray(M)&&(M=M.map(Y=>oA(Y))),f(e,["instances[0]","referenceImages"],M)}const U=d(n,["mask"]);e!==void 0&&U!=null&&f(e,["instances[0]","mask"],sA(U));const O=d(n,["compressionQuality"]);return e!==void 0&&O!=null&&f(e,["parameters","compressionQuality"],O),i}function rC(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],uC(c)),e}function oC(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],cC(c)),e}function aC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],al(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],fv(c));const h=d(e,["source"]);h!=null&&dC(h,i);const g=d(e,["config"]);return g!=null&&iC(g,i),i}function lC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],gn(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],hv(c));const h=d(e,["source"]);h!=null&&fC(h,i);const g=d(e,["config"]);return g!=null&&sC(g,i),i}function uC(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>mC(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function cC(n){const e={},i=d(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>gC(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function dC(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],al(a));const l=d(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],fv(l)),i}function fC(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],gn(a));const l=d(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],hv(l)),i}function hC(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],wC(i));const r=d(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const a=d(n,["_self"]);return a!=null&&f(e,["safetyAttributes"],lv(a)),e}function ol(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],av(i));const r=d(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const a=d(n,["_self"]);a!=null&&f(e,["safetyAttributes"],uv(a));const l=d(n,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function pC(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["mask"],av(i));const r=d(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function mC(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],nA(i)),e}function gC(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],iA(i)),e}function yC(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const r=d(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const a=d(n,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(n,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const E=d(n,["presencePenalty"]);E!=null&&f(e,["presencePenalty"],E);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const b=d(n,["responseMimeType"]);b!=null&&f(e,["responseMimeType"],b);const C=d(n,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const x=d(n,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const N=d(n,["routingConfig"]);N!=null&&f(e,["routingConfig"],N);const U=d(n,["seed"]);U!=null&&f(e,["seed"],U);const O=d(n,["speechConfig"]);O!=null&&f(e,["speechConfig"],cv(O));const M=d(n,["stopSequences"]);M!=null&&f(e,["stopSequences"],M);const Y=d(n,["temperature"]);Y!=null&&f(e,["temperature"],Y);const L=d(n,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const j=d(n,["topK"]);j!=null&&f(e,["topK"],j);const X=d(n,["topP"]);if(X!=null&&f(e,["topP"],X),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vC(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],He(n,r)),i}function _C(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],He(n,r)),i}function EC(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function SC(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function TC(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bC(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);r!=null&&f(e,["imageSize"],r);const a=d(n,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const l=d(n,["outputCompressionQuality"]);return l!=null&&f(e,["imageOutputOptions","compressionQuality"],l),e}function wC(n){const e={},i=d(n,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ei(i));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function av(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],Ei(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function al(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ei(i));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function gn(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],Ei(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function CC(n,e,i){const r={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],Zy(n,h)),r}function AC(n,e,i){const r={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],Zy(n,h)),r}function xC(n,e){const i={},r=d(e,["config"]);return r!=null&&CC(n,r,i),i}function RC(n,e){const i={},r=d(e,["config"]);return r!=null&&AC(n,r,i),i}function NC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let l=ev(a);Array.isArray(l)&&(l=l.map(c=>Jc(c))),f(e,["models"],l)}return e}function IC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let l=ev(a);Array.isArray(l)&&(l=l.map(c=>Yc(c))),f(e,["models"],l)}return e}function MC(n){const e={},i=d(n,["maskMode"]);i!=null&&f(e,["maskMode"],i);const r=d(n,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const a=d(n,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Jc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);a!=null&&f(e,["description"],a);const l=d(n,["version"]);l!=null&&f(e,["version"],l);const c=d(n,["_self"]);c!=null&&f(e,["tunedModelInfo"],JC(c));const h=d(n,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(n,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(n,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=d(n,["temperature"]);v!=null&&f(e,["temperature"],v);const E=d(n,["maxTemperature"]);E!=null&&f(e,["maxTemperature"],E);const S=d(n,["topP"]);S!=null&&f(e,["topP"],S);const b=d(n,["topK"]);b!=null&&f(e,["topK"],b);const C=d(n,["thinking"]);return C!=null&&f(e,["thinking"],C),e}function Yc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);a!=null&&f(e,["description"],a);const l=d(n,["versionId"]);l!=null&&f(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>Fw(S))),f(e,["endpoints"],E)}const h=d(n,["labels"]);h!=null&&f(e,["labels"],h);const g=d(n,["_self"]);g!=null&&f(e,["tunedModelInfo"],YC(g));const p=d(n,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=d(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),f(e,["checkpoints"],E)}return e}function DC(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],$w(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],jw(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],yw(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const v=d(n,["thought"]);v!=null&&f(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&f(e,["thoughtSignature"],E);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function UC(n){const e={},i=d(n,["productImage"]);return i!=null&&f(e,["image"],gn(i)),e}function kC(n,e){const i={},r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(n,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const b=d(n,["labels"]);return e!==void 0&&b!=null&&f(e,["labels"],b),i}function PC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["source"]);a!=null&&LC(a,i);const l=d(e,["config"]);return l!=null&&kC(l,i),i}function OC(n){const e={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>ol(a))),f(e,["generatedImages"],r)}return e}function LC(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],gn(a));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>UC(h))),f(e,["instances[0]","productImages"],c)}return i}function qC(n){const e={},i=d(n,["referenceImage"]);i!=null&&f(e,["referenceImage"],gn(i));const r=d(n,["referenceId"]);r!=null&&f(e,["referenceId"],r);const a=d(n,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(n,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],MC(l));const c=d(n,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],ww(c));const h=d(n,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(n,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function lv(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const a=d(n,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function uv(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const a=d(n,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function HC(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function GC(n){const e={},i=d(n,["image"]);return i!=null&&f(e,["image"],gn(i)),e}function BC(n,e){const i={},r=d(n,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const a=d(n,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(n,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function VC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["source"]);a!=null&&FC(a,i);const l=d(e,["config"]);return l!=null&&BC(l,i),i}function zC(n){const e={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>pC(a))),f(e,["generatedMasks"],r)}return e}function FC(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],gn(a));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],GC(l)),i}function cv(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const r=d(n,["voiceConfig"]);if(r!=null&&f(e,["voiceConfig"],r),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $C(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],Jw(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function jC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],EC(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],SC(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function dv(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>Yw(S))),f(e,["functionDeclarations"],E)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function JC(n){const e={},i=d(n,["baseModel"]);i!=null&&f(e,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function YC(n){const e={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function KC(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function XC(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function QC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","name"],He(n,r));const a=d(e,["config"]);return a!=null&&KC(a,i),i}function WC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["config"]);return a!=null&&XC(a,i),i}function ZC(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(n,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(n,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(n,["labels"]);e!==void 0&&E!=null&&f(e,["labels"],E);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const b=d(n,["mode"]);return e!==void 0&&b!=null&&f(e,["parameters","mode"],b),i}function eA(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],He(n,r));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],gn(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&ZC(c,i),i}function tA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ol(l))),f(e,["generatedImages"],a)}return e}function nA(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],Ei(r));const a=d(n,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function iA(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],Ei(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function sA(n){const e={},i=d(n,["image"]);i!=null&&f(e,["_self"],gn(i));const r=d(n,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function rA(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],al(i));const r=d(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function oA(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],gn(i));const r=d(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function fv(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["videoBytes"]);r!=null&&f(e,["encodedVideo"],Ei(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function hv(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],Ei(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aA(n,e){const i={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),i}function lA(n){const e={},i=d(n,["config"]);return i!=null&&aA(i,e),e}function uA(n,e){const i={},r=d(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),i}function cA(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const r=d(n,["config"]);return r!=null&&uA(r,e),e}function dA(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function fA(n,e){const i={},r=d(n,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(n,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function hA(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],mA(c)),e}function pA(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const r=d(n,["fileName"]);r!=null&&f(e,["fileName"],r);const a=d(n,["config"]);return a!=null&&fA(a,e),e}function mA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function gA(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function yA(n){const e={},i=d(n,["config"]);return i!=null&&gA(i,e),e}function vA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function pv(n,e){const i={},r=d(n,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function _A(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const r=d(n,["config"]);return r!=null&&pv(r,e),e}function EA(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SA="Content-Type",TA="X-Server-Timeout",bA="User-Agent",Kc="x-goog-api-client",wA="1.31.0",CA=`google-genai-sdk/${wA}`,AA="v1beta1",xA="v1beta",oy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class RA{constructor(e){var i,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:AA,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:xA,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,r){const a=[this.getRequestUrlInternal(i)];return r&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,r);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const r=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?r[a]=Object.assign(Object.assign({},r[a]),l):l!==void 0&&(r[a]=l);return r}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,r,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&NA(e,i.extraBody),e.headers=await this.getHeadersInternal(i,r),e}async unaryApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await ay(a),new Fc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await ay(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var i;return Fs(this,arguments,function*(){const a=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:g}=yield We(a.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(g,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),b=S.status,C=S.code,x=`got status: ${b}. ${JSON.stringify(E)}`;if(C>=400&&C<600)throw new sl({message:x,status:C})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(oy);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield We(new Fc(S)),c=c.slice(v[0].length),v=c.match(oy)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},i=CA+" "+this.clientOptions.userAgentExtra;return e[bA]=i,e[Kc]=i,e[SA]="application/json",e}async getHeadersInternal(e,i){const r=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))r.append(a,l);e.timeout&&e.timeout>0&&r.append(TA,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,i),r}getFileName(e){var i;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(i=r.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),r}async uploadFile(e,i){var r;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),v=ae("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,p,g,i==null?void 0:i.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,i,r){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=r==null?void 0:r.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),E={};r!=null&&pv(r,E);const S=await this.fetchUploadUrl(p,h,g,v,E,r==null?void 0:r.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,r,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${r}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function ay(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(r);throw i>=400&&i<600?new sl({message:a,status:i}):new Error(a)}}function NA(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=r(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=r(i,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA="mcp_used/unknown";let MA=!1;function mv(n){for(const e of n)if(DA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return MA}function gv(n){var e;const i=(e=n[Kc])!==null&&e!==void 0?e:"";n[Kc]=(i+` ${IA}`).trimStart()}function DA(n){return n!==null&&typeof n=="object"&&n instanceof Td}function UA(n,e=100){return Fs(this,arguments,function*(){let r,a=0;for(;a<e;){const l=yield We(n.listTools({cursor:r}));for(const c of l.tools)yield yield We(c),a++;if(!l.nextCursor)break;r=l.nextCursor}})}class Td{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Td(e,i)}async initialize(){var e,i,r,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,io(UA(v))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const E=a;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){i={error:E}}finally{try{!h&&!e&&(r=g.return)&&await r.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),dT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:r.name,arguments:r.args},void 0,l);i.push({functionResponse:{name:r.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kA(n,e,i){const r=new iT;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(r,a),e(r)}class PA{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r}async connect(e){var i,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=qA(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(M=>{p=M}),E=e.callbacks,S=function(){p({})},b=this.apiClient,C={onopen:S,onmessage:M=>{kA(b,E.onmessage,M)},onerror:(i=E==null?void 0:E.onerror)!==null&&i!==void 0?i:function(M){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(M){}},x=this.webSocketFactory.create(g,LA(c),C);x.connect(),await v;const O={setup:{model:He(this.apiClient,e.model)}};return x.send(JSON.stringify(O)),new OA(x,this.apiClient)}}class OA{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=lw(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=aw(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Gs.PLAY)}pause(){this.sendPlaybackControl(Gs.PAUSE)}stop(){this.sendPlaybackControl(Gs.STOP)}resetContext(){this.sendPlaybackControl(Gs.RESET_CONTEXT)}close(){this.conn.close()}}function LA(n){const e={};return n.forEach((i,r)=>{e[r]=i}),e}function qA(n){const e=new Headers;for(const[i,r]of Object.entries(n))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GA(n,e,i){const r=new nT;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(n.isVertexAI()){const c=dw(l);Object.assign(r,c)}else Object.assign(r,l);e(r)}class BA{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r,this.music=new PA(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,r,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&mv(e.config.tools)&&gv(E);const S=$A(E);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const D=this.apiClient.getApiKey();let te="BidiGenerateContent",de="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),te="BidiGenerateContentConstrained",de="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${te}?${de}=${D}`}let b=()=>{};const C=new Promise(D=>{b=D}),x=e.callbacks,N=function(){var D;(D=x==null?void 0:x.onopen)===null||D===void 0||D.call(x),b({})},U=this.apiClient,O={onopen:N,onmessage:D=>{GA(U,x.onmessage,D)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(D){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(D){}},M=this.webSocketFactory.create(v,FA(S),O);M.connect(),await C;let Y=He(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const D=this.apiClient.getProject(),te=this.apiClient.getLocation();Y=`projects/${D}/locations/${te}/`+Y}let L={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$a.AUDIO]}:e.config.responseModalities=[$a.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],X=[];for(const D of j)if(this.isCallableTool(D)){const te=D;X.push(await te.tool())}else X.push(D);X.length>0&&(e.config.tools=X);const re={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=ow(this.apiClient,re):L=rw(this.apiClient,re),delete L.config,M.send(JSON.stringify(L)),new zA(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VA={turnComplete:!0};class zA{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let r=[];try{r=un(i.turns),e.isVertexAI()||(r=r.map(a=>rl(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:r,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let r=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?r=i.functionResponses:r=[i.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(HA)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},VA),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:cw(e)}:i={realtimeInput:uw(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function FA(n){const e={};return n.forEach((i,r)=>{e[r]=i}),e}function $A(n){const e=new Headers;for(const[i,r]of Object.entries(n))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ly=10;function uy(n){var e,i,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if($s(c)){a=!0;break}if(!a)return!0;const l=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function $s(n){return"callTool"in n&&typeof n.callTool=="function"}function jA(n){var e,i,r;return(r=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>$s(a)))!==null&&r!==void 0?r:!1}function cy(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,a)=>{if($s(r))return;const l=r;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function dy(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JA extends zn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var r,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!jA(i)||uy(i.config))return await this.generateContentInternal(g);const p=cy(i);if(p.length>0){const x=p.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,E;const S=un(g.contents),b=(l=(a=(r=g.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:ly;let C=0;for(;C<b&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,N=[];for(const U of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if($s(U)){const M=await U.callTool(v.functionCalls);N.push(...M)}C++,E={role:"user",parts:N},g.contents=un(g.contents),g.contents.push(x),g.contents.push(E),dy(g.config)&&(S.push(x),S.push(E))}return dy(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var r,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),uy(i.config)){const E=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(E)}const g=cy(i);if(g.length>0){const E=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(r=i==null?void 0:i.config)===null||r===void 0?void 0:r.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(r=>{var a;let l;const c=[];if(r!=null&&r.generatedImages)for(const g of r.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:r.sdkHttpResponse},h}),this.list=async i=>{var r;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((r=c.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Yi(Vn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const r={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(r.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async i=>{let r={numberOfImages:1,mode:"upscale"};i.config&&(r=Object.assign(Object.assign({},r),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:r};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var r,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=i.video)===null||r===void 0)&&r.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,r,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>$s(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&mv(e.config.tools)){const g=(a=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),gv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,r,a;const l=new Map;for(const c of(r=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[])if($s(c)){const h=c,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,r,a;const l=(a=(r=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:ly;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,E){var S,b;return Fs(this,arguments,function*(){for(var C,x,N,U;h<l;){c&&(h++,c=!1);const L=yield We(p.processParamsMaybeAddMcpUsage(E)),j=yield We(p.generateContentStreamInternal(L)),X=[],re=[];try{for(var O=!0,M=(x=void 0,io(j)),Y;Y=yield We(M.next()),C=Y.done,!C;O=!0){U=Y.value,O=!1;const D=U;if(yield yield We(D),D.candidates&&(!((S=D.candidates[0])===null||S===void 0)&&S.content)){re.push(D.candidates[0].content);for(const te of(b=D.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(h<l&&te.functionCall){if(!te.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(te.functionCall.name)){const de=yield We(v.get(te.functionCall.name).callTool([te.functionCall]));X.push(...de)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${te.functionCall.name}`)}}}}catch(D){x={error:D}}finally{try{!O&&!C&&(N=M.return)&&(yield We(N.call(M)))}finally{if(x)throw x.error}}if(X.length>0){c=!0;const D=new Wr;D.candidates=[{content:{role:"user",parts:X}}],yield yield We(D);const te=[];te.push(...re),te.push({role:"user",parts:X});const de=un(E.contents).concat(te);E.contents=de}else break}})})(this,g,e)}async generateContentInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iy(this.apiClient,e);return h=ae("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ry(v),S=new Wr;return Object.assign(S,E),S})}else{const p=ny(this.apiClient,e);return h=ae("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=sy(v),S=new Wr;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iy(this.apiClient,e);return h=ae("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(E){return Fs(this,arguments,function*(){var S,b,C,x;try{for(var N=!0,U=io(E),O;O=yield We(U.next()),S=O.done,!S;N=!0){x=O.value,N=!1;const M=x,Y=ry(yield We(M.json()));Y.sdkHttpResponse={headers:M.headers};const L=new Wr;Object.assign(L,Y),yield yield We(L)}}catch(M){b={error:M}}finally{try{!N&&!S&&(C=U.return)&&(yield We(C.call(U)))}finally{if(b)throw b.error}}})})}else{const p=ny(this.apiClient,e);return h=ae("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Fs(this,arguments,function*(){var S,b,C,x;try{for(var N=!0,U=io(E),O;O=yield We(U.next()),S=O.done,!S;N=!0){x=O.value,N=!1;const M=x,Y=sy(yield We(M.json()));Y.sdkHttpResponse={headers:M.headers};const L=new Wr;Object.assign(L,Y),yield yield We(L)}}catch(M){b={error:M}}finally{try{!N&&!S&&(C=U.return)&&(yield We(C.call(U)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Bw(this.apiClient,e);return h=ae("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=zw(v),S=new Hg;return Object.assign(S,E),S})}else{const p=Gw(this.apiClient,e);return h=ae("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Vw(v),S=new Hg;return Object.assign(S,E),S})}}async generateImagesInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return h=ae("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=nC(v),S=new Gg;return Object.assign(S,E),S})}else{const p=Zw(this.apiClient,e);return h=ae("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=tC(v),S=new Gg;return Object.assign(S,E),S})}}async editImageInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Ow(this.apiClient,e);return l=ae("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Lw(g),v=new $S;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=eA(this.apiClient,e);return l=ae("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=tA(g),v=new jS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=PC(this.apiClient,e);return l=ae("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=OC(g),v=new JS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=VC(this.apiClient,e);return l=ae("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=zC(g),v=new YS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=_C(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const p=vC(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=RC(this.apiClient,e);return h=ae("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=IC(v),S=new Bg;return Object.assign(S,E),S})}else{const p=xC(this.apiClient,e);return h=ae("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=NC(v),S=new Bg;return Object.assign(S,E),S})}}async update(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=WC(this.apiClient,e);return h=ae("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const p=QC(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Dw(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=kw(v),S=new Vg;return Object.assign(S,E),S})}else{const p=Mw(this.apiClient,e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Uw(v),S=new Vg;return Object.assign(S,E),S})}}async countTokens(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Rw(this.apiClient,e);return h=ae("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Iw(v),S=new zg;return Object.assign(S,E),S})}else{const p=xw(this.apiClient,e);return h=ae("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Nw(v),S=new zg;return Object.assign(S,E),S})}}async computeTokens(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Ew(this.apiClient,e);return l=ae("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Sw(g),v=new KS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=lC(this.apiClient,e);return h=ae("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c.then(v=>{const E=oC(v),S=new ja;return Object.assign(S,E),S})}else{const p=aC(this.apiClient,e);return h=ae("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=rC(v),S=new ja;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA extends zn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=HS(e);return h=ae("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),c}else{const p=qS(e);return h=ae("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=MS(e);return l=ae("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KA(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function XA(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>rx(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function QA(n,e,i){const r={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],sx(n,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),r}function WA(n,e){const i={},r=d(e,["config"]);return r!=null&&f(i,["config"],QA(n,r,i)),i}function ZA(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ex(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tx(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function nx(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ix(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","speechConfig"],Sd(E));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=d(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],XA(xt(C)));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let j=Ws(x);Array.isArray(j)&&(j=j.map(X=>ax(Qs(X)))),f(e,["setup","tools"],j)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],ox(N));const U=d(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const O=d(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","outputAudioTranscription"],O);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&f(e,["setup","realtimeInputConfig"],M);const Y=d(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const L=d(n,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),i}function sx(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],He(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],ix(a,i)),i}function rx(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],ZA(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],ex(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],KA(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const v=d(n,["thought"]);v!=null&&f(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&f(e,["thoughtSignature"],E);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function ox(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ax(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],tx(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],nx(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=n[i];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const a=Object.keys(r).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function ux(n,e){let i=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,i=l):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(i){const l=lx(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class cx extends zn{constructor(e){super(),this.apiClient=e}async create(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=WA(this.apiClient,e);l=ae("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=ux(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dx(n,e){const i={},r=d(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),i}function fx(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const r=d(n,["config"]);return r!=null&&dx(r,e),e}function hx(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function px(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function mx(n){const e={},i=d(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const r=d(n,["config"]);return r!=null&&px(r,e),e}function gx(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yx extends zn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Yi(Vn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:i.parent,config:r.config}),await this.listInternal(i),i)}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hx(e);return l=ae("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fx(e);a=ae("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mx(e);return l=ae("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=gx(g),v=new XS;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vx extends zn{constructor(e,i=new yx(e)){super(),this.apiClient=e,this.documents=i,this.list=async(r={})=>new Yi(Vn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lA(e);return l=ae("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dA(e);return l=ae("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cA(e);a=ae("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yA(e);return l=ae("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=vA(g),v=new QS;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_A(e);return l=ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=EA(g),v=new WS;return Object.assign(v,p),v})}}async importFile(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pA(e);return l=ae("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=hA(g),v=new gd;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _x(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function Ex(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function Sx(n,e){const i={},r=d(n,["sdkHttpResponse"]);return r!=null&&f(i,["sdkHttpResponse"],r),i}function Tx(n,e){const i={},r=d(n,["sdkHttpResponse"]);return r!=null&&f(i,["sdkHttpResponse"],r),i}function bx(n,e,i){const r={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(n,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function wx(n,e,i){const r={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec"],fy(b))}else if(a==="PREFERENCE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec"],fy(b))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(h==="PREFERENCE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(g==="PREFERENCE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(p==="PREFERENCE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&f(e,["labels"],E);const S=d(n,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),r}function Cx(n,e){const i={},r=d(n,["baseModel"]);r!=null&&f(i,["baseModel"],r);const a=d(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(n,["trainingDataset"]);l!=null&&Ox(l);const c=d(n,["config"]);return c!=null&&bx(c,i),i}function Ax(n,e){const i={},r=d(n,["baseModel"]);r!=null&&f(i,["baseModel"],r);const a=d(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(n,["trainingDataset"]);l!=null&&Lx(l,i,e);const c=d(n,["config"]);return c!=null&&wx(c,i,e),i}function xx(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function Rx(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function Nx(n,e,i){const r={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),r}function Ix(n,e,i){const r={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),r}function Mx(n,e){const i={},r=d(n,["config"]);return r!=null&&Nx(r,i),i}function Dx(n,e){const i={},r=d(n,["config"]);return r!=null&&Ix(r,i),i}function Ux(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>yv(h))),f(i,["tuningJobs"],c)}return i}function kx(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Xc(h))),f(i,["tuningJobs"],c)}return i}function Px(n,e){const i={},r=d(n,["name"]);r!=null&&f(i,["model"],r);const a=d(n,["name"]);return a!=null&&f(i,["endpoint"],a),i}function Ox(n,e){const i={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(n,["examples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function Lx(n,e,i){const r={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function yv(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["state"]);l!=null&&f(i,["state"],Qy(l));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(n,["description"]);v!=null&&f(i,["description"],v);const E=d(n,["baseModel"]);E!=null&&f(i,["baseModel"],E);const S=d(n,["_self"]);return S!=null&&f(i,["tunedModel"],Px(S)),i}function Xc(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["state"]);l!=null&&f(i,["state"],Qy(l));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(i,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(i,["updateTime"],p);const v=d(n,["error"]);v!=null&&f(i,["error"],v);const E=d(n,["description"]);E!=null&&f(i,["description"],E);const S=d(n,["baseModel"]);S!=null&&f(i,["baseModel"],S);const b=d(n,["tunedModel"]);b!=null&&f(i,["tunedModel"],b);const C=d(n,["preTunedModel"]);C!=null&&f(i,["preTunedModel"],C);const x=d(n,["supervisedTuningSpec"]);x!=null&&f(i,["supervisedTuningSpec"],x);const N=d(n,["preferenceOptimizationSpec"]);N!=null&&f(i,["preferenceOptimizationSpec"],N);const U=d(n,["tuningDataStats"]);U!=null&&f(i,["tuningDataStats"],U);const O=d(n,["encryptionSpec"]);O!=null&&f(i,["encryptionSpec"],O);const M=d(n,["partnerModelTuningSpec"]);M!=null&&f(i,["partnerModelTuningSpec"],M);const Y=d(n,["customBaseModel"]);Y!=null&&f(i,["customBaseModel"],Y);const L=d(n,["experiment"]);L!=null&&f(i,["experiment"],L);const j=d(n,["labels"]);j!=null&&f(i,["labels"],j);const X=d(n,["outputUri"]);X!=null&&f(i,["outputUri"],X);const re=d(n,["pipelineJob"]);re!=null&&f(i,["pipelineJob"],re);const D=d(n,["serviceAccount"]);D!=null&&f(i,["serviceAccount"],D);const te=d(n,["tunedModelDisplayName"]);te!=null&&f(i,["tunedModelDisplayName"],te);const de=d(n,["veoTuningSpec"]);return de!=null&&f(i,["veoTuningSpec"],de),i}function qx(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(n,["done"]);c!=null&&f(i,["done"],c);const h=d(n,["error"]);return h!=null&&f(i,["error"],h),i}function fy(n,e){const i={},r=d(n,["gcsUri"]);r!=null&&f(i,["validationDatasetUri"],r);const a=d(n,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hx extends zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Yi(Vn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var r;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((r=i.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:zc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Rx(e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Xc(v))}else{const p=xx(e);return h=ae("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>yv(v))}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Dx(e);return h=ae("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=kx(v),S=new Fg;return Object.assign(S,E),S})}else{const p=Mx(e);return h=ae("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Ux(v),S=new Fg;return Object.assign(S,E),S})}}async cancel(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Ex(e);return h=ae("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Tx(v),S=new $g;return Object.assign(S,E),S})}else{const p=_x(e);return h=ae("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=Sx(v),S=new $g;return Object.assign(S,E),S})}}async tuneInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Ax(e,e);return l=ae("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>Xc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Cx(e);return l=ae("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>qx(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gx{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Bx=1024*1024*8,Vx=3,zx=1e3,Fx=2,Ya="x-goog-upload-status";async function $x(n,e,i){var r;const a=await vv(n,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[Ya])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function jx(n,e,i){var r;const a=await vv(n,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[Ya])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=$y(l),h=new yd;return Object.assign(h,c),h}async function vv(n,e,i){var r,a;let l=0,c=0,h=new Fc(new Response),g="upload";for(l=n.size;c<l;){const p=Math.min(Bx,l-c),v=n.slice(c,c+p);c+p>=l&&(g+=", finalize");let E=0,S=zx;for(;E<Vx&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((r=h==null?void 0:h.headers)===null||r===void 0)&&r[Ya]));)E++,await Yx(S),S=S*Fx;if(c+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Ya])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function Jx(n){return{size:n.size,type:n.type}}function Yx(n){return new Promise(e=>setTimeout(e,n))}class Kx{async upload(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $x(e,i,r)}async uploadToFileSearchStore(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jx(e,i,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Jx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xx{create(e,i,r){return new Qx(e,i,r)}}class Qx{constructor(e,i,r){this.url=e,this.headers=i,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hy="x-goog-api-key";class Wx{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(hy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zx="gl-node/";class eR{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const r=NS(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new Wx(this.apiKey);this.apiClient=new RA({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Zx+"web",uploader:new Kx,downloader:new Gx}),this.models=new JA(this.apiClient),this.live=new BA(this.apiClient,a,new Xx),this.batches=new sb(this.apiClient),this.chats=new Hb(this.models,this.apiClient),this.caches=new Ob(this.apiClient),this.files=new Kb(this.apiClient),this.operations=new YA(this.apiClient),this.authTokens=new cx(this.apiClient),this.tunings=new Hx(this.apiClient),this.fileSearchStores=new vx(this.apiClient)}}const tR=n=>JSON.stringify(n.map(e=>({id:e.id,name:e.name,relation:e.relation,health:e.health.map(i=>`${i.title} (${i.date})`),upcoming_todos:e.todos.filter(i=>!i.isCompleted).map(i=>`${i.title} due ${i.dueDate}`),notes:e.notes.map(i=>i.title)}))),nR=[{functionDeclarations:[{name:"add_todo",description:"Add a new todo task for a person.",parameters:{type:Je.OBJECT,properties:{person_name:{type:Je.STRING,description:"Name of the person"},title:{type:Je.STRING,description:"Task title"},due_date:{type:Je.STRING,description:"Due date in YYYY-MM-DD format"}},required:["person_name","title","due_date"]}},{name:"add_health_record",description:"Add a health record for a person.",parameters:{type:Je.OBJECT,properties:{person_name:{type:Je.STRING,description:"Name of the person"},title:{type:Je.STRING,description:"Record title (e.g. Dentist Appt)"},date:{type:Je.STRING,description:"Date in YYYY-MM-DD format"},notes:{type:Je.STRING,description:"Optional notes"},type:{type:Je.STRING,description:"Type: CHECKUP, MEDICATION, VACCINE, OTHER"}},required:["person_name","title","date"]}},{name:"add_note",description:"Add a note for a person.",parameters:{type:Je.OBJECT,properties:{person_name:{type:Je.STRING,description:"Name of the person"},title:{type:Je.STRING,description:"Note title"},content:{type:Je.STRING,description:"Note content"}},required:["person_name","title","content"]}},{name:"add_finance_record",description:"Add a financial record (expense, gift, etc.) for a person.",parameters:{type:Je.OBJECT,properties:{person_name:{type:Je.STRING,description:"Name of the person"},title:{type:Je.STRING,description:"Description of expense/gift"},amount:{type:Je.NUMBER,description:"Amount in USD"},type:{type:Je.STRING,description:"Type: EXPENSE, GIFT, OWED, LENT"},date:{type:Je.STRING,description:"Date in YYYY-MM-DD format"}},required:["person_name","title","amount","type","date"]}}]}],iR=async(n,e,i)=>{const r="AQ.Ab8RN6JawqFiFAUnD80D19z7omQhoWcvf6UegW4CPH_DUCArlA",a=new eR({apiKey:r}),l=`
    You are Kinfolk, a warm, nurturing, and highly organized personal family CRM assistant. 
    Your goal is to help the user manage their relationships, memories, and responsibilities for their loved ones.
    
    You have access to the user's current data: ${tR(i)}.
    
    Tone: Calm, joyful, empathetic, and trustworthy. Like a very organized, caring family member.
    
    Capabilities:
    1. Answer questions about the user's family/friends based on the context provided.
    2. Offer advice on gift ideas, health management, or event planning.
    3. You can ADD items to the database using the provided tools. If the user asks to add something, call the appropriate tool.
    
    Constraint: Keep answers concise but warm unless the user asks for a detailed plan.
  `;try{const c=await a.models.generateContent({model:"gemini-2.5-flash-lite-preview-06-17",contents:[...n.filter(p=>p.role!=="model").map(p=>({role:p.role,parts:[{text:p.text}]})),{role:"user",parts:[{text:e}]}],config:{systemInstruction:l,tools:nR}}),h=c.text,g=c.functionCalls;return g&&g.length>0?{text:h||"I'm on it.",toolCalls:g.map(p=>({name:p.name,args:p.args}))}:{text:h||"I'm not sure how to answer that, but I'm here to help!"}}catch(c){return console.error("Gemini API Error:",c),{text:"I had a little trouble thinking through that. Could you try asking again?"}}},sR=({people:n,isOpen:e,onClose:i,onAddTodo:r,onAddHealth:a,onAddNote:l,onAddFinance:c})=>{const[h,g]=ee.useState([{id:"0",role:"model",text:"Hi! I'm Kinfolk. How can I help you support your loved ones today?"}]),[p,v]=ee.useState(""),[E,S]=ee.useState(!1),b=ee.useRef(null),C=()=>{var U;(U=b.current)==null||U.scrollIntoView({behavior:"smooth"})};ee.useEffect(()=>{C()},[h,e]);const x=async()=>{if(!p.trim()||E)return;const U={id:Date.now().toString(),role:"user",text:p};g(O=>[...O,U]),v(""),S(!0);try{const O=await iR(h,p,n);if(O.toolCalls&&O.toolCalls.length>0)for(const Y of O.toolCalls){const{name:L,args:j}=Y;console.log("Executing tool:",L,j);const X=n.find(re=>re.name.toLowerCase().includes(j.person_name.toLowerCase()));if(!X){g(re=>[...re,{id:Date.now().toString(),role:"model",text:`I couldn't find a person named "${j.person_name}". Please check the name.`}]);continue}L==="add_todo"?await r(X.id,j.title,j.due_date):L==="add_health_record"?await a(X.id,j.title,j.date,j.notes||"",j.type||"OTHER"):L==="add_note"?await l(X.id,j.title,j.content):L==="add_finance_record"&&await c(X.id,j.title,j.amount,j.type,j.date)}const M={id:(Date.now()+1).toString(),role:"model",text:O.text};g(Y=>[...Y,M])}catch(O){console.error(O),g(M=>[...M,{id:Date.now().toString(),role:"model",text:"Sorry, something went wrong."}])}finally{S(!1)}},N=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),x())};return e?_.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:[_.jsx("div",{className:"absolute inset-0 bg-stone-900/20 backdrop-blur-sm pointer-events-auto",onClick:i}),_.jsxs("div",{className:"relative w-full max-w-md h-full bg-white shadow-2xl flex flex-col pointer-events-auto transform transition-transform animate-slide-in-right",children:[_.jsxs("div",{className:"p-4 border-b border-stone-100 flex items-center justify-between bg-cream",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-200 to-purple-200 flex items-center justify-center text-indigo-700",children:_.jsx(Re,{name:"network_intelligence",className:"text-xl"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-stone-800",children:"Kinfolk AI"}),_.jsx("p",{className:"text-xs text-stone-500",children:"Powered by Gemini 3 Pro"})]})]}),_.jsx(Se,{variant:"icon",onClick:i,children:_.jsx(Re,{name:"close"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-stone-50",children:[h.map(U=>_.jsx("div",{className:`flex ${U.role==="user"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm leading-relaxed ${U.role==="user"?"bg-stone-800 text-white rounded-br-none":"bg-white border border-stone-100 text-stone-700 shadow-sm rounded-bl-none"}`,children:U.text.split(`
`).map((O,M)=>_.jsx("p",{className:"mb-1 last:mb-0",children:O},M))})},U.id)),E&&_.jsx("div",{className:"flex justify-start",children:_.jsxs("div",{className:"bg-white border border-stone-100 p-3 rounded-2xl rounded-bl-none shadow-sm flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 bg-stone-400 rounded-full animate-bounce"}),_.jsx("span",{className:"w-2 h-2 bg-stone-400 rounded-full animate-bounce delay-100"}),_.jsx("span",{className:"w-2 h-2 bg-stone-400 rounded-full animate-bounce delay-200"}),_.jsx("span",{className:"text-xs text-stone-400 ml-1",children:"Thinking deeply..."})]})}),_.jsx("div",{ref:b})]}),_.jsx("div",{className:"p-4 bg-white border-t border-stone-100",children:_.jsxs("div",{className:"flex items-end gap-2 bg-stone-50 p-2 rounded-xl border border-stone-200 focus-within:ring-2 focus-within:ring-stone-200 focus-within:border-stone-400 transition-all",children:[_.jsx("textarea",{value:p,onChange:U=>v(U.target.value),onKeyDown:N,placeholder:"Ask about your family...",className:"w-full bg-transparent border-none focus:ring-0 resize-none text-stone-700 text-sm max-h-32 p-2 placeholder-stone-400 outline-none",rows:1,style:{minHeight:"44px"}}),_.jsx(Se,{variant:"primary",className:`!p-2 h-10 w-10 shrink-0 ${p.trim()?"":"opacity-50 cursor-not-allowed"}`,onClick:x,disabled:!p.trim()||E,children:_.jsx(Re,{name:"arrow_upward",className:"text-lg"})})]})})]})]}):null};var Gn={},Na={},Qc=function(n,e){return Qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},Qc(n,e)};function _v(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qc(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ka=function(){return Ka=Object.assign||function(e){for(var i,r=1,a=arguments.length;r<a;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Ka.apply(this,arguments)};function er(n,e){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(i[r[a]]=n[r[a]]);return i}function Ev(n,e,i,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,i,r);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(l=(a<3?c(l):a>3?c(e,i,l):c(e,i))||l);return a>3&&l&&Object.defineProperty(e,i,l),l}function Sv(n,e){return function(i,r){e(i,r,n)}}function Tv(n,e,i,r,a,l){function c(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var h=r.kind,g=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&n?r.static?n:n.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),E,S=!1,b=i.length-1;b>=0;b--){var C={};for(var x in r)C[x]=x==="access"?{}:r[x];for(var x in r.access)C.access[x]=r.access[x];C.addInitializer=function(U){if(S)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(U||null))};var N=(0,i[b])(h==="accessor"?{get:v.get,set:v.set}:v[g],C);if(h==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(E=c(N.get))&&(v.get=E),(E=c(N.set))&&(v.set=E),(E=c(N.init))&&a.unshift(E)}else(E=c(N))&&(h==="field"?a.unshift(E):v[g]=E)}p&&Object.defineProperty(p,r.name,v),S=!0}function bv(n,e,i){for(var r=arguments.length>2,a=0;a<e.length;a++)i=r?e[a].call(n,i):e[a].call(n);return r?i:void 0}function wv(n){return typeof n=="symbol"?n:"".concat(n)}function Cv(n,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function Av(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ce(n,e,i,r){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{p(r.next(v))}catch(E){c(E)}}function g(v){try{p(r.throw(v))}catch(E){c(E)}}function p(v){v.done?l(v.value):a(v.value).then(h,g)}p((r=r.apply(n,e||[])).next())})}function xv(n,e){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(v){return g([p,v])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(i=0)),i;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,a=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){i.label=p[1];break}if(p[0]===6&&i.label<l[1]){i.label=l[1],l=p;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(p);break}l[2]&&i.ops.pop(),i.trys.pop();continue}p=e.call(n,i)}catch(v){p=[6,v],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var ll=Object.create?(function(n,e,i,r){r===void 0&&(r=i);var a=Object.getOwnPropertyDescriptor(e,i);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(n,r,a)}):(function(n,e,i,r){r===void 0&&(r=i),n[r]=e[i]});function Rv(n,e){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&ll(e,n,i)}function Xa(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],r=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bd(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var r=i.call(n),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(c)throw c.error}}return l}function Nv(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(bd(arguments[e]));return n}function Iv(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<i;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function Mv(n,e,i){if(i||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}function Ys(n){return this instanceof Ys?(this.v=n,this):new Ys(n)}function Dv(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(C){return Promise.resolve(C).then(b,E)}}function h(b,C){r[b]&&(a[b]=function(x){return new Promise(function(N,U){l.push([b,x,N,U])>1||g(b,x)})},C&&(a[b]=C(a[b])))}function g(b,C){try{p(r[b](C))}catch(x){S(l[0][3],x)}}function p(b){b.value instanceof Ys?Promise.resolve(b.value.v).then(v,E):S(l[0][2],b)}function v(b){g("next",b)}function E(b){g("throw",b)}function S(b,C){b(C),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Uv(n){var e,i;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=n[a]?function(c){return(i=!i)?{value:Ys(n[a](c)),done:!1}:l?l(c):c}:l}}function kv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof Xa=="function"?Xa(n):n[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=n[l]&&function(c){return new Promise(function(h,g){c=n[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}function Pv(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var rR=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Wc=function(n){return Wc=Object.getOwnPropertyNames||function(e){var i=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[i.length]=r);return i},Wc(n)};function Ov(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=Wc(n),r=0;r<i.length;r++)i[r]!=="default"&&ll(e,n,i[r]);return rR(e,n),e}function Lv(n){return n&&n.__esModule?n:{default:n}}function qv(n,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(n):r?r.value:e.get(n)}function Hv(n,e,i,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,i):a?a.value=i:e.set(n,i),i}function Gv(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Bv(n,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:r,async:i})}else i&&n.stack.push({async:!0});return e}var oR=typeof SuppressedError=="function"?SuppressedError:function(n,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Vv(n){function e(l){n.error=n.hasError?new oR(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var i,r=0;function a(){for(;i=n.stack.pop();)try{if(!i.async&&r===1)return r=0,n.stack.push(i),Promise.resolve().then(a);if(i.dispose){var l=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function zv(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?i:a+l+"."+c.toLowerCase()+"js"}):n}const aR={__extends:_v,__assign:Ka,__rest:er,__decorate:Ev,__param:Sv,__esDecorate:Tv,__runInitializers:bv,__propKey:wv,__setFunctionName:Cv,__metadata:Av,__awaiter:ce,__generator:xv,__createBinding:ll,__exportStar:Rv,__values:Xa,__read:bd,__spread:Nv,__spreadArrays:Iv,__spreadArray:Mv,__await:Ys,__asyncGenerator:Dv,__asyncDelegator:Uv,__asyncValues:kv,__makeTemplateObject:Pv,__importStar:Ov,__importDefault:Lv,__classPrivateFieldGet:qv,__classPrivateFieldSet:Hv,__classPrivateFieldIn:Gv,__addDisposableResource:Bv,__disposeResources:Vv,__rewriteRelativeImportExtension:zv},lR=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Bv,get __assign(){return Ka},__asyncDelegator:Uv,__asyncGenerator:Dv,__asyncValues:kv,__await:Ys,__awaiter:ce,__classPrivateFieldGet:qv,__classPrivateFieldIn:Gv,__classPrivateFieldSet:Hv,__createBinding:ll,__decorate:Ev,__disposeResources:Vv,__esDecorate:Tv,__exportStar:Rv,__extends:_v,__generator:xv,__importDefault:Lv,__importStar:Ov,__makeTemplateObject:Pv,__metadata:Av,__param:Sv,__propKey:wv,__read:bd,__rest:er,__rewriteRelativeImportExtension:zv,__runInitializers:bv,__setFunctionName:Cv,__spread:Nv,__spreadArray:Mv,__spreadArrays:Iv,__values:Xa,default:aR},Symbol.toStringTag,{value:"Module"})),uR=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);let ul=class extends Error{constructor(e,i="FunctionsError",r){super(e),this.name=i,this.context=r}},Fv=class extends ul{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Zc=class extends ul{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ed=class extends ul{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Qa;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Qa||(Qa={}));class cR{constructor(e,{headers:i={},customFetch:r,region:a=Qa.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=uR(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ce(this,arguments,void 0,function*(i,r={}){var a;let l,c;try{const{headers:h,method:g,body:p,signal:v,timeout:E}=r;let S={},{region:b}=r;b||(b=this.region);const C=new URL(`${this.url}/${i}`);b&&b!=="any"&&(S["x-region"]=b,C.searchParams.set("forceFunctionRegion",b));let x;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",x=p):typeof p=="string"?(S["Content-Type"]="text/plain",x=p):typeof FormData<"u"&&p instanceof FormData?x=p:(S["Content-Type"]="application/json",x=JSON.stringify(p)):x=p;let N=v;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),v?(N=c.signal,v.addEventListener("abort",()=>c.abort())):N=c.signal);const U=yield this.fetch(C.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:x,signal:N}).catch(L=>{throw new Fv(L)}),O=U.headers.get("x-relay-error");if(O&&O==="true")throw new Zc(U);if(!U.ok)throw new ed(U);let M=((a=U.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),Y;return M==="application/json"?Y=yield U.json():M==="application/octet-stream"||M==="application/pdf"?Y=yield U.blob():M==="text/event-stream"?Y=U:M==="multipart/form-data"?Y=yield U.formData():Y=yield U.text(),{data:Y,error:null,response:U}}catch(h){return{data:null,error:h,response:h instanceof ed||h instanceof Zc?h.context:void 0}}finally{l&&clearTimeout(l)}})}}const dR=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Qa},FunctionsClient:cR,FunctionsError:ul,FunctionsFetchError:Fv,FunctionsHttpError:ed,FunctionsRelayError:Zc},Symbol.toStringTag,{value:"Module"})),$v=oo(dR);var At={};const tr=oo(lR);var Ia={},Ma={},Da={},Ua={},ka={},Pa={},py;function jv(){if(py)return Pa;py=1,Object.defineProperty(Pa,"__esModule",{value:!0});class n extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Pa.default=n,Pa}var my;function Jv(){if(my)return ka;my=1,Object.defineProperty(ka,"__esModule",{value:!0});const e=tr.__importDefault(jv());let i=class{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,v,E,S;let b=null,C=null,x=null,N=g.status,U=g.statusText;if(g.ok){if(this.method!=="HEAD"){const L=await g.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?C=L:C=JSON.parse(L))}const M=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),Y=(E=g.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");M&&Y&&Y.length>1&&(x=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(b={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,x=null,N=406,U="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const M=await g.text();try{b=JSON.parse(M),Array.isArray(b)&&g.status===404&&(C=[],b=null,N=200,U="OK")}catch{g.status===404&&M===""?(N=204,U="No Content"):b={message:M}}if(b&&this.isMaybeSingle&&(!((S=b==null?void 0:b.details)===null||S===void 0)&&S.includes("0 rows"))&&(b=null,N=200,U="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:C,count:x,status:N,statusText:U}});return this.shouldThrowOnError||(h=h.catch(g=>{var p,v,E,S,b,C;let x="";const N=g==null?void 0:g.cause;if(N){const U=(p=N==null?void 0:N.message)!==null&&p!==void 0?p:"",O=(v=N==null?void 0:N.code)!==null&&v!==void 0?v:"";x=`${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"FetchError"}: ${g==null?void 0:g.message}`,x+=`

Caused by: ${(S=N==null?void 0:N.name)!==null&&S!==void 0?S:"Error"}: ${U}`,O&&(x+=` (${O})`),N!=null&&N.stack&&(x+=`
${N.stack}`)}else x=(b=g==null?void 0:g.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(C=g==null?void 0:g.name)!==null&&C!==void 0?C:"FetchError"}: ${g==null?void 0:g.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}};return ka.default=i,ka}var gy;function Yv(){if(gy)return Ua;gy=1,Object.defineProperty(Ua,"__esModule",{value:!0});const e=tr.__importDefault(Jv());let i=class extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:h,referencedTable:g=h}={}){const p=g?`${g}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:h=c}={}){const g=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:h=!1,wal:g=!1,format:p="text"}={}){var v;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Ua.default=i,Ua}var yy;function wd(){if(yy)return Da;yy=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=tr.__importDefault(Yv()),i=new RegExp("[,()]");let r=class extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const h=Array.from(new Set(c)).map(g=>typeof g=="string"&&i.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:h,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${p}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(l,c,h){return this.url.searchParams.append(l,`not.${c}.${h}`),this}or(l,{foreignTable:c,referencedTable:h=c}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,h){return this.url.searchParams.append(l,`${c}.${h}`),this}};return Da.default=r,Da}var vy;function Kv(){if(vy)return Ma;vy=1,Object.defineProperty(Ma,"__esModule",{value:!0});const e=tr.__importDefault(wd());let i=class{constructor(a,{headers:l={},schema:c,fetch:h}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=h}select(a,l){const{head:c=!1,count:h}=l??{},g=c?"HEAD":"GET";let p=!1;const v=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var h;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,E)=>v.concat(Object.keys(E)),[]);if(p.length>0){const v=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:h,defaultToNull:g=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((S,b)=>S.concat(Object.keys(b)),[]);if(E.length>0){const S=[...new Set(E)].map(b=>`"${b}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const h="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Ma.default=i,Ma}var _y;function fR(){if(_y)return Ia;_y=1,Object.defineProperty(Ia,"__esModule",{value:!0});const n=tr,e=n.__importDefault(Kv()),i=n.__importDefault(wd());let r=class Xv{constructor(l,{headers:c={},schema:h,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=h,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new Xv(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:h=!1,get:g=!1,count:p}={}){var v;let E;const S=new URL(`${this.url}/rpc/${l}`);let b;h||g?(E=h?"HEAD":"GET",Object.entries(c).filter(([x,N])=>N!==void 0).map(([x,N])=>[x,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([x,N])=>{S.searchParams.append(x,N)})):(E="POST",b=c);const C=new Headers(this.headers);return p&&C.set("Prefer",`count=${p}`),new i.default({method:E,url:S,headers:C,schema:this.schemaName,body:b,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}};return Ia.default=r,Ia}var Ey;function Qv(){if(Ey)return At;Ey=1,Object.defineProperty(At,"__esModule",{value:!0}),At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const n=tr,e=n.__importDefault(fR());At.PostgrestClient=e.default;const i=n.__importDefault(Kv());At.PostgrestQueryBuilder=i.default;const r=n.__importDefault(wd());At.PostgrestFilterBuilder=r.default;const a=n.__importDefault(Yv());At.PostgrestTransformBuilder=a.default;const l=n.__importDefault(Jv());At.PostgrestBuilder=l.default;const c=n.__importDefault(jv());return At.PostgrestError=c.default,At.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},At}class Wv{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const r=i.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const r=this.getWebSocketConstructor();return new r(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hR="2.86.2",pR=`realtime-js/${hR}`,Zv="1.0.0",mR="2.0.0",Sy=Zv,td=1e4,gR=1e3,yR=100;var Fi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fi||(Fi={}));var ft;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ft||(ft={}));var mn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(mn||(mn={}));var nd;(function(n){n.websocket="websocket"})(nd||(nd={}));var $i;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})($i||($i={}));class vR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,r){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+E.length,b=new ArrayBuffer(this.HEADER_LENGTH+S);let C=new DataView(b),x=0;C.setUint8(x++,this.KINDS.userBroadcastPush),C.setUint8(x++,g.length),C.setUint8(x++,h.length),C.setUint8(x++,c.length),C.setUint8(x++,p.length),C.setUint8(x++,E.length),C.setUint8(x++,i),Array.from(g,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(h,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(c,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(p,U=>C.setUint8(x++,U.charCodeAt(0))),Array.from(E,U=>C.setUint8(x++,U.charCodeAt(0)));var N=new Uint8Array(b.byteLength+r.byteLength);return N.set(new Uint8Array(b),0),N.set(new Uint8Array(r),b.byteLength),N.buffer}decode(e,i){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return i(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,h,g]=r;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),r=i.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,r){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+a));g=g+a;const v=r.decode(e.slice(g,g+l));g=g+l;const E=r.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),b=h===this.JSON_ENCODING?JSON.parse(r.decode(S)):S,C={type:this.BROADCAST_EVENT,event:v,payload:b};return c>0&&(C.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>i.includes(r)))}}class e_{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ke||(Ke={}));const Ty=(n,e,i={})=>{var r;const a=(r=i.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=_R(c,n,e,a),l),{}):{}},_R=(n,e,i,r)=>{const a=e.find(h=>h.name===n),l=a==null?void 0:a.type,c=i[n];return l&&!r.includes(l)?t_(l,c):id(c)},t_=(n,e)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return bR(e,i)}switch(n){case Ke.bool:return ER(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return SR(e);case Ke.json:case Ke.jsonb:return TR(e);case Ke.timestamp:return wR(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return id(e);default:return id(e)}},id=n=>n,ER=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},SR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},TR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},bR=(n,e)=>{if(typeof n!="string")return n;const i=n.length-1,r=n[i];if(n[0]==="{"&&r==="}"){let l;const c=n.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>t_(e,h))}return n},wR=n=>typeof n=="string"?n.replace(" ","T"):n,n_=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class kc{constructor(e,i,r={},a=td){this.channel=e,this.event=i,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var r;return this._hasReceived(e)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sd;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(sd||(sd={}));let i_=class Ga{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ga.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Ga.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ga.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,r,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const E=l[p];if(E){const S=v.map(N=>N.presence_ref),b=E.map(N=>N.presence_ref),C=v.filter(N=>b.indexOf(N.presence_ref)<0),x=E.filter(N=>S.indexOf(N.presence_ref)<0);C.length>0&&(h[p]=C),x.length>0&&(g[p]=x)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:g},r,a)}static syncDiff(e,i,r,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const E=e[h].map(b=>b.presence_ref),S=v.filter(b=>E.indexOf(b.presence_ref)<0);e[h].unshift(...S)}r(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(E=>E.presence_ref);p=p.filter(E=>v.indexOf(E.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(r=>i(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,r)=>{const a=e[r];return"metas"in a?i[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[r]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var rd;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(rd||(rd={}));var js;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(js||(js={}));var Sn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Sn||(Sn={}));const CR=ft;let s_=class r_{constructor(e,i={config:{}},r){var a,l;if(this.topic=e,this.params=i,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new kc(this,mn.join,this.params,this.timeout),this.rejoinTimer=new e_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new i_(this),this.broadcastEndpointURL=n_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[js.PRESENCE]&&this.bindings[js.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Sn.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},E)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:b})=>{var C;if(this.socket.setAuth(),b===void 0){e==null||e(Sn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,N=(C=x==null?void 0:x.length)!==null&&C!==void 0?C:0,U=[];for(let O=0;O<N;O++){const M=x[O],{filter:{event:Y,schema:L,table:j,filter:X}}=M,re=b&&b[O];if(re&&re.event===Y&&re.schema===L&&re.table===j&&re.filter===X)U.push(Object.assign(Object.assign({},M),{id:re.id}));else{this.unsubscribe(),this.state=ft.errored,e==null||e(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(Sn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ft.errored,e==null||e(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,r){return this.state===ft.joined&&e===js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,r)}async httpSend(e,i,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ft.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new kc(this,mn.leave,{},e),r.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(e,i,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new kc(this,e,i,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yR){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,r){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,r){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=mn;if(r&&[h,g,p,v].indexOf(c)>=0&&r!==this._joinRef())return;let S=this._onMessage(c,i,r);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var C,x,N;return((C=b.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(x=b.filter)===null||x===void 0?void 0:x.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===c}).map(b=>b.callback(S,r)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var C,x,N,U,O,M;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const Y=b.id,L=(C=b.filter)===null||C===void 0?void 0:C.event;return Y&&((x=i.ids)===null||x===void 0?void 0:x.includes(Y))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((N=i.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const Y=(O=(U=b==null?void 0:b.filter)===null||U===void 0?void 0:U.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return Y==="*"||Y===((M=i==null?void 0:i.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof S=="object"&&"ids"in S){const C=S.data,{schema:x,table:N,commit_timestamp:U,type:O,errors:M}=C;S=Object.assign(Object.assign({},{schema:x,table:N,commit_timestamp:U,eventType:O,new:{},old:{},errors:M}),this._getPayloadRecords(C))}b.callback(S,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,r){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&r_.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const r in e)if(e[r]!==i[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mn.close,{},e)}_onError(e){this._on(mn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Ty(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Ty(e.columns,e.old_record)),i}};const Pc=()=>{},Oa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AR=[1e3,2e3,5e3,1e4],xR=1e4,RR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let NR=class{constructor(e,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=td,this.transport=null,this.heartbeatIntervalMs=Oa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pc,this.ref=0,this.reconnectTimer=null,this.vsn=Sy,this.logger=Pc,this.conn=null,this.sendBuffer=[],this.serializer=new vR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=i==null?void 0:i.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${nd.websocket}`,this.httpEndpoint=n_(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Wv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,r){this.logger(e,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fi.connecting:return $i.Connecting;case Fi.open:return $i.Open;case Fi.closing:return $i.Closing;default:return $i.Closed}}isConnected(){return this.connectionState()===$i.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new s_(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gR,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Oa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${r} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fi.open||this.conn.readyState===Fi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(mn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${r}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const r=new Blob([RR],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const a={access_token:i,version:pR};i&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(mn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new e_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,r,a,l,c,h,g,p,v,E,S,b;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:td,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Oa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Pc,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Sy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(C=>AR[C-1]||xR),this.vsn){case Zv:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((C,x)=>x(JSON.stringify(C))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((C,x)=>x(JSON.parse(C)));break;case mR:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const IR=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:CR,get REALTIME_LISTEN_TYPES(){return js},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return rd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return sd},get REALTIME_SUBSCRIBE_STATES(){return Sn},RealtimeChannel:s_,RealtimeClient:NR,RealtimePresence:i_,WebSocketFactory:Wv},Symbol.toStringTag,{value:"Module"})),o_=oo(IR);class ao extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function et(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class a_ extends ao{constructor(e,i,r){super(e),this.name="StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wa extends ao{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const Cd=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),MR=()=>Response,od=n=>{if(Array.isArray(n))return n.map(i=>od(i));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([i,r])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=od(r)}),e},DR=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},UR=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),Oc=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},kR=(n,e,i)=>ce(void 0,void 0,void 0,function*(){const r=yield MR();n instanceof r&&!(i!=null&&i.noResolveJson)?n.json().then(a=>{const l=n.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new a_(Oc(a),l,c))}).catch(a=>{e(new Wa(Oc(a),a))}):e(new Wa(Oc(n),n))}),PR=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?a:(DR(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),i))};function lo(n,e,i,r,a,l){return ce(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,PR(e,r,a,l)).then(g=>{if(!g.ok)throw g;return r!=null&&r.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>kR(g,h,r))})})}function so(n,e,i,r){return ce(this,void 0,void 0,function*(){return lo(n,"GET",e,i,r)})}function pn(n,e,i,r,a){return ce(this,void 0,void 0,function*(){return lo(n,"POST",e,r,a,i)})}function ad(n,e,i,r,a){return ce(this,void 0,void 0,function*(){return lo(n,"PUT",e,r,a,i)})}function OR(n,e,i,r){return ce(this,void 0,void 0,function*(){return lo(n,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),r)})}function Ad(n,e,i,r,a){return ce(this,void 0,void 0,function*(){return lo(n,"DELETE",e,r,a,i)})}class LR{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}}var l_;class qR{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[l_]="BlobDownloadBuilder",this.promise=null}asStream(){return new LR(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}}l_=Symbol.toStringTag;const HR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},by={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GR{constructor(e,i={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=r,this.fetch=Cd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,r,a){return ce(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},by),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const p=this._removeEmptyFolders(i),v=this._getFinalPath(p),E=yield(e=="PUT"?ad:pn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(et(l))return{data:null,error:l};throw l}})}upload(e,i,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,r)})}uploadToSignedUrl(e,i,r,a){return ce(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",i);try{let g;const p=Object.assign({upsert:by.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",p.cacheControl)):(g=r,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const E=yield ad(this.fetch,h.toString(),g,{headers:v});return{data:{path:l,fullPath:E.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(et(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,i){return ce(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);i!=null&&i.upsert&&(a["x-upsert"]="true");const l=yield pn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),h=c.searchParams.get("token");if(!h)throw new ao("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}update(e,i,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,r)})}move(e,i,r){return ce(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}copy(e,i,r){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}createSignedUrl(e,i,r){return ce(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield pn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:i},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}createSignedUrls(e,i,r){return ce(this,void 0,void 0,function*(){try{const a=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}download(e,i){const a=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),c=l?`?${l}`:"",h=this._getFinalPath(e),g=()=>so(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new qR(g,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const r=yield so(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:od(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}exists(e){return ce(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield OR(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r)&&r instanceof Wa){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,i){const r=this._getFinalPath(e),a=[],l=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&a.push(l);const h=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${p}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}list(e,i,r){return ce(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},HR),i),{prefix:e||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}listV2(e,i){return ce(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const u_="2.86.2",c_={"X-Client-Info":`storage-js/${u_}`};class BR{constructor(e,i={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},c_),i),this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield so(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}createBucket(e){return ce(this,arguments,void 0,function*(i,r={public:!1}){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}})}updateBucket(e,i){return ce(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}var ro=class extends Error{constructor(n,e){var i;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function VR(n,e,i){const r=new URL(e,n);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&r.searchParams.set(a,l);return r.toString()}async function zR(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function FR(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:a,body:l,headers:c}){const h=VR(n.baseUrl,r,a),g=await zR(n.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),S=E&&v?JSON.parse(v):v;if(!p.ok){const b=E?S:void 0,C=b==null?void 0:b.error;throw new ro((C==null?void 0:C.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:C==null?void 0:C.type,icebergCode:C==null?void 0:C.code,details:b})}return{status:p.status,headers:p.headers,data:S}}}}function La(n){return n.join("")}var $R=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:La(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const i={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${La(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${La(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${La(n.namespace)}`}),!0}catch(e){if(e instanceof ro&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(i){if(i instanceof ro&&i.status===409)return;throw i}}};function ks(n){return n.join("")}var jR=class{constructor(n,e="",i){this.client=n,this.prefix=e,this.accessDelegation=i}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(n,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ks(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(i){if(i instanceof ro&&i.status===404)return!1;throw i}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(i){if(i instanceof ro&&i.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw i}}},JR=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const i=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=FR({baseUrl:i,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new $R(this.client,e),this.tableOps=new jR(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class d_{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},c_),i),this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const r=i.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield so(this.fetch,a,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Ad(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(et(i))return{data:null,error:i};throw i}})}from(e){if(!UR(e))throw new ao("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new JR({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ce(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const xd={"X-Client-Info":`storage-js/${u_}`,"Content-Type":"application/json"};class Rd extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ht(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Ba extends Rd{constructor(e,i,r){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class f_ extends Rd{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var ld;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ld||(ld={}));const cl=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),YR=()=>Response,h_=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},KR=n=>Array.from(new Float32Array(n)),XR=(n,e)=>{if(e!==void 0&&n.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${n.float32.length}`)},wy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),QR=(n,e,i)=>ce(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(i!=null&&i.noResolveJson)){const a=n.status||500,l=n;if(typeof l.json=="function")l.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Ba(wy(c),a,h))}).catch(()=>{const c=a+"",h=l.statusText||`HTTP ${a} error`;e(new Ba(h,a,c))});else{const c=a+"",h=l.statusText||`HTTP ${a} error`;e(new Ba(h,a,c))}}else e(new f_(wy(n),n))}),WR=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(h_(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),i)):a};function ZR(n,e,i,r,a,l){return ce(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,WR(e,r,a,l)).then(g=>{if(!g.ok)throw g;if(r!=null&&r.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>QR(g,h,r))})})}function Xt(n,e,i,r,a){return ce(this,void 0,void 0,function*(){return ZR(n,"POST",e,r,a,i)})}class p_{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xd),i),this.fetch=cl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getIndex(e,i){return ce(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return ce(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}}class m_{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xd),i),this.fetch=cl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Xt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Xt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Xt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class g_{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xd),i),this.fetch=cl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield Xt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Xt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class y_ extends g_{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new v_(this.url,this.headers,e,this.fetch)}createBucket(e){const i=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ce(this,void 0,void 0,function*(){return i.createBucket.call(this,e)})}getBucket(e){const i=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ce(this,void 0,void 0,function*(){return i.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ce(this,arguments,void 0,function*(i={}){return e.listBuckets.call(this,i)})}deleteBucket(e){const i=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ce(this,void 0,void 0,function*(){return i.deleteBucket.call(this,e)})}}class v_ extends p_{constructor(e,i,r,a){super(e,i,a),this.vectorBucketName=r}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new __(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class __ extends m_{constructor(e,i,r,a,l){super(e,i,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class eN extends BR{constructor(e,i={},r,a){super(e,i,r,a)}from(e){return new GR(this.url,this.headers,e,this.fetch)}get vectors(){return new y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new d_(this.url+"/iceberg",this.headers,this.fetch)}}const tN=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:d_,StorageApiError:a_,StorageClient:eN,StorageError:ao,StorageUnknownError:Wa,StorageVectorsApiError:Ba,StorageVectorsClient:y_,StorageVectorsError:Rd,get StorageVectorsErrorCode(){return ld},StorageVectorsUnknownError:f_,VectorBucketApi:g_,VectorBucketScope:v_,VectorDataApi:m_,VectorIndexApi:p_,VectorIndexScope:__,isPlainObject:h_,isStorageError:et,isStorageVectorsError:Ht,normalizeToFloat32:KR,resolveFetch:cl,resolveResponse:YR,validateVectorDimension:XR},Symbol.toStringTag,{value:"Module"})),nN=oo(tN);var Lc={},Zr={},Cy;function iN(){return Cy||(Cy=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.version=void 0,Zr.version="2.86.2"),Zr}var Ay;function sN(){return Ay||(Ay=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_REALTIME_OPTIONS=n.DEFAULT_AUTH_OPTIONS=n.DEFAULT_DB_OPTIONS=n.DEFAULT_GLOBAL_OPTIONS=n.DEFAULT_HEADERS=void 0;const e=iN();let i="";typeof Deno<"u"?i="deno":typeof document<"u"?i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?i="react-native":i="node",n.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${i}/${e.version}`},n.DEFAULT_GLOBAL_OPTIONS={headers:n.DEFAULT_HEADERS},n.DEFAULT_DB_OPTIONS={schema:"public"},n.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n.DEFAULT_REALTIME_OPTIONS={}})(Lc)),Lc}var qc={},xy;function rN(){return xy||(xy=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithAuth=n.resolveHeadersConstructor=n.resolveFetch=void 0;const e=a=>a?(...l)=>a(...l):(...l)=>fetch(...l);n.resolveFetch=e;const i=()=>Headers;n.resolveHeadersConstructor=i;const r=(a,l,c)=>{const h=(0,n.resolveFetch)(c),g=(0,n.resolveHeadersConstructor)();return async(p,v)=>{var E;const S=(E=await l())!==null&&E!==void 0?E:a;let b=new g(v==null?void 0:v.headers);return b.has("apikey")||b.set("apikey",a),b.has("Authorization")||b.set("Authorization",`Bearer ${S}`),h(p,Object.assign(Object.assign({},v),{headers:b}))}};n.fetchWithAuth=r})(qc)),qc}var Bn={},Ry;function oN(){if(Ry)return Bn;Ry=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.isBrowser=void 0,Bn.uuid=n,Bn.ensureTrailingSlash=e,Bn.applySettingDefaults=r,Bn.validateSupabaseUrl=a;function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var c=Math.random()*16|0,h=l=="x"?c:c&3|8;return h.toString(16)})}function e(l){return l.endsWith("/")?l:l+"/"}const i=()=>typeof window<"u";Bn.isBrowser=i;function r(l,c){var h,g;const{db:p,auth:v,realtime:E,global:S}=l,{db:b,auth:C,realtime:x,global:N}=c,U={db:Object.assign(Object.assign({},b),p),auth:Object.assign(Object.assign({},C),v),realtime:Object.assign(Object.assign({},x),E),storage:{},global:Object.assign(Object.assign(Object.assign({},N),S),{headers:Object.assign(Object.assign({},(h=N==null?void 0:N.headers)!==null&&h!==void 0?h:{}),(g=S==null?void 0:S.headers)!==null&&g!==void 0?g:{})}),accessToken:async()=>""};return l.accessToken?U.accessToken=l.accessToken:delete U.accessToken,U}function a(l){const c=l==null?void 0:l.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Bn}var eo={};const E_="2.86.2",qs=30*1e3,ud=3,Hc=ud*qs,aN="http://localhost:9999",lN="supabase.auth.token",uN={"X-Client-Info":`gotrue-js/${E_}`},cd="X-Supabase-Api-Version",S_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dN=600*1e3;let Ks=class extends Error{constructor(e,i,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}};function he(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}let T_=class extends Ks{constructor(e,i,r){super(e,i,r),this.name="AuthApiError",this.status=i,this.code=r}};function b_(n){return he(n)&&n.name==="AuthApiError"}let vi=class extends Ks{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}},$n=class extends Ks{constructor(e,i,r,a){super(e,r,a),this.name=i,this.status=r}},qt=class extends $n{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function w_(n){return he(n)&&n.name==="AuthSessionMissingError"}let Bi=class extends $n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},to=class extends $n{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},no=class extends $n{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function C_(n){return he(n)&&n.name==="AuthImplicitGrantRedirectError"}let dd=class extends $n{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Za=class extends $n{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}};function Va(n){return he(n)&&n.name==="AuthRetryableFetchError"}let fd=class extends $n{constructor(e,i,r){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}};function fN(n){return he(n)&&n.name==="AuthWeakPasswordError"}let el=class extends $n{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ny=` 	
\r=`.split(""),hN=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ny.length;e+=1)n[Ny[e].charCodeAt(0)]=-2;for(let e=0;e<tl.length;e+=1)n[tl[e].charCodeAt(0)]=e;return n})();function Iy(n,e,i){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(tl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(tl[r]),e.queuedBits-=6}}function A_(n,e,i){const r=hN[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function My(n){const e=[],i=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{gN(c,r,i)};for(let c=0;c<n.length;c+=1)A_(n.charCodeAt(c),a,l);return e.join("")}function pN(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function mN(n,e){for(let i=0;i<n.length;i+=1){let r=n.charCodeAt(i);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(n.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}pN(r,e)}}function gN(n,e,i){if(e.utf8seq===0){if(n<=127){i(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Js(n){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)A_(n.charCodeAt(a),i,r);return new Uint8Array(e)}function yN(n){const e=[];return mN(n,i=>e.push(i)),new Uint8Array(e)}function ji(n){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};return n.forEach(a=>Iy(a,i,r)),Iy(null,i,r),e.join("")}function vN(n){return Math.round(Date.now()/1e3)+n}function _N(){return Symbol("auth-callback")}const wt=()=>typeof window<"u"&&typeof document<"u",Hi={tested:!1,writable:!1},x_=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hi.tested)return Hi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Hi.tested=!0,Hi.writable=!0}catch{Hi.tested=!0,Hi.writable=!1}return Hi.writable};function EN(n){const e={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((r,a)=>{e[a]=r}),e}const R_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),SN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Hs=async(n,e,i)=>{await n.setItem(e,JSON.stringify(i))},Gi=async(n,e)=>{const i=await n.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},bt=async(n,e)=>{await n.removeItem(e)};class dl{constructor(){this.promise=new dl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}dl.promiseConstructor=Promise;function Gc(n){const e=n.split(".");if(e.length!==3)throw new el("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!cN.test(e[r]))throw new el("JWT not in base64url format");return{header:JSON.parse(My(e[0])),payload:JSON.parse(My(e[1])),signature:Js(e[2]),raw:{header:e[0],payload:e[1]}}}async function TN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function bN(n,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function wN(n){return("0"+n.toString(16)).substr(-2)}function CN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,wN).join("")}async function AN(n){const i=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function xN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const i=await AN(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ps(n,e,i=!1){const r=CN();let a=r;i&&(a+="/PASSWORD_RECOVERY"),await Hs(n,`${e}-code-verifier`,a);const l=await xN(r);return[l,r===l?"plain":"s256"]}const RN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NN(n){const e=n.headers.get(cd);if(!e||!e.match(RN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function IN(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function MN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(n){if(!DN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const n={};return new Proxy(n,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UN(n,e){return new Proxy(n,{get:(i,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,r,a)}})}function Dy(n){return JSON.parse(JSON.stringify(n))}const Vi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),kN=[502,503,504];async function Uy(n){var e;if(!SN(n))throw new Za(Vi(n),0);if(kN.includes(n.status))throw new Za(Vi(n),n.status);let i;try{i=await n.json()}catch(l){throw new vi(Vi(l),l)}let r;const a=NN(n);if(a&&a.getTime()>=S_["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new fd(Vi(i),n.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new qt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new fd(Vi(i),n.status,i.weak_password.reasons);throw new T_(Vi(i),n.status||500,r)}const PN=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),i))};async function Ee(n,e,i,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[cd]||(l[cd]=S_["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await ON(n,e,i+h,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function ON(n,e,i,r,a,l){const c=PN(e,r,a,l);let h;try{h=await n(i,Object.assign({},c))}catch(g){throw console.error(g),new Za(Vi(g),0)}if(h.ok||await Uy(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(g){await Uy(g)}}function hn(n){var e;let i=null;HN(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=vN(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:i,user:r},error:null}}function ky(n){const e=hn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function _i(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function LN(n){return{data:n,error:null}}function qN(n){const{action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l}=n,c=er(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Py(n){return n}function HN(n){return n.access_token&&n.refresh_token&&n.expires_in}const za=["global","local","others"];let Nd=class{constructor({url:e="",headers:i={},fetch:r}){this.url=e,this.headers=i,this.fetch=R_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=za[0]){if(za.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${za.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,i={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_i})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:i}=e,r=er(e,["options"]),a=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:qN,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(he(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_i})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,r,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Py});if(v.error)throw v.error;const E=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);p[`${N}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(he(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Os(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_i})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Os(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:_i})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,i=!1){Os(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:_i})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Os(e.userId);try{const{data:i,error:r}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:r}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Os(e.userId),Os(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,r,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Py});if(v.error)throw v.error;const E=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);p[`${N}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(he(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await Ee(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}};function Oy(n={}){return{getItem:e=>n[e]||null,setItem:(e,i)=>{n[e]=i},removeItem:e=>{delete n[e]}}}const zi={debug:!!(globalThis&&x_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Id extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let N_=class extends Id{};class GN extends Id{}async function I_(n,e,i){zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await i()}finally{zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new N_(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(zi.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}const Ly={};async function BN(n,e,i){var r;const a=(r=Ly[n])!==null&&r!==void 0?r:Promise.resolve(),l=Promise.race([a.catch(()=>null),e>=0?new Promise((c,h)=>{setTimeout(()=>{h(new GN(`Acquring process lock with name "${n}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await i());return Ly[n]=l.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await l}function VN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function M_(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function zN(n){return parseInt(n,16)}function FN(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function $N(n){var e;const{chainId:i,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:E,version:S}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const b=M_(n.address),C=v?`${v}://${r}`:r,x=n.statement?`${n.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${b}

${x}`;let U=`URI: ${E}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(U+=`
Expiration Time: ${a.toISOString()}`),h&&(U+=`
Not Before: ${h.toISOString()}`),g&&(U+=`
Request ID: ${g}`),p){let O=`
Resources:`;for(const M of p){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);O+=`
- ${M}`}U+=O}return`${N}
${U}`}class ht extends Error{constructor({message:e,code:i,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class nl extends ht{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function jN({error:n,options:e}){var i,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ht({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(D_(c)){if(l.rp.id!==c)return new ht({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function JN({error:n,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ht({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(D_(r)){if(i.rpId!==r)return new ht({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class YN{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const KN=new YN;function XN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:i,excludeCredentials:r}=n,a=er(n,["challenge","user","excludeCredentials"]),l=Js(e).buffer,c=Object.assign(Object.assign({},i),{id:Js(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Js(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function QN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:i}=n,r=er(n,["challenge","allowCredentials"]),a=Js(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Js(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function WN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:ji(new Uint8Array(n.response.attestationObject)),clientDataJSON:ji(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ZN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,r=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ji(new Uint8Array(a.authenticatorData)),clientDataJSON:ji(new Uint8Array(a.clientDataJSON)),signature:ji(new Uint8Array(a.signature)),userHandle:a.userHandle?ji(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function D_(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function qy(){var n,e;return!!(wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function eI(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:jN({error:e,options:n})}}}async function tI(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:JN({error:e,options:n})}}}const nI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},iI={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function il(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of n)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(i(c))r[l]=c;else if(e(c)){const h=r[l];e(h)?r[l]=il(h,c):r[l]=il(c)}else r[l]=c}return r}function sI(n,e){return il(nI,n,e||{})}function rI(n,e){return il(iI,n,e||{})}class oI{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:r,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??KN.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=sI(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:E}=await eI({publicKey:p,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}case"request":{const p=rI(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:E}=await tI(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}}}catch(c){return he(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Ks("rpId is required for WebAuthn authentication")};try{if(!qy())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:r,credential_response:g.credential_response}})}catch(c){return he(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Ks("rpId is required for WebAuthn registration")};try{if(!qy())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var E;return(E=v.data)===null||E===void 0?void 0:E.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return he(c)?{data:null,error:c}:{data:null,error:new vi("Unexpected error in register",c)}}}}VN();const aI={url:aN,storageKey:lN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Hy(n,e,i){return await i()}const Ls={};let Md=class hd{get jwks(){var e,i;return(i=(e=Ls[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Ls[this.storageKey]=Object.assign(Object.assign({},Ls[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Ls[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ls[this.storageKey]=Object.assign(Object.assign({},Ls[this.storageKey]),{cachedAt:e})}constructor(e){var i,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},aI),e);if(this.storageKey=l.storageKey,this.instanceID=(i=hd.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,hd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&wt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Nd({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=R_(l.fetch),this.lock=l.lock||Hy,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:wt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=I_:this.lock=Hy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:x_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Oy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Oy(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${E_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},r="none";if(wt()&&(i=EN(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),wt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),C_(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return he(i)?this._returnResult({error:i}):this._returnResult({error:new vi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,r,a;try{const l=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:hn}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,r,a;try{let l;if("email"in e){const{email:v,password:E,options:S}=e;let b=null,C=null;this.flowType==="pkce"&&([b,C]=await Ps(this.storage,this.storageKey)),l=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:E,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:b,code_challenge_method:C},xform:hn})}else if("phone"in e){const{phone:v,password:E,options:S}=e;l=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:E,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:hn})}else throw new to("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else throw new to("You must provide either an email or phone number and a password");const{data:r,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new Bi;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,r,a,l,c,h,g,p,v,E,S;let b,C;if("message"in e)b=e.message,C=e.signature;else{const{chain:x,wallet:N,statement:U,options:O}=e;let M;if(wt())if(typeof N=="object")M=N;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")M=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=N}const Y=new URL((i=O==null?void 0:O.url)!==null&&i!==void 0?i:window.location.href),L=await M.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=M_(L[0]);let X=(r=O==null?void 0:O.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!X){const D=await M.request({method:"eth_chainId"});X=zN(D)}const re={domain:Y.host,address:j,statement:U,uri:Y.href,version:"1",chainId:X,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=O==null?void 0:O.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=O==null?void 0:O.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=O==null?void 0:O.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=O==null?void 0:O.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=O==null?void 0:O.signInWithEthereum)===null||v===void 0?void 0:v.resources};b=$N(re),C=await M.request({method:"personal_sign",params:[FN(b),j]})}try{const{data:x,error:N}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:C},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:hn});if(N)throw N;if(!x||!x.session||!x.user){const U=new Bi;return this._returnResult({data:{user:null,session:null},error:U})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:N})}catch(x){if(he(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var i,r,a,l,c,h,g,p,v,E,S,b;let C,x;if("message"in e)C=e.message,x=e.signature;else{const{chain:N,wallet:U,statement:O,options:M}=e;let Y;if(wt())if(typeof U=="object")Y=U;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))Y=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=U}const L=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Y&&Y.signIn){const j=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),O?{statement:O}:null));let X;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")X=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)X=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)C=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),x=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${L.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(a=(r=M==null?void 0:M.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=M==null?void 0:M.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((c=M==null?void 0:M.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((E=(v=M==null?void 0:M.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||E===void 0)&&E.length?["Resources",...M.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const j=await Y.signMessage(new TextEncoder().encode(C),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:N,error:U}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:ji(x)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(U)throw U;if(!N||!N.session||!N.user){const O=new Bi;return this._returnResult({data:{user:null,session:null},error:O})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:U})}catch(N){if(he(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const i=await Gi(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(i??"").split("/");try{const{data:l,error:c}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hn});if(await bt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Bi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:r,token:a,access_token:l,nonce:c}=e,h=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:hn}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new Bi;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,r,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Ps(this.storage,this.storageKey));const{error:E}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new to("You must provide either an email or phone number.")}catch(h){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,r;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:h}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:hn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,r,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Ps(this.storage,this.storageKey));const p=await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:LN});return!((l=p.data)===null||l===void 0)&&l.url&&wt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new qt;const{error:a}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await Ee(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:h}=await Ee(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new to("You must provide either an email or phone number and a type")}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Hc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Gi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Bc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=UN(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_i}):await this._useSession(async i=>{var r,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qt}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:_i})})}catch(i){if(he(i))return w_(i)&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new qt;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Ps(this.storage,this.storageKey));const{data:p,error:v}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:_i});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qt;const i=Date.now()/1e3;let r=i,a=!0,l=null;const{payload:c}=Gc(e.access_token);if(c.exp&&(r=c.exp,a=r<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(he(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var r;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new qt;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!wt())throw new no("No browser detected.");if(e.error||e.error_description||e.error_code)throw new no(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new dd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new no("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dd("No code detected.");const{data:O,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new no("No session defined in URL");const v=Math.round(Date.now()/1e3),E=parseInt(h);let S=v+E;g&&(S=parseInt(g));const b=S-v;b*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${E}s`);const C=S-E;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,S,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,S,v);const{data:x,error:N}=await this._getUser(l);if(N)throw N;const U={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:S,refresh_token:c,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Gi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(b_(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=_N(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async i=>{var r,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Ps(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:r,error:a}=await this._useSession(async l=>{var c,h,g,p,v;const{data:E,error:S}=l;if(S)throw S;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",b,{headers:this.headers,jwt:(v=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return wt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(he(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var r;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,E=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:hn}),{data:S,error:b}=E;return b?this._returnResult({data:{user:null,session:null},error:b}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Bi}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:b}))}catch(a){if(await bt(this.storage,`${this.storageKey}-code-verifier`),he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:c}=i;if(c)throw c;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await bN(async a=>(a>0&&await TN(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Va(l)&&Date.now()+c-r<qs})}catch(r){if(this._debug(i,"error",r),he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),wt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Gi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Gi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Hs(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Bc()}else if(a&&!a.user&&!a.user){const c=await Gi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await bt(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,a)):a.user=Bc()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Hc;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Hc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Va(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var i,r;if(!e)throw new qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new dl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new qt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),he(l)){const c={data:null,error:l};return Va(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await bt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=Dy(a);await Hs(this.storage,this.storageKey,l)}else{const a=Dy(i);await Hs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await bt(this.storage,this.storageKey),await bt(this.storage,this.storageKey+"-code-verifier"),await bt(this.storage,this.storageKey+"-user"),this.userStorage&&await bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qs}ms, refresh threshold is ${ud} ticks`),a<=ud&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Id)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,r){const a=[`provider=${encodeURIComponent(i)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ps(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?WN(e.webauthn.credential_response):ZN(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:XN(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:QN(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Gc(r.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=r.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?await Ee(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new qt})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new qt});const c=await Ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&wt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new qt});const c=await Ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&wt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?await Ee(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new qt})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?(await Ee(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qt})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let r=i.keys.find(h=>h.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+dN>a)return r;const{data:l,error:c}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,i={}){try{let r=e;if(!r){const{data:b,error:C}=await this.getSession();if(C||!b.session)return this._returnResult({data:null,error:C});r=b.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=Gc(r);i!=null&&i.allowExpired||IN(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:l,header:a,signature:c},error:null}}const v=MN(a.alg),E=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,E,c,yN(`${h}.${g}`)))throw new el("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}};Md.nextInstanceID={};const lI=Nd,uI=Md,cI=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:lI,AuthApiError:T_,AuthClient:uI,AuthError:Ks,AuthImplicitGrantRedirectError:no,AuthInvalidCredentialsError:to,AuthInvalidJwtError:el,AuthInvalidTokenResponseError:Bi,AuthPKCEGrantCodeExchangeError:dd,AuthRetryableFetchError:Za,AuthSessionMissingError:qt,AuthUnknownError:vi,AuthWeakPasswordError:fd,CustomAuthError:$n,GoTrueAdminApi:Nd,GoTrueClient:Md,NavigatorLockAcquireTimeoutError:N_,SIGN_OUT_SCOPES:za,isAuthApiError:b_,isAuthError:he,isAuthImplicitGrantRedirectError:C_,isAuthRetryableFetchError:Va,isAuthSessionMissingError:w_,isAuthWeakPasswordError:fN,lockInternals:zi,navigatorLock:I_,processLock:BN},Symbol.toStringTag,{value:"Module"})),U_=oo(cI);var Gy;function dI(){if(Gy)return eo;Gy=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.SupabaseAuthClient=void 0;const n=U_;let e=class extends n.AuthClient{constructor(r){super(r)}};return eo.SupabaseAuthClient=e,eo}var By;function Vy(){if(By)return Na;By=1,Object.defineProperty(Na,"__esModule",{value:!0});const n=$v,e=Qv(),i=o_,r=nN,a=sN(),l=rN(),c=oN(),h=dI();class g{constructor(v,E,S){var b,C,x;this.supabaseUrl=v,this.supabaseKey=E;const N=(0,c.validateSupabaseUrl)(v);if(!E)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const U=`sb-${N.hostname.split(".")[0]}-auth-token`,O={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:U}),global:a.DEFAULT_GLOBAL_OPTIONS},M=(0,c.applySettingDefaults)(S??{},O);this.storageKey=(b=M.auth.storageKey)!==null&&b!==void 0?b:"",this.headers=(C=M.global.headers)!==null&&C!==void 0?C:{},M.accessToken?(this.accessToken=M.accessToken,this.auth=new Proxy({},{get:(Y,L)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(L)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=M.auth)!==null&&x!==void 0?x:{},this.headers,M.global.fetch),this.fetch=(0,l.fetchWithAuth)(E,this._getAccessToken.bind(this),M.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},M.realtime)),this.accessToken&&this.accessToken().then(Y=>this.realtime.setAuth(Y)).catch(Y=>console.warn("Failed to set initial Realtime auth token:",Y)),this.rest=new e.PostgrestClient(new URL("rest/v1",N).href,{headers:this.headers,schema:M.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,S==null?void 0:S.storage),M.accessToken||this._listenForAuthEvents()}get functions(){return new n.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(v){return this.rest.from(v)}schema(v){return this.rest.schema(v)}rpc(v,E={},S={head:!1,get:!1,count:void 0}){return this.rest.rpc(v,E,S)}channel(v,E={config:{}}){return this.realtime.channel(v,E)}getChannels(){return this.realtime.getChannels()}removeChannel(v){return this.realtime.removeChannel(v)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var v,E;if(this.accessToken)return await this.accessToken();const{data:S}=await this.auth.getSession();return(E=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&E!==void 0?E:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:v,persistSession:E,detectSessionInUrl:S,storage:b,userStorage:C,storageKey:x,flowType:N,lock:U,debug:O,throwOnError:M},Y,L){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),Y),storageKey:x,autoRefreshToken:v,persistSession:E,detectSessionInUrl:S,storage:b,userStorage:C,flowType:N,lock:U,debug:O,throwOnError:M,fetch:L,hasCustomAuthorizationHeader:Object.keys(this.headers).some(X=>X.toLowerCase()==="authorization")})}_initRealtimeClient(v){return new i.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},v),{params:Object.assign({apikey:this.supabaseKey},v==null?void 0:v.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((E,S)=>{this._handleTokenChanged(E,"CLIENT",S==null?void 0:S.access_token)})}_handleTokenChanged(v,E,S){(v==="TOKEN_REFRESHED"||v==="SIGNED_IN")&&this.changedAccessToken!==S?(this.changedAccessToken=S,this.realtime.setAuth(S)):v==="SIGNED_OUT"&&(this.realtime.setAuth(),E=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Na.default=g,Na}var zy;function fI(){return zy||(zy=1,(function(n){var e=Gn&&Gn.__createBinding||(Object.create?(function(v,E,S,b){b===void 0&&(b=S);var C=Object.getOwnPropertyDescriptor(E,S);(!C||("get"in C?!E.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(v,b,C)}):(function(v,E,S,b){b===void 0&&(b=S),v[b]=E[S]})),i=Gn&&Gn.__exportStar||function(v,E){for(var S in v)S!=="default"&&!Object.prototype.hasOwnProperty.call(E,S)&&e(E,v,S)},r=Gn&&Gn.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(n,"__esModule",{value:!0}),n.createClient=n.SupabaseClient=n.FunctionRegion=n.FunctionsError=n.FunctionsRelayError=n.FunctionsFetchError=n.FunctionsHttpError=n.PostgrestError=void 0;const a=r(Vy());i(U_,n);var l=Qv();Object.defineProperty(n,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var c=$v;Object.defineProperty(n,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(n,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(n,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(n,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(n,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),i(o_,n);var h=Vy();Object.defineProperty(n,"SupabaseClient",{enumerable:!0,get:function(){return r(h).default}});const g=(v,E,S)=>new a.default(v,E,S);n.createClient=g;function p(){if(typeof window<"u"||typeof process>"u")return!1;const v=process.version;if(v==null)return!1;const E=v.match(/^v(\d+)\./);return E?parseInt(E[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Gn)),Gn}var k_=fI();const P_=Fy(k_),hI=iS({__proto__:null,default:P_},[k_]),{PostgrestError:YI,FunctionsHttpError:KI,FunctionsFetchError:XI,FunctionsRelayError:QI,FunctionsError:WI,FunctionRegion:ZI,SupabaseClient:eM,createClient:pI,GoTrueAdminApi:tM,GoTrueClient:nM,AuthAdminApi:iM,AuthClient:sM,navigatorLock:rM,NavigatorLockAcquireTimeoutError:oM,lockInternals:aM,processLock:lM,SIGN_OUT_SCOPES:uM,AuthError:cM,AuthApiError:dM,AuthUnknownError:fM,CustomAuthError:hM,AuthSessionMissingError:pM,AuthInvalidTokenResponseError:mM,AuthInvalidCredentialsError:gM,AuthImplicitGrantRedirectError:yM,AuthPKCEGrantCodeExchangeError:vM,AuthRetryableFetchError:_M,AuthWeakPasswordError:EM,AuthInvalidJwtError:SM,isAuthError:TM,isAuthApiError:bM,isAuthSessionMissingError:wM,isAuthImplicitGrantRedirectError:CM,isAuthRetryableFetchError:AM,isAuthWeakPasswordError:xM,RealtimePresence:RM,RealtimeChannel:NM,RealtimeClient:IM,REALTIME_LISTEN_TYPES:MM,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:DM,REALTIME_PRESENCE_LISTEN_EVENTS:UM,REALTIME_SUBSCRIBE_STATES:kM,REALTIME_CHANNEL_STATES:PM}=P_||hI,mI="https://dkmntyruxypkebviwlrl.supabase.co",gI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrbW50eXJ1eHlwa2Vidml3bHJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NDUyNjYsImV4cCI6MjA4MDUyMTI2Nn0.iEv5f76DQc33fHoe6GuSGvTCVan7y9u9v-_AT5OKeJA",se=pI(mI,gI),Ki=Object.freeze(Object.defineProperty({__proto__:null,supabase:se},Symbol.toStringTag,{value:"Module"})),O_=ee.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),yI=()=>ee.useContext(O_),vI=({children:n})=>{const[e,i]=ee.useState(null),[r,a]=ee.useState(null),[l,c]=ee.useState(!0);ee.useEffect(()=>{se.auth.getSession().then(({data:{session:p}})=>{a(p),i((p==null?void 0:p.user)??null),c(!1)});const{data:{subscription:g}}=se.auth.onAuthStateChange((p,v)=>{a(v),i((v==null?void 0:v.user)??null),c(!1)});return()=>g.unsubscribe()},[]);const h=async()=>{await se.auth.signOut()};return _.jsx(O_.Provider,{value:{user:e,session:r,loading:l,signOut:h},children:n})},_I=()=>{const[n,e]=ee.useState([]),[i,r]=ee.useState(!0),[a,l]=ee.useState(null),c=async()=>{try{r(!0);const{data:{user:J}}=await se.auth.getUser();if(!J)return;const{data:V,error:B}=await se.from("people").select("*").order("created_at",{ascending:!1});if(B)throw B;const A=V.map(Ue=>Ue.id);if(A.length===0){e([]);return}const[P,$,W,oe,le]=await Promise.all([se.from("health_records").select("*").in("person_id",A),se.from("todos").select("*").in("person_id",A),se.from("notes").select("*").in("person_id",A),se.from("financial_records").select("*").in("person_id",A),se.from("person_shares").select("*, profiles(full_name, email)").in("person_id",A)]);if(P.error)throw P.error;if($.error)throw $.error;if(W.error)throw W.error;if(oe.error)throw oe.error;if(le.error)throw le.error;const ve=(P.data||[]).map(Ue=>Ue.id),Ae=($.data||[]).map(Ue=>Ue.id),Te=(W.data||[]).map(Ue=>Ue.id),Oe=(oe.data||[]).map(Ue=>Ue.id),nt=[];ve.length>0&&nt.push(se.from("item_shares").select("*").eq("record_type","HEALTH").in("record_id",ve)),Ae.length>0&&nt.push(se.from("item_shares").select("*").eq("record_type","TODO").in("record_id",Ae)),Te.length>0&&nt.push(se.from("item_shares").select("*").eq("record_type","NOTE").in("record_id",Te)),Oe.length>0&&nt.push(se.from("item_shares").select("*").eq("record_type","FINANCE").in("record_id",Oe));const yt=(nt.length>0?await Promise.all(nt):[]).flatMap(Ue=>Ue.error?(console.error("Error fetching item shares:",Ue.error),[]):Ue.data||[]),Rt=V.map(Ue=>{const nr=P.data.filter(me=>me.person_id===Ue.id),fl=$.data.filter(me=>me.person_id===Ue.id),uo=W.data.filter(me=>me.person_id===Ue.id),ir=oe.data.filter(me=>me.person_id===Ue.id),Gt=le.data.filter(me=>me.person_id===Ue.id).map(me=>{var rt;return((rt=me.profiles)==null?void 0:rt.full_name)||me.user_email||"Unknown"}),hl=yt.filter(me=>me.record_type==="HEALTH"),pl=yt.filter(me=>me.record_type==="TODO"),Nt=yt.filter(me=>me.record_type==="NOTE"),ml=yt.filter(me=>me.record_type==="FINANCE");return{id:Ue.id,name:Ue.name,relation:Ue.relation||"",avatarUrl:Ue.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${Ue.name}`,themeColor:Ue.theme_color||"bg-stone-100",birthday:Ue.birthday||"",email:Ue.email||void 0,linkedUserId:Ue.linked_user_id||void 0,collaborators:Gt,sharingPreference:Ue.sharing_preference||"ASK_EVERY_TIME",health:nr.map(me=>({id:me.id,title:me.title,date:me.date,type:me.type||"OTHER",notes:me.notes||"",attachments:me.attachments||[],sharedWithCollaboratorIds:hl.filter(rt=>rt.record_id===me.id).map(rt=>rt.person_share_id),meta:{isShared:Gt.length>0,sharedWith:Gt,lastUpdatedBy:"You",updatedAt:new Date(me.created_at||"")}})),todos:fl.map(me=>({id:me.id,title:me.title,description:me.description||"",dueDate:me.due_date||"",isCompleted:me.is_completed||!1,priority:me.priority||"MEDIUM",sharedWithCollaboratorIds:pl.filter(rt=>rt.record_id===me.id).map(rt=>rt.person_share_id),meta:{isShared:Gt.length>0,sharedWith:Gt,lastUpdatedBy:"You",updatedAt:new Date(me.created_at||"")}})),notes:uo.map(me=>({id:me.id,title:me.title||"",content:me.content||"",tags:me.tags||[],sharedWithCollaboratorIds:Nt.filter(rt=>rt.record_id===me.id).map(rt=>rt.person_share_id),meta:{isShared:Gt.length>0,sharedWith:Gt,lastUpdatedBy:"You",updatedAt:new Date(me.created_at||"")}})),financial:ir.map(me=>({id:me.id,title:me.title,amount:me.amount,type:me.type||"EXPENSE",date:me.date,sharedWithCollaboratorIds:ml.filter(rt=>rt.record_id===me.id).map(rt=>rt.person_share_id),meta:{isShared:Gt.length>0,sharedWith:Gt,lastUpdatedBy:"You",updatedAt:new Date(me.created_at||"")}}))}});e(Rt)}catch(J){console.error("Error fetching people:",J),l(J.message)}finally{r(!1)}};return ee.useEffect(()=>{c()},[]),{people:n,loading:i,error:a,refresh:c,addPerson:async(J,V,B,A,P)=>{const{data:{user:$}}=await se.auth.getUser();if(!$)return;let W=null;if(A){const le=A.name.split(".").pop(),Ae=`${`${Math.random()}.${le}`}`,{error:Te}=await se.storage.from("avatars").upload(Ae,A);if(!Te){const{data:{publicUrl:Oe}}=se.storage.from("avatars").getPublicUrl(Ae);W=Oe}}const{error:oe}=await se.from("people").insert({name:J,relation:V,birthday:B||null,avatar_url:W,email:P||null,created_by:$.id,theme_color:"bg-stone-100"});if(oe)throw oe;await c()},updatePerson:async J=>{const{error:V}=await se.from("people").update({name:J.name,relation:J.relation,sharing_preference:J.sharingPreference,birthday:J.birthday===""?null:J.birthday,email:J.email||null}).eq("id",J.id);if(V)throw V;await c()},deletePerson:async J=>{const{error:V}=await se.from("people").delete().eq("id",J);if(V)throw V;await c()},addTodo:async(J,V,B,A="MEDIUM",P="",$)=>{const{data:{user:W}}=await se.auth.getUser();if(!W)return;const{data:oe,error:le}=await se.from("todos").insert({person_id:J,title:V,due_date:B,priority:A,description:P||null,created_by:W.id}).select().single();if(le)throw le;if($&&$.length>0&&oe){const ve=$.map(Te=>({record_type:"TODO",record_id:oe.id,person_share_id:Te})),{error:Ae}=await se.from("item_shares").insert(ve);Ae&&console.error("Error creating item shares:",Ae)}await c()},updateTodo:async(J,V)=>{const B={};V.title!==void 0&&(B.title=V.title),V.dueDate!==void 0&&(B.due_date=V.dueDate),V.priority!==void 0&&(B.priority=V.priority),V.description!==void 0&&(B.description=V.description),V.isCompleted!==void 0&&(B.is_completed=V.isCompleted);const{error:A}=await se.from("todos").update(B).eq("id",J);if(A)throw A;if(V.sharedWithCollaboratorIds!==void 0&&(await se.from("item_shares").delete().eq("record_type","TODO").eq("record_id",J),V.sharedWithCollaboratorIds.length>0)){const P=V.sharedWithCollaboratorIds.map(W=>({record_type:"TODO",record_id:J,person_share_id:W})),{error:$}=await se.from("item_shares").insert(P);$&&console.error("Error updating item shares:",$)}await c()},deleteTodo:async J=>{const{error:V}=await se.from("todos").delete().eq("id",J);if(V)throw V;await c()},toggleTodo:async(J,V)=>{const{error:B}=await se.from("todos").update({is_completed:V}).eq("id",J);if(B)throw B;await c()},addHealthRecord:async(J,V,B,A,P,$,W)=>{try{const{data:{user:oe}}=await se.auth.getUser();if(!oe){console.error("No user found when adding health record"),alert("You must be logged in to add health records");return}console.log("Adding health record:",{personId:J,title:V,date:B,notes:A,type:P,filesCount:($==null?void 0:$.length)||0});let le=[];if($&&$.length>0){console.log("Uploading files to Health Records bucket...");for(const Te of $){const Oe=Te.name.split(".").pop(),nt=`${J}/${Date.now()}_${Math.random()}.${Oe}`;console.log("Uploading file:",nt);const{error:ie,data:yt}=await se.storage.from("Health Records").upload(nt,Te);if(ie){console.error("Error uploading file:",ie),alert(`Failed to upload file ${Te.name}: ${ie.message}`);continue}console.log("File uploaded successfully:",yt);const{data:{publicUrl:Rt}}=se.storage.from("Health Records").getPublicUrl(nt);console.log("Public URL:",Rt),le.push(Rt)}}console.log("Inserting health record with attachments:",le);const{error:ve,data:Ae}=await se.from("health_records").insert({person_id:J,title:V,date:B,notes:A,type:P,attachments:le,created_by:oe.id}).select().single();if(ve)throw console.error("Error inserting health record:",ve),alert(`Failed to save health record: ${ve.message}`),ve;if(W&&W.length>0&&Ae){const Te=W.map(nt=>({record_type:"HEALTH",record_id:Ae.id,person_share_id:nt})),{error:Oe}=await se.from("item_shares").insert(Te);Oe&&console.error("Error creating item shares:",Oe)}console.log("Health record inserted successfully:",Ae),await c()}catch(oe){console.error("Unexpected error in addHealthRecord:",oe),alert(`An error occurred: ${oe.message||"Unknown error"}`)}},updateHealthRecord:async(J,V)=>{const B={};if(V.title!==void 0&&(B.title=V.title),V.date!==void 0&&(B.date=V.date),V.notes!==void 0&&(B.notes=V.notes),V.type!==void 0&&(B.type=V.type),Object.keys(B).length>0){const{error:A}=await se.from("health_records").update(B).eq("id",J);if(A)throw A}if(V.sharedWithCollaboratorIds!==void 0&&(await se.from("item_shares").delete().eq("record_type","HEALTH").eq("record_id",J),V.sharedWithCollaboratorIds.length>0)){const A=V.sharedWithCollaboratorIds.map($=>({record_type:"HEALTH",record_id:J,person_share_id:$})),{error:P}=await se.from("item_shares").insert(A);P&&console.error("Error updating item shares:",P)}await c()},deleteHealthRecord:async J=>{const{error:V}=await se.from("health_records").delete().eq("id",J);if(V)throw V;await c()},addNote:async(J,V,B,A)=>{const{data:{user:P}}=await se.auth.getUser();if(!P)return;const{data:$,error:W}=await se.from("notes").insert({person_id:J,title:V,content:B,created_by:P.id}).select().single();if(W)throw W;if(A&&A.length>0&&$){const oe=A.map(ve=>({record_type:"NOTE",record_id:$.id,person_share_id:ve})),{error:le}=await se.from("item_shares").insert(oe);le&&console.error("Error creating item shares:",le)}await c()},updateNote:async(J,V)=>{const B={};if(V.title!==void 0&&(B.title=V.title),V.content!==void 0&&(B.content=V.content),Object.keys(B).length>0){const{error:A}=await se.from("notes").update(B).eq("id",J);if(A)throw A}if(V.sharedWithCollaboratorIds!==void 0&&(await se.from("item_shares").delete().eq("record_type","NOTE").eq("record_id",J),V.sharedWithCollaboratorIds.length>0)){const A=V.sharedWithCollaboratorIds.map($=>({record_type:"NOTE",record_id:J,person_share_id:$})),{error:P}=await se.from("item_shares").insert(A);P&&console.error("Error updating item shares:",P)}await c()},deleteNote:async J=>{const{error:V}=await se.from("notes").delete().eq("id",J);if(V)throw V;await c()},addFinanceRecord:async(J,V,B,A,P,$)=>{const{data:{user:W}}=await se.auth.getUser();if(!W)return;const{data:oe,error:le}=await se.from("financial_records").insert({person_id:J,title:V,amount:B,type:A,date:P,created_by:W.id}).select().single();if(le)throw le;if($&&$.length>0&&oe){const ve=$.map(Te=>({record_type:"FINANCE",record_id:oe.id,person_share_id:Te})),{error:Ae}=await se.from("item_shares").insert(ve);Ae&&console.error("Error creating item shares:",Ae)}await c()},updateFinanceRecord:async(J,V)=>{const B={};if(V.title!==void 0&&(B.title=V.title),V.amount!==void 0&&(B.amount=V.amount),V.type!==void 0&&(B.type=V.type),V.date!==void 0&&(B.date=V.date),Object.keys(B).length>0){const{error:A}=await se.from("financial_records").update(B).eq("id",J);if(A)throw A}if(V.sharedWithCollaboratorIds!==void 0&&(await se.from("item_shares").delete().eq("record_type","FINANCE").eq("record_id",J),V.sharedWithCollaboratorIds.length>0)){const A=V.sharedWithCollaboratorIds.map($=>({record_type:"FINANCE",record_id:J,person_share_id:$})),{error:P}=await se.from("item_shares").insert(A);P&&console.error("Error updating item shares:",P)}await c()},deleteFinanceRecord:async J=>{const{error:V}=await se.from("financial_records").delete().eq("id",J);if(V)throw V;await c()},uploadAvatar:async(J,V)=>{const{data:{user:B}}=await se.auth.getUser();if(!B)return;const A=V.name.split(".").pop(),$=`${`${J}-${Math.random()}.${A}`}`,{error:W}=await se.storage.from("avatars").upload($,V);if(W)throw W;const{data:{publicUrl:oe}}=se.storage.from("avatars").getPublicUrl($),{error:le}=await se.from("people").update({avatar_url:oe}).eq("id",J);if(le)throw le;await c()},shareRecord:async(J,V,B,A)=>{const{data:{user:P}}=await se.auth.getUser();if(!P)throw new Error("Not authenticated");const{data:$}=await se.from("profiles").select("id").eq("email",A).single(),{error:W}=await se.from("record_shares").insert({record_type:J,record_id:V,source_person_id:B,shared_by:P.id,shared_with_user_id:($==null?void 0:$.id)||null,shared_with_email:A,status:"PENDING"});if(W)throw W;await c()},unshareRecord:async J=>{const{error:V}=await se.from("record_shares").delete().eq("id",J);if(V)throw V;await c()},getPendingShares:async()=>{const{data:{user:J}}=await se.auth.getUser();if(!J)return[];const{data:V,error:B}=await se.from("record_shares").select(`
                *,
                source_person:people!source_person_id(name),
                sharer:profiles!shared_by(full_name, email)
            `).eq("shared_with_user_id",J.id).eq("status","PENDING");return B?(console.error("Error fetching pending shares:",B),[]):V||[]},acceptShare:async(J,V)=>{const{error:B}=await se.from("record_shares").update({status:"ACCEPTED",merged_into_person_id:V}).eq("id",J);if(B)throw B;await c()},declineShare:async J=>{const{error:V}=await se.from("record_shares").update({status:"DECLINED"}).eq("id",J);if(V)throw V},linkProfileToUser:async(J,V)=>{const{error:B}=await se.from("people").update({linked_user_id:V}).eq("id",J);if(B)throw B;await c()},sendCollaborationRequest:async(J,V,B)=>{const{data:{user:A}}=await se.auth.getUser();if(!A)throw new Error("Not authenticated");let P=V;if(!P&&B){const{data:W}=await se.from("profiles").select("id").eq("email",B).single();P=W==null?void 0:W.id}const{error:$}=await se.from("collaboration_requests").insert({person_id:J,requester_id:A.id,target_user_id:P||null,target_email:B||null,status:"PENDING"});if($)throw $},fetchPendingCollaborationRequests:async()=>{const{data:{user:J}}=await se.auth.getUser();if(!J)return[];const{data:V,error:B}=await se.from("collaboration_requests").select(`
                *,
                person:people!person_id(name),
                requester:profiles!requester_id(full_name, email)
            `).eq("target_user_id",J.id).eq("status","PENDING").order("created_at",{ascending:!1});return B?(console.error("Error fetching collaboration requests:",B),[]):(V||[]).map(A=>{var P,$,W;return{id:A.id,personId:A.person_id,personName:((P=A.person)==null?void 0:P.name)||"Unknown",requesterId:A.requester_id,requesterName:(($=A.requester)==null?void 0:$.full_name)||"Unknown",requesterEmail:((W=A.requester)==null?void 0:W.email)||"",targetUserId:A.target_user_id,targetEmail:A.target_email,status:A.status,mergedIntoPersonId:A.merged_into_person_id,createdAt:new Date(A.created_at),updatedAt:new Date(A.updated_at)}})},acceptCollaborationRequest:async(J,V)=>{const{data:{user:B}}=await se.auth.getUser();if(!B)throw new Error("Not authenticated");const{data:A,error:P}=await se.from("collaboration_requests").select("person_id").eq("id",J).single();if(P||!A)throw new Error("Request not found");const{error:$}=await se.from("person_shares").insert({person_id:V||A.person_id,user_id:B.id});if($)throw $;const{error:W}=await se.from("collaboration_requests").update({status:"ACCEPTED",merged_into_person_id:V}).eq("id",J);if(W)throw W;await c()},declineCollaborationRequest:async J=>{const{error:V}=await se.from("collaboration_requests").update({status:"DECLINED"}).eq("id",J);if(V)throw V;await c()}}},EI=({isOpen:n,onClose:e,onAdd:i})=>{const[r,a]=ee.useState(""),[l,c]=ee.useState(""),[h,g]=ee.useState(""),[p,v]=ee.useState(""),[E,S]=ee.useState(void 0),b=C=>{C.preventDefault(),r&&l&&(i(r,l,h,E,p||void 0),a(""),c(""),g(""),v(""),S(void 0),e())};return _.jsx(Qt,{isOpen:n,onClose:e,title:"Add New Person",children:_.jsxs("form",{onSubmit:b,className:"space-y-4",children:[_.jsx("div",{className:"flex justify-center mb-4",children:_.jsxs("label",{className:"relative w-24 h-24 rounded-full bg-stone-100 flex items-center justify-center cursor-pointer border-2 border-dashed border-stone-300 hover:border-stone-400 transition-colors overflow-hidden",children:[E?_.jsx("img",{src:URL.createObjectURL(E),alt:"Preview",className:"w-full h-full object-cover"}):_.jsx(Re,{name:"add_a_photo",className:"text-stone-400 text-2xl"}),_.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:C=>{C.target.files&&C.target.files[0]&&S(C.target.files[0])}})]})}),_.jsx(tt,{label:"Name",value:r,onChange:C=>a(C.target.value),placeholder:"e.g. Mom",autoFocus:!0}),_.jsx(tt,{label:"Relation",value:l,onChange:C=>c(C.target.value),placeholder:"e.g. Mother"}),_.jsx(tt,{label:"Birthday (Optional)",type:"date",value:h,onChange:C=>g(C.target.value)}),_.jsx(tt,{label:"Email (Optional)",type:"email",value:p,onChange:C=>v(C.target.value),placeholder:"email@example.com"}),_.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[_.jsx(Se,{variant:"ghost",onClick:e,type:"button",children:"Cancel"}),_.jsx(Se,{variant:"primary",type:"submit",disabled:!r||!l,children:"Add Person"})]})]})})},SI=()=>{const[n,e]=ee.useState(""),[i,r]=ee.useState(""),[a,l]=ee.useState(!1),[c,h]=ee.useState(!1),[g,p]=ee.useState(null),[v,E]=ee.useState(""),S=async C=>{C.preventDefault(),h(!0),p(null);try{if(a){const{error:x}=await se.auth.signUp({email:n,password:i,options:{data:{full_name:v,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n}`}}});if(x)throw x}else{const{error:x}=await se.auth.signInWithPassword({email:n,password:i});if(x)throw x}}catch(x){p(x.message)}finally{h(!1)}},b=async()=>{h(!0);try{const{error:C}=await se.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(C)throw C}catch(C){p(C.message),h(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream p-4",children:_.jsxs("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-stone-100 text-center animate-fade-in-up",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-rose-100 mb-6 text-rose-500",children:_.jsx(Re,{name:"spa",className:"text-4xl"})}),_.jsx("h1",{className:"text-3xl font-bold text-stone-800 mb-2",children:"Welcome to Kinfolk"}),_.jsx("p",{className:"text-stone-500 mb-8",children:a?"Create your family circle":"Sign in to your circle"}),_.jsxs("form",{onSubmit:S,className:"space-y-4 text-left",children:[a&&_.jsx(tt,{label:"Full Name",value:v,onChange:C=>E(C.target.value),placeholder:"John Doe",required:!0}),_.jsx(tt,{label:"Email",type:"email",value:n,onChange:C=>e(C.target.value),placeholder:"hello@example.com",required:!0}),_.jsx(tt,{label:"Password",type:"password",value:i,onChange:C=>r(C.target.value),placeholder:"",required:!0}),g&&_.jsx("div",{className:"p-3 bg-red-50 text-red-500 text-sm rounded-xl",children:g}),_.jsx(Se,{variant:"primary",type:"submit",className:"w-full justify-center py-3 text-lg",disabled:c,children:c?"Processing...":a?"Create Account":"Sign In"})]}),_.jsxs("div",{className:"mt-6",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-0 flex items-center",children:_.jsx("div",{className:"w-full border-t border-stone-200"})}),_.jsx("div",{className:"relative flex justify-center text-sm",children:_.jsx("span",{className:"px-2 bg-white text-stone-500",children:"Or continue with"})})]}),_.jsxs("button",{onClick:b,disabled:c,className:"mt-6 w-full flex items-center justify-center gap-3 px-4 py-3 border border-stone-200 rounded-xl hover:bg-stone-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-5 h-5"}),_.jsx("span",{className:"font-medium text-stone-700",children:"Google"})]})]}),_.jsxs("div",{className:"mt-8 text-sm text-stone-500",children:[a?"Already have an account?":"Don't have an account?",_.jsx("button",{onClick:()=>l(!a),className:"ml-2 font-bold text-rose-500 hover:text-rose-600",children:a?"Sign In":"Sign Up"})]})]})})},TI=()=>{var Te;const{user:n,signOut:e,loading:i}=yI(),{people:r,loading:a,addPerson:l,updatePerson:c,deletePerson:h,addTodo:g,updateTodo:p,deleteTodo:v,toggleTodo:E,addHealthRecord:S,updateHealthRecord:b,deleteHealthRecord:C,addNote:x,updateNote:N,deleteNote:U,addFinanceRecord:O,updateFinanceRecord:M,deleteFinanceRecord:Y,uploadAvatar:L,shareRecord:j,unshareRecord:X,linkProfileToUser:re,sendCollaborationRequest:D,fetchPendingCollaborationRequests:te,acceptCollaborationRequest:de,declineCollaborationRequest:ye}=_I(),[pe,Ge]=ee.useState(null),[Pe,z]=ee.useState(xe.PROFILE),[ne,J]=ee.useState(!1),[V,B]=ee.useState(!1),[A,P]=ee.useState([]),$=Fa.useCallback(async()=>{if(n&&te){const Oe=await te();P(Oe)}},[n,te]);Fa.useEffect(()=>{$()},[$]);const W=async(Oe,nt)=>{de&&(await de(Oe,nt),await $())},oe=async Oe=>{ye&&(await ye(Oe),await $())},le=(Oe,nt)=>{Ge(Oe),z(nt||xe.PROFILE)},ve=r.find(Oe=>Oe.id===pe);if(i||a)return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rose-500"})});if(!n)return _.jsx(SI,{});const Ae={id:n.id,name:n.user_metadata.full_name||((Te=n.email)==null?void 0:Te.split("@")[0])||"User",email:n.email||"",avatarUrl:n.user_metadata.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.email}`};return _.jsxs("div",{className:"min-h-screen bg-cream font-sans text-stone-800 selection:bg-rose-200",children:[!pe&&_.jsxs("div",{className:"md:hidden p-4 flex justify-between items-center bg-white/80 backdrop-blur sticky top-0 z-10 border-b border-stone-100",children:[_.jsxs("span",{className:"font-extrabold text-xl tracking-tight text-stone-800 flex items-center gap-1",children:[_.jsx(Re,{name:"spa",className:"text-rose-400"}),"Kinfolk"]}),_.jsx("div",{className:"flex gap-2",children:_.jsx("button",{onClick:()=>e(),className:"p-2 text-stone-400",children:_.jsx(Bs,{src:Ae.avatarUrl,alt:"User",size:"w-8 h-8"})})})]}),_.jsxs("div",{className:"flex h-screen overflow-hidden",children:[_.jsxs("nav",{className:"hidden md:flex w-64 flex-col bg-white border-r border-stone-100 p-6 h-full z-20",children:[_.jsxs("div",{className:"mb-8 flex items-center gap-2 px-2",children:[_.jsx(Re,{name:"spa",className:"text-rose-400 text-3xl"}),_.jsx("span",{className:"font-extrabold text-2xl tracking-tight text-stone-800",children:"Kinfolk"})]}),_.jsxs("div",{className:"mb-6 p-3 bg-stone-50 rounded-xl flex items-center gap-3 border border-stone-100",children:[_.jsx(Bs,{src:Ae.avatarUrl,alt:Ae.name}),_.jsxs("div",{className:"overflow-hidden",children:[_.jsx("p",{className:"text-xs text-stone-400 font-bold uppercase",children:"Logged in as"}),_.jsx("p",{className:"font-bold text-stone-800 truncate",children:Ae.name})]}),_.jsx("button",{onClick:()=>e(),className:"ml-auto text-stone-400 hover:text-stone-600",children:_.jsx(Re,{name:"logout",className:"text-lg"})})]}),_.jsxs("div",{className:"space-y-1 flex-1",children:[_.jsxs("button",{onClick:()=>Ge(null),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-semibold ${pe?"text-stone-500 hover:bg-stone-50":"bg-stone-100 text-stone-900"}`,children:[_.jsx(Re,{name:"dashboard"}),"Dashboard"]}),_.jsx("div",{className:"pt-4 pb-2 px-4 text-xs font-bold text-stone-400 uppercase tracking-wider",children:"Your Circle"}),r.map(Oe=>_.jsxs("button",{onClick:()=>Ge(Oe.id),className:`w-full flex items-center gap-3 px-4 py-2 rounded-xl transition-all font-medium ${pe===Oe.id?"bg-stone-100 text-stone-900":"text-stone-500 hover:bg-stone-50"}`,children:[_.jsx("img",{src:Oe.avatarUrl,className:"w-6 h-6 rounded-full object-cover"}),Oe.name]},Oe.id)),_.jsxs("button",{onClick:()=>B(!0),className:"w-full flex items-center gap-3 px-4 py-2 rounded-xl text-stone-400 hover:text-stone-600 hover:bg-stone-50 transition-all font-medium border border-dashed border-stone-200 mt-2",children:[_.jsx("div",{className:"w-6 h-6 rounded-full bg-stone-100 flex items-center justify-center",children:_.jsx(Re,{name:"add",className:"text-sm"})}),"Add Person"]})]}),_.jsxs("button",{onClick:()=>J(!0),className:"mt-auto flex items-center justify-center gap-2 bg-gradient-to-r from-stone-800 to-stone-700 text-white p-4 rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all group",children:[_.jsx(Re,{name:"network_intelligence",className:"group-hover:animate-pulse"}),_.jsx("span",{className:"font-bold",children:"Ask Kinfolk AI"})]})]}),_.jsx("main",{className:"flex-1 h-full overflow-y-auto relative scroll-smooth",children:_.jsx("div",{className:"p-4 md:p-8 lg:p-12 max-w-5xl mx-auto",children:ve?_.jsx(bS,{person:ve,currentUser:Ae,initialTab:Pe,onBack:()=>Ge(null),onUpdatePerson:c,onDeletePerson:h,onAddTodo:g,onUpdateTodo:p,onDeleteTodo:v,onToggleTodo:E,onAddHealth:S,onUpdateHealth:b,onDeleteHealth:C,onAddNote:x,onUpdateNote:N,onDeleteNote:U,onAddFinance:O,onUpdateFinance:M,onDeleteFinance:Y,onUploadAvatar:L,onShareRecord:j,onUnshareRecord:X,onLinkToUser:re,onSendCollaborationRequest:D}):_.jsx(mS,{people:r,onSelectPerson:le,onAddPerson:()=>B(!0),pendingCollaborationRequests:A,onAcceptCollaborationRequest:W,onDeclineCollaborationRequest:oe})})})]}),_.jsx(sR,{people:r,isOpen:ne,onClose:()=>J(!1),onAddTodo:g,onAddHealth:S,onAddNote:x,onAddFinance:O}),!ne&&_.jsx("button",{onClick:()=>J(!0),className:"md:hidden fixed bottom-6 right-6 w-14 h-14 bg-stone-800 text-white rounded-full shadow-2xl flex items-center justify-center z-40 active:scale-95 transition-transform",children:_.jsx(Re,{name:"network_intelligence",className:"text-2xl"})}),_.jsx(EI,{isOpen:V,onClose:()=>B(!1),onAdd:l}),_.jsx("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"})]})},L_=document.getElementById("root");if(!L_)throw new Error("Could not find root element to mount to");const bI=hS.createRoot(L_);bI.render(_.jsx(Fa.StrictMode,{children:_.jsx(vI,{children:_.jsx(TI,{})})}));
